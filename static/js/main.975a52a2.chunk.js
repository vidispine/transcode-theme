(this["webpackJsonptest-vdt-app"]=this["webpackJsonptest-vdt-app"]||[]).push([[0],{457:function(e,t,a){},459:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),c=a.n(i),o=a(218),s=a(460),d=a(461),l=a(159),j=a(283),h=a.n(j),u=(a(261),a(377),Object(l.a)({typography:{useNextVariants:!0,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{type:"light",primary:{light:"#222",main:"#111",dark:"#000"},secondary:{light:"#DDD",main:"#CCC",dark:"#BBB"},text:{primary:"rgba(0,0,0,0.75)"},background:{login:"linear-gradient(-45deg,#b0c800,#0068a9 0,#0068a9 33%,#002749 100%,#b0c800 0)"}},overrides:{VdtUserAvatarButton:{avatar:{backgroundColor:h.a[500],fontSize:"0.875rem",height:32,width:32}}},props:{VdtUserAvatarButton:{locale:{options:void 0},userName:""}}})),b=a(56),O=a(42),x=a(3),p=a(13),f=a(284),m=a(129),g=a(563),v=a(6),C=a(7),S=r.a.createContext();var T=function(e){var t=e.children,a=Object(g.a)(["storages"],(function(){return v.s.listStorage({}).then((function(e){var t=e.data;return function(e){var t=null,a=null;return e.storage.forEach((function(e){e.metadata.field&&e.metadata.field.forEach((function(n){"transcodeThemeSourceStorage"===n.key&&(t=e.id),"transcodeThemeOutputStorage"===n.key&&(a=e.id)}))})),{sourceStorage:t,outputStorage:a}}(void 0===t?{}:t)}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),n=a.data,r=a.isLoading,i=a.isError;return Object(C.jsx)(S.Provider,{value:Object(m.a)(Object(m.a)({},n),{},{isLoading:r,isError:i}),children:t})},E=a.p+"static/media/logo.db253c2c.svg",L=a.p+"static/media/header-logo.f0892ea4.svg",N=E,P=L,_="VidiCore Transcode Theme";""===Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL||Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL;document.title="VidiCore Transcode Theme";var A="https://vidispine.github.io/transcode-theme";A&&A.startsWith("http")&&(A=(A=new URL(A)).pathname.replace(/(.+?)\/+$/,"$1"));var y=A,k=a(206),w=a(142),I=a(203),R=a(248),F=a(77),D=a(471),V=a(25),U=a(208),W=a(11),M=a(59),B=a(39),H=a(558),K=a(559),z=a(135),q=a.n(z),J=a(330),Z=a.n(J);var $=function(e){var t=e.shape,a=e.file;if(!t)return Object(C.jsx)("p",{children:"Technical metadata extraction not completed."});var n=t.containerComponent,r=t.videoComponent,i=t.audioComponent,c=(n&&n.mediaInfo.property.find((function(e){return"Duration"===e.key}))||{}).value,o=i?i.length:0,s=i?i.reduce((function(e,t){return e+Number(t.channelCount)}),0):0;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("ul",{children:[n&&n.format&&Object(C.jsxs)("li",{children:[Object(C.jsx)("b",{children:"Container format:"})," ",n&&n.format," "]}),r&&r[0].codec&&Object(C.jsxs)("li",{children:[Object(C.jsx)("b",{children:"Video codec: "})," ",r&&r[0].codec]}),i&&i[0].codec&&Object(C.jsxs)("li",{children:[Object(C.jsx)("b",{children:"Audio codec: "})," ",i&&i[0].codec]}),i&&Object(C.jsxs)("li",{children:[Object(C.jsx)("b",{children:"Audio configuration:"})," ",o," tracks and ",s," channels"]}),c&&Object(C.jsxs)("li",{children:[Object(C.jsx)("b",{children:"Duration: "})," ",Z()(Number(c||0))]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("b",{children:"Timestamp: "})," ",a.timestamp]})]})})},G=function(e){var t=Object(p.k)(v.f.listFileStorage),a=t.data,n=t.request;return{onSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n({storageId:e,queryParams:{number:10,sort:"fileId desc",path:"*".concat(t,"*"),prefix:!0,wildcard:!0,first:a}})},fileListType:a,isLoading:t.isLoading,hasLoaded:t.hasLoaded}},Q=function(){var e=Object(n.useState)({fileShapes:{},hasShapesLoaded:!1}),t=Object(b.a)(e,2),a=t[0],r=t[1],i=function(e){r((function(t){return Object(m.a)(Object(m.a)({},t),{},{hasLoaded:e})}))};return Object(m.a)({onListShapes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(!1);var t=[];e.forEach((function(e){t.push(v.f.listFileShapes({fileId:e}))})),Promise.all(t).then((function(e){return e.map((function(e){return e.json()}))})).then((function(t){var a={};t.forEach((function(t,n){a[e[n]]=t.shape?t.shape[0]:{}})),r({hasShapesLoaded:!0,fileShapes:a})}))}},a)},X=function(e){var t=e.selected,a=e.onSelect,n=e.file,r=e.transcodeAvailable,i=e.openTranscodeModal;return Object(C.jsxs)(D.a,{disableSpacing:!0,style:{padding:0},children:[r&&Object(C.jsx)(V.a,{onClick:function(){return i(n)},children:Object(C.jsx)(H.a,{})}),Object(C.jsx)(V.a,{children:Object(C.jsx)(K.a,{})}),Object(C.jsx)(U.a,{checked:t,onChange:a})]})},Y=function(e){var t=e.classes,a=e.storageId,r=e.transcodeAvailable,i=e.openTranscodeModal,c=G(a),o=c.onSearch,s=c.fileListType,d=c.hasLoaded,l=c.isLoading,j=Q(),h=j.onListShapes,u=j.hasShapesLoaded,O=j.fileShapes,x=Object(n.useState)(0),p=Object(b.a)(x,2),f=p[0],m=p[1],g=Object(n.useState)(""),v=Object(b.a)(g,2),S=v[0],T=v[1],E=(d?s:{}).file,L=void 0===E?[]:E;Object(n.useEffect)((function(){d&&h(L.map((function(e){return e.id})))}),[L]),Object(n.useEffect)((function(){o(S,f)}),[f]);var N=function(e){return u&&O[e.id]&&0!==Object.keys(O[e.id]).length?Object(C.jsx)($,{file:e,shape:O[e.id]}):Object(C.jsx)("p",{children:"Technical metadata extraction not completed."})};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(F.c,{className:t.SearchInput,onSubmit:o,submitting:d&&l,onChange:T}),Object(C.jsx)(W.a,{onClick:function(){m(Math.max(0,f-10))},children:"Previous"}),Object(C.jsx)(W.a,{onClick:function(){m(f+10)},children:"Next"}),Object(C.jsx)(M.a,{children:L.map((function(e){return Object(C.jsx)(B.a,{children:Object(C.jsx)(F.b,{className:"search-result",title:e.path,subheader:q()(e.size),ExpandComponent:!1,content:N(e),ContentProps:{component:"div"},ActionsComponent:X,ActionsProps:{transcodeAvailable:r,openTranscodeModal:i,file:{file:e,fileShape:u?O[e.id]:{}}}},e.id)},e.id)}))})]})},ee=a(40),te=a(16),ae=a(61),ne=a(49),re=a(44),ie=a(70),ce=a(48),oe=a(51),se=r.a.createContext();var de=function(e){var t={},a=e.name,n=e.format,r=e.video,i=e.audio,c=e.metadata;if(a&&(t.name=a),n&&(t.format=n),r){var o=r.codec,s=r.bitrate,d=r.scaling,l=r.framerate;if(o&&(t.videoCodec=o),s&&(t.bitrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["Kb/s","Mb/s"],a=parseInt(Math.floor(Math.log(e)/Math.log(1024e4)),10);return"".concat((e/Math.pow(1e3,a+1)).toFixed(0)," ").concat(t[a])}(s)),d){var j=d.width,h=d.height;j&&h&&(t.resolution="".concat(j," x ").concat(h)),j&&(t.width=j),h&&(t.height=h)}if(l){var u=r.denominator,b=void 0===u?1:u,O=r.numerator,x=void 0===O?1:O;t.framerate=b/x}}if(i){var p=i.codec;p&&(t.audioCodec=p)}return c&&(t.metadata=c),t};function le(e){var t=e.tagName;return Object(g.a)(["profile",t],(function(){return v.r.getShapeTag({tagName:t}).then((function(e){var t=e.data;return de(void 0===t?{}:t)}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}var je=function(e){var t=e.children,a=Object(g.a)(["profile"],(function(){return v.r.listShapeTag().then((function(e){var t=e.data,a=(void 0===t?{}:t).uri;return void 0===a?[]:a}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),n=a.data,i=void 0===n?[]:n,c=a.isLoading,o=a.isError,s=r.a.useState(""),d=Object(b.a)(s,2),l=d[0],j=d[1],h=r.a.useMemo((function(){return i.filter((function(e){return e.toLowerCase().includes(l)}))}),[l,i]);return Object(C.jsx)(se.Provider,{value:{profiles:h,onSearch:function(e){return j(e)},isLoading:c,isError:o},children:t})};function he(){var e=r.a.useContext(se);if(void 0===e)throw new Error("useProfile must be used within a ProfileProvider");return e}var ue=function(e){var t=le({tagName:e.profile}).data,a=void 0===t?{}:t,n=a.name,r=a.resolution,i=a.videoCodec,c=a.bitrate,o=a.audioCodec;return Object(C.jsxs)(ee.a,{children:[Object(C.jsx)(te.a,{padding:"checkbox",children:Object(C.jsx)(U.a,{})}),Object(C.jsx)(te.a,{children:n}),Object(C.jsxs)(te.a,{children:["Codec: ",i]}),Object(C.jsxs)(te.a,{children:["Audio codec: ",o]}),Object(C.jsxs)(te.a,{children:["Resolution: ",r]}),Object(C.jsxs)(te.a,{children:["Bitrate: ",c]})]})},be=function(e){return e.fileShape?Object(C.jsx)($,{file:e.file,shape:e.fileShape}):Object(C.jsx)("p",{children:"Technical metadata extraction not completed."})},Oe=function(e){var t=e.open,a=e.fileInfo,n=e.handleClose,r=he().profiles,i=void 0===r?[]:r;return Object(C.jsxs)(ae.a,{fullWidth:!1,maxWidth:"md",open:t,onClose:function(){},"aria-labelledby":"max-width-dialog-title",children:[Object(C.jsxs)(ne.a,{id:"max-width-dialog-title",children:["Transcode file ",a?a.file.id:""]}),Object(C.jsxs)(re.a,{children:[a&&Object(C.jsx)(F.b,{className:"search-result",title:a.file.path,subheader:q()(a.file.size),ExpandComponent:!1,content:be(a),ContentProps:{component:"div"},ActionsComponent:!1}),Object(C.jsx)("h2",{children:"Profiles"}),Object(C.jsx)(ie.a,{children:Object(C.jsx)(ce.a,{children:i.map((function(e){return Object(C.jsx)(ue,{profile:e},e)}))})})]}),Object(C.jsxs)(oe.a,{children:[Object(C.jsx)(W.a,{onClick:n,color:"primary",children:"Close"}),Object(C.jsx)(W.a,{onClick:function(){},color:"primary",children:"Next"})]})]})};a(457);var xe=Object(x.a)((function(e){return{root:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(4),paddingRight:e.spacing(4)},ItemList:{},SearchInput:{}}}))((function(e){var t=e.classes,a=r.a.useState("source"),n=Object(b.a)(a,2),i=n[0],c=n[1],o=r.a.useState(),s=Object(b.a)(o,2),d=s[0],l=s[1],j=r.a.useState(!1),h=Object(b.a)(j,2),u=h[0],O=h[1],x=r.a.useContext(S),p=x.sourceStorage,f=x.outputStorage,m=x.isLoading;return Object(C.jsxs)("div",{className:t.root,children:[Object(C.jsxs)(k.a,{value:i,onChange:function(e,t){return t&&c(t)},children:[Object(C.jsx)(w.a,{value:"source",label:"Source"}),Object(C.jsx)(w.a,{value:"output",label:"Output"})]}),{source:Object(C.jsx)(I.a,{variant:"outlined",children:!m&&Object(C.jsx)(R.a,{children:Object(C.jsx)(Y,{classes:t,storageId:p,openTranscodeModal:function(e){l(e),O(!0)},transcodeAvailable:!0})})},"source"),output:Object(C.jsx)(I.a,{variant:"outlined",children:!m&&Object(C.jsx)(R.a,{children:Object(C.jsx)(Y,{classes:t,storageId:f,transcodeAvailable:!1})})},"output")}[i],Object(C.jsx)(Oe,{fileInfo:d,open:u,handleClose:function(){O(!1)}})]})})),pe=a(21),fe=a(97),me=function(e){var t=le({tagName:e.profile}).data,a=void 0===t?{}:t;console.log(a);var n=a.name,r=a.format,i=a.resolution,c=a.videoCodec,o=a.bitrate,s=a.audioCodec,d=a.framerate;return Object(C.jsxs)(ee.a,{children:[Object(C.jsx)(te.a,{padding:"checkbox",children:Object(C.jsx)(U.a,{})}),Object(C.jsx)(te.a,{children:n}),Object(C.jsx)(te.a,{children:r}),Object(C.jsx)(te.a,{children:i}),Object(C.jsx)(te.a,{children:d}),Object(C.jsx)(te.a,{children:c}),Object(C.jsx)(te.a,{children:s}),Object(C.jsx)(te.a,{children:o})]})},ge=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=t[0],r=t[1],i=he(),c=i.profiles,o=void 0===c?[]:c,s=i.onSearch;return Object(C.jsxs)(pe.a,{height:500,children:[Object(C.jsx)(F.c,{onSubmit:s}),Object(C.jsx)(W.a,{type:"button",onClick:function(){r(Math.max(0,a-20))},disabled:0===a,children:"Prev"}),Object(C.jsx)(W.a,{type:"button",onClick:function(){r(a+20)},disabled:a+20>o.length,children:"Next"}),Object(C.jsxs)(ie.a,{children:[Object(C.jsx)(fe.a,{children:Object(C.jsxs)(ee.a,{children:[Object(C.jsx)(te.a,{}),Object(C.jsx)(te.a,{children:"Name"}),Object(C.jsx)(te.a,{children:"Format"}),Object(C.jsx)(te.a,{children:"Resolution"}),Object(C.jsx)(te.a,{children:"Framerate"}),Object(C.jsx)(te.a,{children:"Video codec"}),Object(C.jsx)(te.a,{children:"Audio codec"}),Object(C.jsx)(te.a,{children:"Bitrate"})]})}),Object(C.jsx)(ce.a,{children:o.slice(a,a+20).map((function(e){return Object(C.jsx)(me,{profile:e},e)}))})]})]})},ve=a(15),Ce=a(100),Se=a(207),Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="Not a URL",a=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi,n=new RegExp(a),r=e.match(n);return r?null:t};var Ee=Object(x.a)((function(e){return{root:{height:"100vh",width:"100vw"},gridLeft:{padding:e.spacing(4)},gridRight:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.background.login},logo:{backgroundColor:e.palette.common.white,maxWidth:"25vw"}}}))((function(e){var t=e.classes,a=e.onLogin,n=e.userName,r=e.serverUrl,i=e.error;return Object(C.jsxs)(ve.a,{className:t.root,container:!0,direction:"row",alignItems:"center",children:[Object(C.jsxs)(ve.a,{item:!0,xs:12,sm:12,md:6,lg:3,className:t.gridLeft,children:[Object(C.jsx)(Se.a,{style:{visibility:i?"visible":"hidden"},severity:"error",className:t.alert,children:i}),Object(C.jsx)(F.a,{onSubmit:a,FormProps:{initialValues:{userName:n,serverUrl:r}},FormFieldsProps:{UrlFieldProps:{validate:Te}}})]}),Object(C.jsx)(Ce.a,{smDown:!0,children:Object(C.jsx)(ve.a,{item:!0,sm:!0,className:t.gridRight,children:Object(C.jsx)("img",{src:N,alt:_,className:t.logo})})})]})})),Le=a(23);var Ne=Object(x.a)((function(){return{logo:{text:"100%",textAlign:"center"}}}))((function(e){var t=e.classes;return Object(C.jsx)(Le.a,{className:t.text,children:"Page does not exist"})})),Pe=a(466),_e=a(336);var Ae=Object(x.a)((function(e){return{logo:{height:"calc(".concat(e.mixins.toolbar.minHeight,"px - ").concat(e.spacing(4),"px)"),marginRight:e.spacing(4)},title:{flexGrow:1}}}))((function(e){var t=e.classes,a=Object(p.l)(),n=a.userName,r=a.onLogout;return Object(C.jsx)(Pe.a,{elevation:0,children:Object(C.jsxs)(_e.a,{variant:"dense",children:[Object(C.jsx)("img",{className:t.logo,src:P,alt:_}),Object(C.jsx)("div",{className:t.title,children:_}),Object(C.jsx)(F.d,{userName:n,onLogout:r})]})})})),ye=new(a(561).a);var ke=Object(x.a)((function(e){return{container:{height:"100vh",overflow:"auto",paddingTop:e.mixins.toolbar.minHeight,marginRight:e.spacing(1),marginLeft:e.spacing(1)}}}))((function(e){var t=e.classes,a=r.a.useState(),n=Object(b.a)(a,2),i=n[0],c=n[1];return Object(C.jsx)(p.a,{cookieOptions:{maxAge:1209600,path:y},onError:function(e){var t=e.message;c(t),setTimeout((function(){return c()}),5e3)},LoginComponent:Ee,LoginProps:{error:i},children:Object(C.jsx)(f.a,{client:ye,children:Object(C.jsx)(T,{children:Object(C.jsxs)(je,{children:[Object(C.jsx)(Ae,{}),Object(C.jsx)("div",{className:t.container,children:Object(C.jsxs)(O.d,{children:[Object(C.jsx)(O.b,{exact:!0,path:"/search/",children:Object(C.jsx)(xe,{})}),Object(C.jsx)(O.b,{exact:!0,path:"/search/*",children:Object(C.jsx)(xe,{})}),Object(C.jsx)(O.b,{exact:!0,path:"/profile/",children:Object(C.jsx)(ge,{})}),Object(C.jsx)(O.a,{exact:!0,from:"/",push:!0,to:"/search/"}),Object(C.jsx)(O.b,{path:"*",children:Object(C.jsx)(Ne,{})})]})})]})})})})})),we=a(331),Ie=a(332),Re=a(335),Fe=a(334),De=a(560),Ve=a(121),Ue=function(e){Object(Re.a)(a,e);var t=Object(Fe.a)(a);function a(e){var n;return Object(we.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(Ie.a)(a,[{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.hasError,n=t.error;return a?Object(C.jsx)(De.a,{maxWidth:"sm",children:Object(C.jsxs)(Ve.a,{variant:"outlined",style:{backgroundColor:"#313131",color:"#eee",padding:"8px 16px 32px 16px"},children:[Object(C.jsx)("h3",{children:"We're sorry - something went wrong: "}),n&&Object(C.jsx)("div",{style:{color:"#e57373"},children:n.toString()})]})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}]),a}(r.a.Component);c.a.render(Object(C.jsx)(Ue,{children:Object(C.jsx)(s.a,{theme:u,children:Object(C.jsx)(d.a,{children:Object(C.jsx)(o.a,{basename:y,children:Object(C.jsx)(ke,{})})})})}),document.getElementById("root"))}},[[459,1,2]]]);