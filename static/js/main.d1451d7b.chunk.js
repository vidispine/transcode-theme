(this["webpackJsonptest-vdt-app"]=this["webpackJsonptest-vdt-app"]||[]).push([[0],{466:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(31),c=a.n(i),o=a(102),l=a(469),s=a(470),u=a(117),d=a(169),b=a(295),j=a.n(b),p=(a(273),a(389),Object(d.a)({typography:{useNextVariants:!0,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{type:"light",primary:{main:"#7B61FF"},secondary:{main:"#CCC"},text:{primary:"rgba(0,0,0,0.75)"},background:{login:"linear-gradient(-45deg,#b0c800,#0068a9 0,#0068a9 33%,#002749 100%,#b0c800 0)",default:"#f2f2f2",paper:"#fff"}},overrides:{VdtUserAvatarButton:{avatar:{backgroundColor:j.a[500],fontSize:"0.875rem",height:32,width:32}},MuiTabs:{root:{},indicator:{backgroundColor:"#7B61FF",height:"100%",borderRadius:4,zIndex:-1},flexContainer:{alignItems:"center"}},MuiTab:{root:{color:"inherit",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&$selected":{color:"#fff"}}}},mixins:{toolbar:{minHeight:56}},props:{VdtUserAvatarButton:{locale:{options:void 0},userName:""}}})),m=a(26),h=a(48),f=a(3),O=a(14),v=a(296),g=a(8),x=a(45),y=a(69),C=a(50),A=a(46),S=a(57),E=a(12),T=a(4),P=function(e){var t=e.open,a=e.onClose,r=e.onSuccess,n=e.title,i=void 0===n?"Dialog":n,c=e.okText,o=void 0===c?"Ok":c,l=e.noText,s=void 0===l?"Cancel":l,u=e.message,d=void 0===u?"Message":u,b=e.Dialog,j=void 0===b?y.a:b;return Object(T.jsxs)(j,{open:t,onClose:a,children:[Object(T.jsx)(C.a,{children:i}),Object(T.jsx)(A.a,{dividers:!0,children:d}),Object(T.jsxs)(S.a,{children:[Object(T.jsx)(E.a,{onClick:a,children:s}),Object(T.jsx)(E.a,{variant:"contained",color:"primary",onClick:r,children:o})]})]})},k=function(e){var t=e.Dialog,a=void 0===t?P:t,r=Object(x.a)(e,["Dialog"]);return Object(T.jsx)(a,Object(g.a)({},r))},R=n.a.createContext({}),N=function(e){var t=e.children,a=n.a.useState(!1),r=Object(m.a)(a,2),i=r[0],c=r[1],o=n.a.useState({}),l=Object(m.a)(o,2),s=l[0],u=s.config,d=s.resolve,b=s.reject,j=l[1],p=function(){c(!1)};return Object(T.jsxs)(R.Provider,{value:{openDialog:function(e){c(!0),j(e)}},children:[Object(T.jsx)(k,Object(g.a)(Object(g.a)({},u),{},{open:i,onSuccess:function(e){d(e),p()},onClose:function(e){b(e),p()}})),t]})},D=function(){var e=n.a.useContext(R).openDialog;return{showDialog:function(t){return new Promise((function(a,r){return e({config:t,resolve:a,reject:r})}))}}},I=a(574),_=a(7),w=n.a.createContext();var H=function(e){var t={},a=e.name,r=e.format,n=e.video,i=e.audio,c=e.metadata;if(a&&(t.name=a),r&&(t.format=r),n){var o=n.codec,l=n.bitrate,s=n.scaling,u=n.resolution,d=n.framerate;if(o&&(t.videoCodec=o),l&&(t.bitrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=["B/s","Kb/s","Mb/s"],a=Math.floor(Math.log(e)/Math.log(1e3));return"".concat((e/Math.pow(1e3,a)).toFixed(0)," ").concat(t[a])}(l)),s||u){var b=s||u,j=b.width,p=b.height;j&&p&&(t.resolution="".concat(j," x ").concat(p)),j&&(t.width=j),p&&(t.height=p)}if(d){var m=d.denominator,h=void 0===m?1:m,f=d.numerator,O=void 0===f?1:f;t.framerate=h/O}}if(i){var v=i.codec;v&&(t.audioCodec=v)}if(c)for(var g=c.field,x=void 0===g?[]:g,y=0;y<x.length;y+=1){var C=x[y],A=C.key,S=C.value;t[A]=S}return t};var F=function(e){var t=e.children,a=Object(I.a)(["profile"],(function(){return _.r.listShapeTag().then((function(e){var t=e.data,a=(void 0===t?{}:t).uri;return void 0===a?[]:a}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),r=a.data,i=void 0===r?[]:r,c=a.isLoading,o=a.isError,l=n.a.useState(""),s=Object(m.a)(l,2),u=s[0],d=s[1],b=n.a.useMemo((function(){return i.filter((function(e){return e.toLowerCase().includes(u)}))}),[u,i]);return Object(T.jsx)(w.Provider,{value:{profiles:b,onSearch:function(e){return d(e)},isLoading:c,isError:o},children:t})};function G(){var e=n.a.useContext(w);if(void 0===e)throw new Error("useProfile must be used within a ProfileProvider");return e}var L=a(140),M=n.a.createContext({splitters:{}}),q="LAYOUT_SPLITTERS",z=function(e){var t=e.splitters,a=e.children,r=n.a.useState((function(){return function(){try{return JSON.parse(localStorage.getItem(q))||t}catch(e){return t}}()})),i=Object(m.a)(r,2),c=i[0],o=i[1];n.a.useEffect((function(){localStorage.setItem(q,JSON.stringify(c))}),[c]);return Object(T.jsx)(M.Provider,{value:{splitters:c,resetSplitters:function(){o(t)},setSplitter:function(e,t){o((function(a){return Object(g.a)(Object(g.a)({},a),{},Object(L.a)({},e,t))}))}},children:a})};var U=n.a.createContext();function B(){return Object(I.a)(["resources"],(function(){return _.o.listResourceType({resourceType:"vidinet"}).then((function(e){var t=e.data;return(void 0===t?{}:t).resource.map((function(e){var t=e.id,a=e.vidinet;return Object(g.a)({id:t},a)}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}var W=function(e){var t=e.children,a=Object(I.a)(["storages"],(function(){return _.s.listStorage({}).then((function(e){var t=e.data;return function(e){var t=null,a=null;return e.storage.forEach((function(e){e.metadata.field&&e.metadata.field.forEach((function(r){"transcodeThemeSourceStorage"===r.key&&(t=e.id),"transcodeThemeOutputStorage"===r.key&&(a=e.id)}))})),{sourceStorage:t,outputStorage:a}}(void 0===t?{}:t)}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),r=a.data,n=a.isLoading,i=a.isError,c=B(),o=c.data,l=c.isLoading,s=c.isError,u=n||l,d=i||s;return Object(T.jsx)(U.Provider,{value:{storages:r,resources:o,isLoading:u,isError:d},children:t})},V=a.p+"static/media/logo.db253c2c.svg",J=a.p+"static/media/header-logo.f0892ea4.svg",K=V,Y=J,Q="VidiCore Transcode Theme";""===Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL||Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL;document.title="VidiCore Transcode Theme";var X="https://vidispine.github.io/transcode-theme";X&&X.startsWith("http")&&(X=(X=new URL(X)).pathname.replace(/(.+?)\/+$/,"$1"));var $=X,Z=a(118),ee=a(25),te=a(217),ae=a(147),re=a(136),ne=a(58),ie=a(62),ce=a.n(ie),oe=a(195),le=a.n(oe),se=a(564),ue=a(565),de=a(22),be=a(36),je=a(107),pe=a(27),me=a(44),he=a(252),fe="READY",Oe="STARTED",ve="VIDINET_JOB",ge="FINISHED",xe="FINISHED_WARNING",ye="WAITING",Ce="ABORTED",Ae="FAILED_TOTAL",Se=[fe,Oe,ve,ye],Ee=[ge,xe,Ae,Ce],Te=function(e){var t=e.fields,a=e.data;return t.map((function(e){var t=e.key,r=e.label;return Object(T.jsxs)(ee.a,{display:"contents",children:[Object(T.jsxs)(de.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(T.jsx)(de.a,{variant:"body2",color:"textPrimary",children:ce()(a,t,"-")})]},t)}))},Pe=[{key:"type",label:"Job type"},{key:"jobId",label:"Job ID"}],ke=Object(f.a)((function(e){var t=e.palette,a=e.spacing;return{root:{backgroundColor:t.background.paper,borderRadius:a(.5),padding:a(1,0),display:"flex",flexDirection:"column",alignItems:"stretch","&:not(:last-child)":{marginBottom:a(2)}},top:{padding:a(1,2),display:"grid",alignItems:"start",gridTemplateColumns:"auto 1fr auto",gap:a(2),"& > .MuiBox-root":{display:"grid",gridTemplateColumns:"auto 1fr",gap:a(0,2)}}}}))((function(e){var t=e.jobType,a=void 0===t?{}:t,r=e.classes,i=e.onAbort,c=n.a.useState(Object(g.a)({},a)),o=Object(m.a)(c,1)[0],l=o.status,s=o.started,u=o.jobId,d=function(e){var t=e.jobId,a=e.type,r=e.status,i=n.a.useState(0),c=Object(m.a)(i,2),o=c[0],l=c[1];return{request:n.a.useCallback((function(){Ee.includes(r)?l(100):function e(){return _.j.getJob({jobId:t}).then((function(t){var r=t.data,n=(r=void 0===r?{}:r).status,i=r.log,c=100;"TRANSCODE"===a&&(c=200);var o=((void 0===i?{}:i).task.find((function(e){return e.step===c}))||{}).progress;l((void 0===o?{}:o).value||0),Se.includes(n)&&setTimeout((function(){return e()}),2500)}))}()}),[t,a,r]),value:o}}(a),b=d.request,j=d.value,p=void 0===j?100:j;return n.a.useEffect(b,[b]),Object(T.jsxs)(be.a,{className:r.root,alignItems:"flex-start",children:[Object(T.jsxs)(ee.a,{className:r.top,children:[Object(T.jsx)(je.a,{variant:"square",children:"J"}),Object(T.jsx)(ee.a,{children:Object(T.jsx)(Te,{data:a,fields:Pe})}),Object(T.jsxs)(pe.a,{size:"small",onClick:function(){return Se.includes(l)&&i(u)},children:[Se.includes(l)&&Object(T.jsx)(se.a,{}),Ee.includes(l)&&Object(T.jsx)(ue.a,{})]})]}),Object(T.jsx)(me.a,{}),Object(T.jsxs)(ee.a,{children:[Object(T.jsxs)(ee.a,{py:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(T.jsx)(de.a,{color:"textPrimary",variant:"button",children:l}),Object(T.jsx)(de.a,{color:"textSecondary",variant:"caption",children:le()(s).fromNow()})]}),Object(T.jsx)(he.a,{variant:"determinate",value:p})]})]})})),Re=function(){var e=D().showDialog,t=Object(u.b)().enqueueSnackbar,a=n.a.useState("active"),r=Object(m.a)(a,2),i=r[0],c=r[1],o=n.a.useState(0),l=Object(m.a)(o,2),s=l[0],d=l[1],b=Object(O.k)(_.j.listJob),j=b.request,p=b.data,h=(p=void 0===p?{}:p).job,f=void 0===h?[]:h,v=p.hits,g=void 0===v?0:v,x=b.isLoading;n.a.useEffect((function(){var e={step:!0,type:"RAW_IMPORT,PLACEHOLDER_IMPORT,TRANSCODE",sort:"startTime desc",first:5*s,number:5,state:"active"===i?Se:Ee};j({queryParams:e});var t=setInterval((function(){return j({queryParams:e})}),15e3);return function(){return clearInterval(t)}}),[j,s,i]);var y=function(a){return e({message:"Are you sure you want to abort this job?",okText:"Yes, abort job",noText:"No, cancel"}).then((function(){return _.j.abortJob({jobId:a})})).then((function(){return t("Job aborted!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))};return Object(T.jsxs)(ee.a,{display:"grid",gridTemplateRows:"auto 1fr auto",gridGap:16,children:[Object(T.jsxs)(te.a,{value:i,onChange:function(e,t){d(0),c(t)},children:[Object(T.jsx)(ae.a,{disableRipple:!0,value:"active",label:"Active"}),Object(T.jsx)(ae.a,{disableRipple:!0,value:"finished",label:"Finished"}),x&&Object(T.jsx)(ae.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(T.jsx)(re.a,{size:20})})]}),Object(T.jsxs)(ee.a,{overflow:"auto",children:[Object(T.jsx)(ne.a,{disablePadding:!0,children:f.map((function(e){return Object(T.jsx)(ke,{jobType:e,onAbort:y},e.jobId)}))}),!x&&f.length<1&&Object(T.jsxs)("span",{children:["No ",i," jobs found"]})]}),Object(T.jsxs)(ee.a,{display:"flex",justifyContent:"flex-end",children:[Object(T.jsx)(E.a,{disabled:!s,onClick:function(){return d(s-1)},children:"Prev"}),Object(T.jsx)(E.a,{disabled:5*(s+1)>g,onClick:function(){return d(s+1)},children:"Next"})]})]})},Ne=a(297),De=a(9),Ie=a(570),_e=a(571),we=a(476),He=a(219),Fe=a(30),Ge=a(56),Le=a(28),Me=a(566),qe=a(567),ze=a(82),Ue=a(33),Be=function(e){var t=e.onChange,a=e.match;return Object(T.jsx)(ze.a,{input:{onChange:t,checked:a},color:"primary",size:"small",label:"Match source"})},We=function(e){var t=e.spacing,a=e.typography,r=e.palette;return{text:{marginTop:0,"& > div":{display:"flex",flexDirection:"column","& > label":{fontSize:a.fontSize,position:"relative",transform:"none",marginLeft:t(2),marginBottom:t(1)},"& > fieldset":{top:0,"& legend":{display:"none"}},"& input":{backgroundColor:r.background.paper,padding:t(2)}}},checkbox:{marginTop:0,paddingLeft:t(2),"& > p":{display:"none"}},select:{marginTop:0,display:"flex",flexDirection:"column","& > label":{fontSize:a.fontSize,position:"relative",transform:"none",marginLeft:t(2),marginBottom:t(1)},"& .MuiSelect-root":{backgroundColor:r.background.paper,padding:t(2,4,2,2)},"& .VdtCheckboxField-root":{marginTop:0,marginLeft:t(2),"& > p":{display:"none"},"& span":{fontSize:a.fontSize}}}}},Ve=Object(f.a)(We)((function(e){var t=e.name,a=e.label,r=e.match,i=e.options,c=e.required,o=e.dependency,l=e.classes,s=Object(x.a)(e,["name","label","match","options","required","dependency","classes"]),u={label:"Auto",value:"AUTO",style:{display:"none"}},d={label:"No options",disabled:!0,value:0},b=n.a.createRef(),j=n.a.useState([].concat(Object(Z.a)(i),[u])),p=Object(m.a)(j,2),h=p[0],f=p[1],O=n.a.useState(r),v=Object(m.a)(O,2),y=v[0],C=v[1];return n.a.useEffect((function(){if(void 0!==o){var e=b.current,t=e.value,a=e.onChange,r=i.filter((function(e){var t=e.dependency;return!o||!t||t.includes(o)}));if(r.length)r.find((function(e){return e.value===t}))||y||!o||a(r[0].value);else!y&&o&&a(),r.push(d);f(r.concat([u]))}}),[o,i]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Ue.a,{id:t,name:t,type:"select",render:function(e){var t=e.input,n=e.meta;return b.current||(b.current=t),Object(T.jsx)(ze.d,Object(g.a)({meta:n,type:"select",input:t,label:a,onBlur:t.onBlur,onFocus:t.onFocus,options:h,variant:"outlined",classes:{root:l.select},required:c,disabled:!!y,IconComponent:y?Me.a:qe.a,InputLabelProps:{required:c},FormHelperTextProps:void 0!==r&&{checked:y,onChange:function(e){var a=e.target;a.checked?t.onChange("AUTO"):h.length>2?t.onChange(h[0].value):t.onChange(),C(a.checked)},component:Be}},s))}})})})),Je=Object(f.a)(We)((function(e){var t=e.name,a=e.label,r=e.required,n=e.classes,i=Object(x.a)(e,["name","label","required","classes"]);return Object(T.jsx)(Ue.a,Object(g.a)({id:t,name:t,label:a,type:"checkbox",color:"primary",classes:{root:n.checkbox},required:r,component:ze.a},i))})),Ke=Object(f.a)(We)((function(e){var t=e.name,a=e.label,r=e.required,n=e.placeholder,i=e.classes,c=Object(x.a)(e,["name","label","required","placeholder","classes"]);return Object(T.jsx)(Ue.a,Object(g.a)({id:t,name:t,type:"text",label:a,variant:"outlined",classes:{root:i.text},required:r,component:ze.e,helperText:null,placeholder:n,InputLabelProps:{shrink:!1,"data-shrink":!0}},c))})),Ye=Object(f.a)(We)((function(e){var t=e.name,a=e.label,r=e.required,n=e.placeholder,i=e.classes,c=Object(x.a)(e,["name","label","required","placeholder","classes"]);return Object(T.jsx)(Ue.a,Object(g.a)({id:t,name:t,type:"number",label:a,variant:"outlined",classes:{root:i.text},required:r,component:ze.e,helperText:null,placeholder:n,InputLabelProps:{shrink:!1,"data-shrink":!0}},c))})),Qe=function(e){var t=e.type,a=e.dependency,r=Object(x.a)(e,["type","dependency"]),n=Ke;if("number"===t&&(n=Ye),"select"===t&&(n=Ve),"checkbox"===t&&(n=Je),!a)return Object(T.jsx)(n,Object(g.a)({},r));var i=a.key,c=a.value;return Object(T.jsx)(Ue.a,{name:i,subscription:{value:!0},children:function(e){var t=e.input.value;return void 0!==c&&t!==c?null:Object(T.jsx)(n,Object(g.a)(Object(g.a)({},r),{},{dependency:t}))}})},Xe=a(568),$e=a(67),Ze=function(e){var t=e.icon,a=void 0===t?Xe.a:t,r=e.children,i=e.size,c=n.a.useState(null),o=Object(m.a)(c,2),l=o[0],s=o[1],u=function(){s(null)};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(pe.a,{onClick:function(e){s(e.currentTarget)},disableRipple:!0,size:i,children:Object(T.jsx)(a,{})}),Object(T.jsx)($e.a,{onClick:u,anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:u,elevation:1,PaperProps:{square:!0},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:r})]})},et=a(347);var tt=Object(f.a)((function(e){return{root:{"& > *":{overflow:"hidden"},display:"flex",width:"100%",height:"100%","& .gutter":{backgroundColor:e.palette.background.secondary,backgroundRepeat:"no-repeat",backgroundPosition:"50%"},"& .gutter.gutter-horizontal":{flexDirection:"column",cursor:"col-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==')"},"& .gutter.gutter-vertical":{flexDirection:"row",cursor:"row-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=')"}}}}))((function(e){var t=e.classes,a=e.children,r=Object(x.a)(e,["classes","children"]);return Object(T.jsx)(et.a,Object(g.a)(Object(g.a)({},r),{},{className:t.root,children:a}))})),at=Object(f.a)((function(e){var t=e.spacing,a=e.palette;return{root:{position:function(e){return e.fixed?"sticky":"relative"},zIndex:10,top:0},input:{borderWidth:2,borderRadius:t(.5),paddingLeft:t(2),height:t(6),backgroundColor:a.background.paper,borderColor:a.primary.main},button:{color:a.getContrastText(a.primary.main),borderWidth:0,backgroundColor:a.primary.main}}}))((function(e){var t=e.fixed,a=void 0!==t&&t,r=e.onSubmit,n=e.onChange,i=e.classes,c=e.placeholder,o=void 0===c?"Search files...":c;return Object(T.jsx)(ze.c,{fixed:a,classes:i,onChange:n,onSubmit:r,searchPlaceholder:o})})),rt=a(343),nt=a(344),it=a(348),ct=a(346),ot=a(569),lt=a(126),st=function(e){Object(it.a)(a,e);var t=Object(ct.a)(a);function a(e){var r;return Object(rt.a)(this,a),(r=t.call(this,e)).state={hasError:!1},r}return Object(nt.a)(a,[{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.hasError,r=t.error;return a?Object(T.jsx)(ot.a,{maxWidth:"sm",children:Object(T.jsxs)(lt.a,{variant:"outlined",style:{backgroundColor:"#313131",color:"#eee",padding:"8px 16px 32px 16px"},children:[Object(T.jsx)("h3",{children:"We're sorry - something went wrong: "}),r&&Object(T.jsx)("div",{style:{color:"#e57373"},children:r.toString()})]})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}]),a}(n.a.Component),ut=function(e){var t=e.metadata,a=void 0===t?{}:t,r=e.shape;r=void 0===r?[{}]:r;var n=Object(m.a)(r,1)[0];return Object(g.a)(Object(g.a)(Object(g.a)({},Object(De.p)(a,{flat:!0,arrayOnSingle:!1})),Object(De.r)(n)),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).containerComponent,t=(void 0===e?{}:e).file,a=void 0===t?[{}]:t,r=Object(m.a)(a,1)[0],n=r.timestamp,i=r.id,c=r.storage;return{timestamp:le()(n).format("L"),fileId:i,storageId:c}}(n))},dt=Object(f.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"auto 1fr",gap:(0,e.spacing)(1,2)}}}))((function(e){var t=e.fields,a=e.data,r=e.classes;return Object(T.jsx)(ee.a,{classes:r,children:t.map((function(e){var t=e.key,r=e.label;return Object(T.jsxs)(ee.a,{display:"contents",children:[Object(T.jsxs)(de.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(T.jsx)(de.a,{variant:"body2",color:"textPrimary",children:ce()(a,t,"-")})]},t)}))})})),bt=[[{key:"title",label:"Title"},{key:"fileSize",label:"Filesize"}],[{key:"duration",label:"Duration"},{key:"timestamp",label:"Timestamp"},{key:"dimension",label:"Resolution"},{key:"frameRate",label:"Framerate"}],[{key:"videoCodec",label:"Video codec"},{key:"videoBitrate",label:"Bitrate"},{key:"audioCodec",label:"Audio codec"},{key:"audioChannels",label:"Audio channels"}]],jt=Object(f.a)((function(e){var t=e.palette,a=e.spacing;return{root:{backgroundColor:t.background.paper,borderRadius:a(.5),padding:a(2),display:"grid",gridTemplateColumns:"auto auto 1fr 1fr 1fr auto",gap:a(2),alignItems:"start","& > .MuiCheckbox-root":{padding:a(1),marginLeft:a(-1),marginTop:a(-1)},"&:not(:last-child)":{marginBottom:a(2)},"& > *:first-child:not(.MuiCheckbox-root)":{gridColumn:"1 / 2 span"},"& > *:last-child:nth-child(4)":{gridColumn:"5 / 2 span"}}}}))((function(e){var t=e.itemType,a=void 0===t?{}:t,r=e.classes,i=e.allowTranscode,c=void 0!==i&&i,o=e.onTranscode,l=e.onDownload,s=e.interactive,u=void 0===s||s,d=n.a.useMemo((function(){return ut(a)}),[a]);return Object(T.jsxs)(be.a,{classes:r,alignItems:"flex-start",children:[u&&Object(T.jsx)(He.a,{}),Object(T.jsx)(je.a,{variant:"square",children:"I"}),bt.map((function(e){return Object(T.jsx)(dt,{data:d,fields:e},e.reduce((function(e,t){return e+t.key}),""))})),u&&Object(T.jsxs)(ee.a,{display:"flex",flexDirection:"column",children:[c&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(pe.a,{onClick:function(){return o(a)},children:Object(T.jsx)(Ie.a,{})}),Object(T.jsxs)(Ze,{children:[Object(T.jsxs)(Fe.a,{onClick:function(){return l(d.uri)},children:[Object(T.jsx)(Ge.a,{children:Object(T.jsx)(_e.a,{})}),Object(T.jsx)(Le.a,{primary:"Download",secondary:"Download the file locally"})]}),Object(T.jsxs)(Fe.a,{onClick:function(){return console.log("delete")},children:[Object(T.jsx)(Ge.a,{children:Object(T.jsx)(we.a,{})}),Object(T.jsx)(Le.a,{primary:"Delete",primaryTypographyProps:{color:"error"},secondary:"Files on storage will be deleted"})]})]})]}),!c&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("a",{href:d.uri,download:"test.mp4",children:Object(T.jsx)(pe.a,{children:Object(T.jsx)(_e.a,{})})}),Object(T.jsx)(Ze,{children:Object(T.jsxs)(Fe.a,{onClick:function(){return console.log("delete")},children:[Object(T.jsx)(Ge.a,{children:Object(T.jsx)(we.a,{})}),Object(T.jsx)(Le.a,{primary:"Delete",primaryTypographyProps:{color:"error"},secondary:"Files on storage will be deleted"})]})})]})]})]})})),pt=a(103),mt=function(e){var t=e.fields,a=e.data;return t.map((function(e){var t=e.key,r=e.label;return Object(T.jsxs)(ee.a,{display:"contents",children:[Object(T.jsxs)(de.a,{variant:"body2",color:"textSecondary",children:[r,":"]}),Object(T.jsx)(de.a,{variant:"body2",color:"textPrimary",children:ce()(a,t,"Auto")})]},t)}))},ht=[[{key:"format",label:"Format"},{key:"resolution",label:"Resolution"}],[{key:"videoCodec",label:"Video codec"},{key:"bitrate",label:"Vide bitrate"}],[{key:"audioCodec",label:"Audio codec"},{key:"audioBitrate",label:"Audio bitrate"}]],ft=Object(f.a)((function(e){var t=e.palette,a=e.spacing;return{root:{backgroundColor:t.background.paper,borderRadius:a(.5),padding:a(2),display:"grid",gridTemplateColumns:"auto 1fr 1fr 1fr 1fr",gap:a(2),alignItems:"start","& .MuiCheckbox-root":{padding:a(1),marginLeft:a(-1),marginTop:a(-1)},"& > .MuiBox-root":{display:"grid",gridTemplateColumns:"auto 1fr",gap:a(1,2)},"&:not(:last-child)":{marginBottom:a(2)}}}}))((function(e){var t=e.tagName,a=e.selected,r=e.onChange,n=void 0===r?function(){return null}:r,i=e.classes,c=function(e){var t=e.tagName;return Object(I.a)(["profile",t],(function(){return _.r.getShapeTag({tagName:t}).then((function(e){var t=e.data;return H(void 0===t?{}:t)}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}({tagName:t}).data,o=void 0===c?{}:c;return Object(T.jsxs)(be.a,{selected:a,classes:i,alignItems:"flex-start",button:!0,onClick:function(){return n(o)},children:[Object(T.jsx)(Ge.a,{children:Object(T.jsx)(He.a,{checked:a,color:"primary"})}),Object(T.jsx)(de.a,{variant:"body1",children:t}),ht.map((function(e){return Object(T.jsx)(ee.a,{children:Object(T.jsx)(mt,{data:o,fields:e})},e.reduce((function(e,t){return e+t.key}),""))}))]})})),Ot={CHANGE_PAGE:"CHANGE_PAGE",CHANGE_ROWS:"CHANGE_ROWS",CHANGE_SORT:"CHANGE_SORT",CHANGE_SEARCHTEXT:"CHANGE_SEARCHTEXT",CHANGE_SEARCHFIELD:"CHANGE_SEARCHFIELD",CHANGE_SEARCHFIELDFACET:"CHANGE_SEARCHFIELDFACET",CHANGE_SEARCHFILTER:"CHANGE_SEARCHFILTER",CHANGE_SEARCHFILTERFACET:"CHANGE_SEARCHFILTERFACET",CHANGE_PARENT_COLLECTION:"CHANGE_PARENT_COLLECTION",CHANGE_FACET:"CHANGE_FACET",CHANGE_ITEMSEARCHDOCUMENT:"CHANGE_ITEMSEARCHDOCUMENT",CHANGE_QUERYPARAMS:"CHANGE_QUERYPARAMS",CHANGE_MATRIXPARAMS:"CHANGE_MATRIXPARAMS",CHANGE_SUGGESTION:"CHANGE_SUGGESTION"},vt=function(e,t){switch(t.type){case Ot.CHANGE_ITEMSEARCHDOCUMENT:return Object(g.a)(Object(g.a)({},e),{},{itemSearchDocument:t.itemSearchDocument});case Ot.CHANGE_QUERYPARAMS:return Object(g.a)(Object(g.a)({},e),{},{queryParams:t.queryParams});case Ot.CHANGE_PAGE:return Object(g.a)(Object(g.a)({},e),{},{page:t.page,queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:t.page*e.rowsPerPage+1})});case Ot.CHANGE_ROWS:return Object(g.a)(Object(g.a)({},e),{},{rowsPerPage:t.rowsPerPage,page:0,queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1,number:t.rowsPerPage})});case Ot.CHANGE_SORT:return Object(g.a)(Object(g.a)({},e),{},{page:0,searchText:t.value,sort:t.value,itemSearchDocument:Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{sort:t.field?[{field:t.field,order:t.order||"descending"}]:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_SEARCHTEXT:return Object(g.a)(Object(g.a)({},e),{},{page:0,searchText:t.value,itemSearchDocument:t.value?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{text:[{value:"".concat(t.value)}]}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{text:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_SEARCHFIELD:return Object(g.a)(Object(g.a)({},e),{},{page:0,field:t.field,itemSearchDocument:t.field?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{field:t.field}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{field:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_SEARCHFIELDFACET:return Object(g.a)(Object(g.a)({},e),{},{page:0,field:t.field,facet:t.facet,itemSearchDocument:t.field?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{field:t.field,facet:t.facet}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{field:[],facet:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_SEARCHFILTER:return Object(g.a)(Object(g.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{filter:t.filter}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{filter:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_SEARCHFILTERFACET:return Object(g.a)(Object(g.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{filter:t.filter,facet:t.facet}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{filter:[],facet:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_FACET:return Object(g.a)(Object(g.a)({},e),{},{page:0,facet:t.facet,itemSearchDocument:t.facet?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{facet:t.facet}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{facet:[]}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_PARENT_COLLECTION:return Object(g.a)(Object(g.a)({},e),{},{page:0,parentCollection:t.value,itemSearchDocument:t.value?Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{operator:{field:[{name:"__parent_collection",value:[{value:"".concat(t.value)}]},{name:"__collection",value:[{value:"".concat(t.value)}]}],operation:"OR"}}):Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{operator:void 0}),queryParams:Object(g.a)(Object(g.a)({},e.queryParams),{},{first:1})});case Ot.CHANGE_SUGGESTION:return Object(g.a)(Object(g.a)({},e),{},{itemSearchDocument:Object(g.a)(Object(g.a)({},e.itemSearchDocument),{},{suggestion:t.suggestion})});default:return e}};function gt(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,a=void 0===t?{}:t,r=e.itemSearchDocument,n=void 0===r?{}:r,i=e.rowsPerPage,c=void 0===i?10:i,o=e.page,l=void 0===o?0:o,s=Object(x.a)(e,["queryParams","itemSearchDocument","rowsPerPage","page"]);return Object(g.a)(Object(g.a)({},s),{},{queryParams:Object(g.a)({content:"metadata",interval:"generic",first:l*c+1,number:c},a),itemSearchDocument:Object(g.a)({intervals:"generic",filter:[]},n),rowsPerPage:c,page:l})}(e),a=n.a.useReducer(vt,t),r=Object(m.a)(a,2),i=r[0],c=r[1],o=n.a.useCallback((function(e){return c({type:Ot.CHANGE_SEARCHTEXT,value:e})}),[]),l=n.a.useCallback((function(e){return c({type:Ot.CHANGE_ITEMSEARCHDOCUMENT,itemSearchDocument:e})}),[]),s=n.a.useCallback((function(e){return c({type:Ot.CHANGE_ITEMQUERYPARAMS,queryParams:e})}),[]);return{state:i,onChangeRowsPerPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.value;return c({type:Ot.CHANGE_ROWS,rowsPerPage:t})},onChangePage:function(e){var t=e.page;return c({type:Ot.CHANGE_PAGE,page:t})},onChangeSort:function(e,t,a){return c({type:Ot.CHANGE_SORT,field:t,order:a})},setSearchText:o,setSearchField:n.a.useCallback((function(e){return c({type:Ot.CHANGE_SEARCHFIELD,field:e})}),[]),setSearchFieldFacet:n.a.useCallback((function(e){var t=e.map((function(e){return{field:e.name,count:!0}}));c({type:Ot.CHANGE_SEARCHFIELDFACET,field:e,facet:t})}),[]),setSearchFilter:n.a.useCallback((function(e){return c({type:Ot.CHANGE_SEARCHFILTER,filter:e})}),[]),setSearchFilterFacet:n.a.useCallback((function(e){var t=e.reduce((function(e,t){var a=t.field,r=void 0===a?[]:a;return e.concat(r)}),[]).map((function(e){var t=e.name;return{name:t,field:t,count:!0,exclude:[t]}}));c({type:Ot.CHANGE_SEARCHFILTERFACET,filter:e,facet:t})}),[c]),setFacet:n.a.useCallback((function(e){c({type:Ot.CHANGE_FACET,facet:e})}),[c]),setItemSearchDocument:l,setQueryParams:s,setParentCollection:n.a.useCallback((function(e){return c({type:Ot.CHANGE_PARENT_COLLECTION,value:e})}),[]),setSuggestion:n.a.useCallback((function(e){c({type:Ot.CHANGE_SUGGESTION,suggestion:e})}),[])}}var xt=function(e){var t=n.a.useRef({}),a=n.a.useRef(null),r=n.a.useState({}),i=Object(m.a)(r,2),c=i[0],o=i[1],l=n.a.useState(!1),s=Object(m.a)(l,2),u=s[0],d=s[1];return{request:n.a.useCallback((function(r){var n=r.tag,i=void 0===n?[]:n,l=Object(x.a)(r,["tag"]);if(i.length){a.current?(a.current({canceled:!0}),a.current=null):d(!0);var s=new Promise((function(a,r){var n=i.map((function(a){var r=a.name;return new Promise((function(a,n){c[r]?a(Object(g.a)({tag:r},c[r])):e(Object(g.a)(Object(g.a)({},l),{},{queryParams:{tag:r},costEstimate:!0})).then((function(e){var n=e.data,i=(n=void 0===n?{}:n).id;!function e(){_.x.getCostEstimate({costEstimateId:i}).then((function(n){var i=n.data,c=i.state,o=i.service;o=void 0===o?[{}]:o;var l=Object(m.a)(o,1)[0];"FINISHED"===c?a(Object(g.a)(Object(g.a)({},l),{},{tag:r})):t.current[r]=setTimeout((function(){return e()}),1e3)}))}()})).catch(n)}))}));Promise.all(n).then(a).catch(r)})),u=new Promise((function(e,t){a.current=t}));Promise.race([s,u]).then((function(e){var t=e.reduce((function(e,t){var a=t.tag,r=Object(x.a)(t,["tag"]);return Object(g.a)(Object(g.a)({},e),{},Object(L.a)({},a,Object(g.a)({},r)))}),{});d(!1),o(t),a.current=null})).catch((function(e){e.canceled||(d(!1),a.current=null)}))}}),[e,c]),isLoading:u,data:c}},yt=function(e){var t=e.selected,a=e.cost,r=e.title,i=e.isLoading,c=n.a.useState(r.split(".")),o=Object(m.a)(c,1),l=Object(m.a)(o[0],1)[0];return Object(T.jsxs)(ee.a,{width:1,children:[t.map((function(e){var t=e.name,n=e.createPreview,c=e.createThumbnails;return Object(T.jsxs)(ee.a,{p:2,borderRadius:4,bgcolor:"background.paper",display:"flex",flexDirection:"column",children:[Object(T.jsxs)(ee.a,{mb:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(T.jsx)(de.a,{color:"textPrimary",variant:"body1",children:t}),i?Object(T.jsx)(re.a,{size:16}):Object(T.jsxs)(de.a,{color:"textSecondary",variant:"body1",children:["$",a[t]&&a[t].cost.value]})]}),Object(T.jsx)(Ke,{fullWidth:!0,name:"".concat(t,".name"),placeholder:r,initialValue:l}),Object(T.jsx)(Ue.a,{name:"".concat(t,".createPreview"),initialValue:!!n,render:function(){return null}}),Object(T.jsx)(Ue.a,{name:"".concat(t,".createThumbnails"),initialValue:!!c,render:function(){return null}})]},t)})),Object(T.jsxs)(ee.a,{mt:2,px:2,display:"flex",justifyContent:"space-between",children:[Object(T.jsx)(de.a,{color:"textPrimary",variant:"h5",children:"Total:"}),Object(T.jsx)(de.a,{color:"textSecondary",variant:"h5",children:i?Object(T.jsx)(re.a,{}):"$".concat(Object.values(a).reduce((function(e,t){var a=t.cost;return e+(void 0===a?{}:a).value}),0))})]})]})},Ct=function(e){var t=e.onClose,a=e.profiles,r=e.item,i=e.classes,c=e.handleSubmit,o=r.metadata,l=void 0===o?{}:o,s=Object(De.p)(l,{flat:!0,arrayOnSingle:!1}),u=s.itemId,d=s.title,b=n.a.useState(1),j=Object(m.a)(b,2),p=j[0],h=j[1],f=n.a.useState(""),O=Object(m.a)(f,2),v=O[0],g=O[1],x=n.a.useMemo((function(){return a.filter((function(e){return e.toLowerCase().includes(v)&&"original"!==e}))}),[v,a]),y=n.a.useState([]),C=Object(m.a)(y,2),P=C[0],k=C[1],R=function(e){var t=e.name,a=P.filter((function(e){return e.name!==t}));return a.length===P.length?k([].concat(Object(Z.a)(a),[e])):k(a)},N=xt(_.i.createTranscode),D=N.data,I=void 0===D?{}:D,w=N.request,H=N.isLoading;return n.a.useEffect((function(){return w({itemId:u,tag:P})}),[P,u]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(A.a,{classes:i,children:[Object(T.jsx)(jt,{itemType:r,interactive:!1}),Object(T.jsxs)(ee.a,{overflow:"hidden",flexGrow:1,display:"flex",flexDirection:"column",children:[Object(T.jsxs)(pt.a,{in:1===p,timeout:500,children:[Object(T.jsx)(at,{fixed:!0,onChange:g,placeholder:"Search profiles..."}),Object(T.jsx)(ee.a,{mt:2,children:Object(T.jsx)(ne.a,{disablePadding:!0,children:x.map((function(e){return Object(T.jsx)(ft,{tagName:e,selected:P.some((function(t){return t.name===e})),onChange:R},e)}))})})]}),Object(T.jsx)(pt.a,{in:2===p,timeout:500,children:Object(T.jsx)("form",{onSubmit:c,children:Object(T.jsx)(yt,{selected:P,cost:I,title:d,isLoading:H})})})]})]}),Object(T.jsxs)(S.a,{children:[1===p&&Object(T.jsx)(E.a,{onClick:t,children:"Cancel"}),Object(T.jsx)(E.a,{disabled:!P.length,variant:1===p?"contained":"text",color:1===p?"primary":"default",onClick:function(){return h((function(e){h(0),setTimeout((function(){return h(1===e?2:1)}),500)}))},children:1===p?"Next":"Back"}),2===p&&Object(T.jsx)(E.a,{disabled:H,variant:"contained",color:"primary",onClick:c,children:"Start transcode"})]})]})},At=Object(f.a)((function(e){var t=e.palette;return{root:{position:"relative",padding:(0,e.spacing)(2),backgroundColor:t.background.default,display:"flex",flexDirection:"column",overflow:"hidden","& ul":{overflow:"auto"},"& .MuiCollapse-container":{overflow:"auto",position:"relative"}}}}))((function(e){var t=e.open,a=e.onSuccess,r=e.onClose,n=e.item,i=void 0===n?{}:n,c=e.classes,o=i.shape;o=void 0===o?[{}]:o;var l=Object(m.a)(o,1)[0],s=void 0===l?{}:l,u=i.id,d=G().profiles,b=void 0===d?[]:d;return Object(T.jsxs)(y.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:r,children:[Object(T.jsx)(C.a,{children:"Transcode file"}),Object(T.jsx)(Ue.b,{item:i,render:Ct,onClose:r,classes:c,profiles:b,onSubmit:function(e){var t={container:1},n=Object.entries(e).map((function(e){var a=Object(m.a)(e,2),r=a[0],n=a[1],i=n.createThumbnails,c=void 0!==i&&i,o=n.name,l=Object(De.a)({title:o});return _.y.createImportPlaceholder({metadataDocument:l,queryParams:t}).then((function(e){var t=e.data,a=(t=void 0===t?{}:t).id;return _.q.removeShapeAll({itemId:a}).then((function(){return _.q.createShape({itemId:a,shapeDocument:s}).then((function(){return _.i.createTranscode({itemId:u,queryParams:{tag:r,destinationItem:a,createThumbnails:c}}).catch((function(){return _.i.removeItem({itemId:a})}))})).catch((function(){return _.i.removeItem({itemId:a})}))}))}))}));Promise.all(n).then(a).catch((function(){return r({message:"Failed to start transcode"})}))}})]})})),St=function(e){var t=e.page,a=e.isLoading,r=e.onChangePage,i=e.itemListType,c=void 0===i?{}:i,o=e.itemSearchDocument,l=e.setItemSearchDocument,s=Object(u.b)().enqueueSnackbar,d=D().showDialog,b=c.item,j=void 0===b?[]:b,p=c.hits,h=n.a.useState("source"),f=Object(m.a)(h,2),O=f[0],v=f[1];n.a.useEffect((function(){var e=o.field.filter((function(e){return"__shape_size"!==e.name}));l(Object(g.a)(Object(g.a)({},o),{},{field:[].concat(Object(Z.a)(e),[{name:"__shape_size",value:[{value:"output"===O?2:1}]}])}))}),[O]);var y=n.a.useMemo((function(){return j.map((function(e){if("output"===O)return e;var t=e.shape,a=void 0===t?[]:t,r=Object(x.a)(e,["shape"]),n=a.sort((function(e,t){var a=e.tag,r=void 0===a?[]:a,n=t.b,i=void 0===n?[]:n;return r.includes("original")?1:i.includes("original")?-1:0}));return Object(g.a)(Object(g.a)({},r),{},{shape:n})}))}),[j]),C=function(e){return d({Dialog:At,item:e}).then((function(){return s("Transcoding started",{variant:"success"})})).catch((function(e){var t=e.message;return t&&s(t,{variant:"error"})}))},A=function(e,t){return d({okText:"Download file",noText:"cancel",title:"Download"}).then((function(){return Object(Ne.saveAs)(e,t)})).catch((function(e){var t=e.message;return t&&s(t,{variant:"error"})}))};return Object(T.jsxs)(ee.a,{display:"grid",gridTemplateRows:"auto 1fr auto",gridGap:16,children:[Object(T.jsxs)(te.a,{value:O,onChange:function(e,t){return v(t)},children:[Object(T.jsx)(ae.a,{disableRipple:!0,value:"source",label:"Source"}),Object(T.jsx)(ae.a,{disableRipple:!0,value:"output",label:"Output"}),a&&Object(T.jsx)(ae.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(T.jsx)(re.a,{size:20})})]}),Object(T.jsx)(ee.a,{overflow:"auto",children:Object(T.jsx)(ne.a,{disablePadding:!0,children:y.map((function(e){return Object(T.jsx)(jt,{itemType:e,allowTranscode:"output"!==O,onDownload:A,onTranscode:C},e.id)}))})}),Object(T.jsxs)(ee.a,{display:"flex",justifyContent:"flex-end",children:[Object(T.jsx)(E.a,{disabled:t<1,onClick:function(){return r({page:t-1})},children:"Prev"}),Object(T.jsx)(E.a,{disabled:5*(t+1)>p,onClick:function(){return r({page:t+1})},children:"Next"})]})]})},Et={itemSearchDocument:{field:[{name:"__shape_size",value:[{value:1}]}]},queryParams:{content:"shape,metadata",field:["originalFilename:title","itemId","title"],"noauth-url":!0,methodType:"AUTO"},rowsPerPage:5};var Tt=function(){var e=function(){var e=n.a.useContext(M);if(void 0===e)throw new Error("useSplitters must be used within a SplitterContext");return e}(),t=e.splitters,a=e.setSplitter,r=gt(Et),i=r.state,c=r.onChangePage,o=r.setSearchText,l=r.setItemSearchDocument,s=i.page,u=i.queryParams,d=i.itemSearchDocument;return Object(T.jsxs)(ee.a,{px:2,pt:2,height:1,display:"flex",flexDirection:"column",children:[Object(T.jsx)(at,{onSubmit:function(e){return o("*".concat(e,"*"))}}),Object(T.jsx)(ee.a,{mt:2,flexGrow:1,overflow:"hidden",children:Object(T.jsxs)(tt,{style:{flexDirection:"row"},direction:"horizontal",minSize:375,sizes:t.vertical,gutterSize:20,onDragEnd:function(e){return a("horizontal",e)},children:[Object(T.jsx)(O.g,{queryParams:u,itemSearchDocument:d,children:Object(T.jsx)(St,{page:s,onChangePage:c,setItemSearchDocument:l})}),Object(T.jsx)(Re,{})]})})]})},Pt=[{name:"general",label:"",fields:[{name:"name",label:"Name",type:"string",placeholder:"Name",fullWidth:!0,required:!0,autoFocus:!0},{name:"description",label:"Description",type:"string",placeholder:"Description",fullWidth:!0},{name:"format",label:"Format",type:"select",fullWidth:!0,required:!0,options:[{value:"mp4",label:"MP4"},{value:"mov",label:"MOV"}]},{name:"createPreview",label:"Create preview",type:"checkbox",defaultValue:!1,fullWidth:!0},{name:"createThumbnails",label:"Create thumbnails",type:"checkbox",defaultValue:!1,fullWidth:!0}]},{name:"video",label:"Video",fields:[{name:"video.codec",label:"Codec",type:"select",dependency:{key:"format"},options:[{value:"h264",label:"H264",dependency:["mp4"]},{value:"prores",label:"ProRes",dependency:["mov"]}]},{name:"video.preset",label:"Preset",type:"select",dependency:{key:"video.codec"},options:[{value:"baseline",label:"Baseline",default:!0,dependency:["h264"]},{value:"ipod",label:"Ipod",dependency:["h264"]},{value:"main",label:"Main",dependency:["h264"]},{value:"high",label:"High",dependency:["h264"]},{value:"proreshq",label:"ProRes HQ",dependency:["prores"]},{value:"prores422",label:"ProRes 422",dependency:["prores"]},{value:"proreslt",label:"ProRes LT",dependency:["prores"]},{value:"proresproxy",label:"ProRes Proxy",dependency:["prores"]},{value:"prores4444",label:"ProRes 4444",dependency:["prores"]},{value:"prores4444xq",label:"ProRes 4444 XQ",dependency:["prores"]}]},{name:"video.framerate",label:"Framerate",type:"select",match:!1,dependency:{key:"video.preset"},options:[{value:24,label:"24 FPS"},{value:25,label:"25 FPS"},{value:30,label:"30 FPS"},{value:50,label:"50 FPS"},{value:60,label:"60 FPS"}]},{name:"video.bitrate",label:"Bitrate",type:"select",match:!1,dependency:{key:"video.preset"},options:[{value:1e6,label:"1 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:2e6,label:"2 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:3e6,label:"3 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:4e6,label:"4 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:5e6,label:"5 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:6e6,label:"6 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:7e6,label:"7 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:8e6,label:"8 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:9e6,label:"9 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:1e7,label:"10 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:11e6,label:"11 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:12e6,label:"12 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:15e6,label:"15 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:2e7,label:"20 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:25e6,label:"25 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:3e7,label:"30 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:5e7,label:"50 Mbit/s",dependency:["baseline","ipod","main","high"]}]},{name:"video.resolution",label:"Resolution",type:"select",match:!1,fullWidth:!0,dependency:{key:"video.preset"},options:[{value:"4096x2160",label:"4096 x 2160",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"2048x1080",label:"2048 x 1080",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"1920x1080",label:"1920 x 1080",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"1280x720",label:"1280 x 720",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"960x540",label:"960 x 540",dependency:["baseline","ipod","main","high"]},{value:"640x360",label:"640 x 360",dependency:["baseline","ipod","main","high"]},{value:0,label:"Custom resolution"}]},{name:"video.width",label:"Width",type:"number",dependency:{key:"video.resolution",value:0}},{name:"video.height",label:"Height",type:"number",dependency:{key:"video.resolution",value:0}}]},{name:"audio",label:"Audio",fields:[{name:"audio.codec",label:"Codec",type:"select",dependency:{key:"format"},options:[{value:"nablet_aac",label:"AAC Nablet"},{value:"mp3",label:"MP3"}]},{name:"audio.preset",label:"Preset",type:"select",dependency:{key:"audio.codec"},options:[{value:"AAC_LC",label:"Low complexity",dependency:["nablet_aac"]}]},{name:"audio.sampleRate",label:"Sample rate",type:"select",match:!1,options:[{value:48,label:"48 Khz"},{value:96,label:"96 Khz"}]},{name:"audio.sampleSize",label:"Sample size",type:"select",match:!1,options:[{value:16,label:"16"},{value:24,label:"24"}]}]}],kt=a(355),Rt=a(17),Nt=a(264),Dt=a(257),It=a(258),_t=function(e){var t=e.fields;return Object(T.jsx)(Rt.a,{spacing:2,container:!0,children:t.map((function(e){var t=e.name,a=e.fullWidth,r=Object(x.a)(e,["name","fullWidth"]);return Object(T.jsx)(Rt.a,{item:!0,xs:a?12:6,children:Object(T.jsx)(Qe,Object(g.a)({name:t},r))},t)}))})},wt=Object(f.a)((function(e){var t=e.spacing;return{root:{borderRadius:t(.5),boxShadow:"none",marginTop:t(2),marginBottom:t(0),"&:before":{content:"unset"}}}}))((function(e){var t=e.label,a=e.fields,r=e.errors,i=e.submitFailed,c=e.classes,o=n.a.useState(!1),l=Object(m.a)(o,2),s=l[0],u=l[1],d=n.a.useMemo((function(){return i&&a.some((function(e){var t=e.name;return Object.keys(r).includes(t)}))}),[r,a,i]);return t?Object(T.jsxs)(Nt.a,{classes:c,expanded:s,onChange:function(){return u(!s)},children:[Object(T.jsx)(Dt.a,{expandIcon:Object(T.jsx)(kt.a,{}),children:Object(T.jsx)(de.a,{color:d?"error":"initial",children:t})}),Object(T.jsx)(It.a,{children:Object(T.jsx)(_t,{fields:a})})]}):Object(T.jsx)(_t,{fields:a})})),Ht=function(e){e.form;var t=e.handleSubmit,a=e.onClose,r=e.classes;return Object(T.jsxs)("form",{onSubmit:t,children:[Object(T.jsx)(C.a,{classes:{root:r.title},children:"Profile manager"}),Object(T.jsx)(A.a,{classes:{root:r.content},children:Pt.map((function(e){var t=e.name,a=Object(x.a)(e,["name"]);return Object(T.jsx)(wt,Object(g.a)({},a),t)}))}),Object(T.jsxs)(S.a,{classes:{root:r.actions},children:[Object(T.jsx)(E.a,{onClick:a,children:"Cancel"}),Object(T.jsx)(E.a,{type:"submit",variant:"contained",color:"primary",children:"Add new profile"})]})]})},Ft=Object(f.a)((function(e){var t=e.spacing,a=e.palette;return{root:{},title:{},content:{maxHeight:"75vh",padding:t(2),backgroundColor:a.background.default},actions:{}}}))((function(e){var t=e.onSuccess,a=e.onClose,r=e.open,i=e.classes,c=n.a.useState(Pt);return Object(T.jsx)(y.a,{classes:{root:i.root},open:r,onClose:a,children:Object(T.jsx)(Ue.b,{onSubmit:function(e){return t(function(e){var t=e.video,a=e.audio,r=e.format,n=e.name,i=e.description,c=e.createThumbnails,o=e.createPreview,l={name:n,description:i,format:r,metadata:{}};if(t){var s=t.resolution,u=t.framerate,d=t.preset,b=t.width,j=t.height;if(u&&(u={denominator:u,numerator:1}),s){var p=s.split("x"),h=Object(m.a)(p,2);b=h[0],j=h[1],s={width:Number(b),height:Number(j)}}else b&&j&&(s={width:b,height:j});d&&(d=[d]),l.video=Object(g.a)(Object(g.a)({},t),{},{framerate:u,resolution:s,preset:d})}if(a){var f=a.preset,O=a.bitrate,v=a.sampleSize,y=a.sampleRate,C=Object(x.a)(a,["sampleSize","sampleRate"]);v&&y&&(O=v*y*1e3),f&&(f=[f]),l.audio=Object(g.a)(Object(g.a)({},C),{},{bitrate:O,preset:f})}return c&&(l.metadata.field=(l.metadata.field||[]).concat([{key:"createThumbnails",value:c||!1}])),o&&(l.metadata.field=(l.metadata.field||[]).concat([{key:"createPreview",value:o||!1}])),l}(e))},sections:c,onClose:a,component:Ht,classes:i})})})),Gt=function(){var e=D().showDialog,t=Object(u.b)().enqueueSnackbar,a=Object(r.useState)(0),n=Object(m.a)(a,2),i=n[0],c=n[1],o=G(),l=o.profiles,s=void 0===l?[]:l,d=o.onSearch;return Object(T.jsxs)(ee.a,{px:2,pt:2,height:1,display:"flex",flexDirection:"column",children:[Object(T.jsxs)(ee.a,{display:"grid",gridTemplateColumns:"1fr auto",gridGap:8,children:[Object(T.jsx)(at,{onChange:d}),Object(T.jsx)(E.a,{variant:"contained",color:"primary",style:{flexShrink:0},onClick:function(){return e({Dialog:Ft}).then((function(e){var t=e.name;return _.r.updateShapeTag({tagName:t,transcodePresetDocument:e})})).then((function(){return t("Success!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))},children:"Add new profile"})]}),Object(T.jsx)(ee.a,{my:2,flexGrow:1,overflow:"auto",children:Object(T.jsx)(ne.a,{disablePadding:!0,children:s.slice(i,i+20).map((function(e){return Object(T.jsx)(ft,{tagName:e},e)}))})}),Object(T.jsxs)(ee.a,{display:"flex",justifyContent:"flex-end",children:[Object(T.jsx)(E.a,{type:"button",onClick:function(){c(Math.max(0,i-20))},disabled:0===i,children:"Prev"}),Object(T.jsx)(E.a,{type:"button",onClick:function(){c(i+20)},disabled:i+20>s.length,children:"Next"})]})]})},Lt=a(106),Mt=a(218),qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="Not a URL",a=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi,r=new RegExp(a),n=e.match(r);return n?null:t};var zt=Object(f.a)((function(e){return{root:{height:"100vh",width:"100vw"},gridLeft:{padding:e.spacing(4)},gridRight:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.background.login},logo:{backgroundColor:e.palette.common.white,maxWidth:"25vw"}}}))((function(e){var t=e.classes,a=e.onLogin,r=e.userName,n=e.serverUrl,i=e.error;return Object(T.jsxs)(Rt.a,{className:t.root,container:!0,direction:"row",alignItems:"center",children:[Object(T.jsxs)(Rt.a,{item:!0,xs:12,sm:12,md:6,lg:3,className:t.gridLeft,children:[Object(T.jsx)(Mt.a,{style:{visibility:i?"visible":"hidden"},severity:"error",className:t.alert,children:i}),Object(T.jsx)(ze.b,{onSubmit:a,FormProps:{initialValues:{userName:r,serverUrl:n}},FormFieldsProps:{UrlFieldProps:{validate:qt}}})]}),Object(T.jsx)(Lt.a,{smDown:!0,children:Object(T.jsx)(Rt.a,{item:!0,sm:!0,className:t.gridRight,children:Object(T.jsx)("img",{src:K,alt:Q,className:t.logo})})})]})}));var Ut=Object(f.a)((function(){return{logo:{text:"100%",textAlign:"center"}}}))((function(e){var t=e.classes;return Object(T.jsx)(de.a,{className:t.text,children:"Page does not exist"})})),Bt=a(473),Wt=Object(f.a)((function(e){var t=e.typography,a=e.palette,r=e.spacing,n=e.mixins;return{root:Object(g.a)(Object(g.a)(Object(g.a)({},t.subtitle1),n.toolbar),{},{textTransform:"none",opacity:.8,"&::after":{color:a.primary.main,transition:"width 0.25s ease-in-out 0.05s",borderBottom:"0.25em solid",width:0,position:"absolute",bottom:0,left:0,content:'""'},"&:hover, &.active":{opacity:1,backgroundColor:"unset","&::after":{width:"100%"}},"&:not(:last-child)":{marginRight:r(2)}})}}))(E.a);var Vt=Object(f.a)((function(e){var t=e.spacing;return{root:{backgroundColor:e.palette.background.paper},logo:{height:t(3),width:t(3)}}}))((function(e){var t=e.classes,a=Object(O.l)(),r=a.userName,n=a.onLogout;return Object(T.jsx)(Bt.a,{className:t.root,elevation:0,color:"default",children:Object(T.jsxs)(ee.a,{display:"flex",px:2,height:1,alignItems:"center",justifyContent:"space-between",children:[Object(T.jsx)(je.a,{className:t.logo,variant:"square",src:Y,alt:Q}),Object(T.jsxs)(ee.a,{children:[Object(T.jsx)(Wt,{variant:"text",component:o.b,to:"/search",color:"inherit",disableRipple:!0,children:"Home"}),Object(T.jsx)(Wt,{variant:"text",component:o.b,to:"/profile",color:"inherit",disableRipple:!0,children:"Profiles"}),Object(T.jsx)(Wt,{variant:"text",component:o.b,to:"/settings",color:"inherit",disableRipple:!0,children:"Settings"}),Object(T.jsx)(Wt,{variant:"text",component:o.b,to:"/about",color:"inherit",disableRipple:!0,children:"About"})]}),Object(T.jsx)(ze.f,{userName:r,onLogout:n})]})})})),Jt=new(a(572).a),Kt=function(){var e=Object(h.g)().id.replace(/_/g,"/");return Object(T.jsx)("video",{src:e,controls:!0,children:Object(T.jsx)("track",{kind:"captions"})})};var Yt=Object(f.a)((function(e){return{container:{height:"100vh",overflow:"auto",paddingTop:e.mixins.toolbar.minHeight}}}))((function(e){var t=e.classes,a=n.a.useState(),r=Object(m.a)(a,2),i=r[0],c=r[1];return Object(T.jsx)(O.a,{cookieOptions:{maxAge:1209600,path:$},onError:function(e){var t=e.message;c(t),setTimeout((function(){return c()}),5e3)},LoginComponent:zt,LoginProps:{error:i},children:Object(T.jsx)(v.a,{client:Jt,children:Object(T.jsx)(F,{children:Object(T.jsx)(N,{children:Object(T.jsxs)(W,{children:[Object(T.jsx)(Vt,{}),Object(T.jsx)("div",{className:t.container,children:Object(T.jsxs)(h.d,{children:[Object(T.jsx)(h.b,{exact:!0,path:"/search/",children:Object(T.jsx)(Tt,{})}),Object(T.jsx)(h.b,{exact:!0,path:"/search/*",children:Object(T.jsx)(Tt,{})}),Object(T.jsx)(h.b,{exact:!0,path:"/profile/",children:Object(T.jsx)(Gt,{})}),Object(T.jsx)(h.b,{path:"/:id",children:Object(T.jsx)(Kt,{})}),Object(T.jsx)(h.a,{exact:!0,from:"/",push:!0,to:"/search/"}),Object(T.jsx)(h.b,{path:"*",children:Object(T.jsx)(Ut,{})})]})})]})})})})})}));c.a.render(Object(T.jsx)(st,{children:Object(T.jsx)(l.a,{theme:p,children:Object(T.jsx)(s.a,{children:Object(T.jsx)(u.a,{children:Object(T.jsx)(z,{splitters:{vertical:[75,25]},children:Object(T.jsx)(o.a,{basename:$,children:Object(T.jsx)(Yt,{})})})})})})}),document.getElementById("root"))}},[[466,1,2]]]);