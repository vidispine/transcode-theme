(this["webpackJsonptest-vdt-app"]=this["webpackJsonptest-vdt-app"]||[]).push([[0],{464:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(31),c=a.n(i),o=a(103),s=a(467),l=a(468),u=a(86),d=a(169),b=(a(274),a(387),Object(d.a)({typography:{useNextVariants:!0,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},palette:{type:"light",primary:{main:"#7B61FF"},secondary:{main:"#CCC"},text:{primary:"rgba(0,0,0,0.75)"},background:{login:"linear-gradient(-45deg,#b0c800,#0068a9 0,#0068a9 33%,#002749 100%,#b0c800 0)",default:"#f2f2f2",paper:"#fff"}},overrides:{VdtUserAvatarButton:{avatar:{fontSize:"0.875rem",height:32,width:32}},MuiTabs:{root:{backgroundColor:"#fff",borderBottom:"2px solid #7B61FF"},indicator:{backgroundColor:"#7B61FF",height:"100%",zIndex:1},flexContainer:{alignItems:"center"}},MuiTab:{root:{zIndex:2,color:"inherit",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&$selected":{color:"#fff"}}},MuiPaper:{root:{position:"relative",overflow:"hidden",flexShrink:0}},MuiAvatar:{colorDefault:{color:"inherit",backgroundColor:"#f2f2f2"}}},mixins:{toolbar:{minHeight:56}},props:{VdtUserAvatarButton:{locale:{options:void 0},userName:""},MuiPaper:{variant:"outlined"}}})),j=a(26),p=a(49),h=a(3),m=a(14),f=a(296),O=a(8),v=a(38),g=a(70),x=a(51),y=a(48),C=a(59),S=a(12),A=a(4),E=function(e){var t=e.open,a=e.onClose,n=e.onSuccess,r=e.title,i=void 0===r?"Dialog":r,c=e.okText,o=void 0===c?"Ok":c,s=e.noText,l=void 0===s?"Cancel":s,u=e.message,d=void 0===u?"Message":u,b=e.Dialog,j=void 0===b?g.a:b;return Object(A.jsxs)(j,{open:t,onClose:a,children:[Object(A.jsx)(x.a,{children:i}),Object(A.jsx)(y.a,{dividers:!0,children:d}),Object(A.jsxs)(C.a,{children:[Object(A.jsx)(S.a,{onClick:a,children:l}),Object(A.jsx)(S.a,{variant:"contained",color:"primary",onClick:n,children:o})]})]})},T=function(e){var t=e.Dialog,a=void 0===t?E:t,n=Object(v.a)(e,["Dialog"]);return Object(A.jsx)(a,Object(O.a)({},n))},P=r.a.createContext({}),k=function(e){var t=e.children,a=r.a.useState(!1),n=Object(j.a)(a,2),i=n[0],c=n[1],o=r.a.useState({}),s=Object(j.a)(o,2),l=s[0],u=l.config,d=l.resolve,b=l.reject,p=s[1],h=function(){c(!1)};return Object(A.jsxs)(P.Provider,{value:{openDialog:function(e){c(!0),p(e)}},children:[Object(A.jsx)(T,Object(O.a)(Object(O.a)({},u),{},{open:i,onSuccess:function(e){d(e),h()},onClose:function(e){b(e),h()}})),t]})},R=function(){var e=r.a.useContext(P).openDialog;return{showDialog:function(t){return new Promise((function(a,n){return e({config:t,resolve:a,reject:n})}))}}},N=a(575),w=a(9),D=a(7),I=r.a.createContext();var _=function(e){var t=e.children,a=Object(N.a)(["profile"],(function(){return D.r.listShapeTag().then((function(e){var t=e.data,a=(void 0===t?{}:t).uri;return(void 0===a?[]:a).filter((function(e){return"original"!==e}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),n=a.data,i=void 0===n?[]:n,c=a.isLoading,o=a.isError,s=r.a.useState(""),l=Object(j.a)(s,2),u=l[0],d=l[1],b=r.a.useState(!1),p=Object(j.a)(b,2),h=p[0],m=p[1],f=r.a.useMemo((function(){var e=i;return h||(e=e.filter((function(e){return!e.startsWith("__")}))),u&&(e=e.filter((function(e){return e.toLowerCase().includes(u.toLowerCase())}))),e}),[u,h,i]);return Object(A.jsx)(I.Provider,{value:{profiles:f,onSearch:function(e){return d(e)},showDefault:h,setShowDefault:m,isLoading:c,isError:o},children:t})};function H(){var e=r.a.useContext(I);if(void 0===e)throw new Error("useProfile must be used within a ProfileProvider");return e}var L=a(140),F=r.a.createContext({splitters:{}}),G="LAYOUT_SPLITTERS",q=function(e){var t=e.splitters,a=e.children,n=r.a.useState((function(){return function(){try{return JSON.parse(localStorage.getItem(G))||t}catch(e){return t}}()})),i=Object(j.a)(n,2),c=i[0],o=i[1];r.a.useEffect((function(){localStorage.setItem(G,JSON.stringify(c))}),[c]);return Object(A.jsx)(F.Provider,{value:{splitters:c,resetSplitters:function(){o(t)},setSplitter:function(e,t){o((function(a){return Object(O.a)(Object(O.a)({},a),{},Object(L.a)({},e,t))}))}},children:a})};var M=r.a.createContext();function z(){return Object(N.a)(["resources"],(function(){return D.o.listResourceType({resourceType:"vidinet"}).then((function(e){var t=e.data;return(void 0===t?{}:t).resource.map((function(e){var t=e.id,a=e.vidinet;return Object(O.a)({id:t},a)}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}var B=function(e){var t=e.children,a=Object(N.a)(["storages"],(function(){return D.s.listStorage({}).then((function(e){var t=e.data;return function(e){var t=null,a=null;return e.storage.forEach((function(e){e.metadata.field&&e.metadata.field.forEach((function(n){"transcodeThemeSourceStorage"===n.key&&(t=e.id),"transcodeThemeOutputStorage"===n.key&&(a=e.id)}))})),{sourceStorage:t,outputStorage:a}}(void 0===t?{}:t)}))}),{refetchOnWindowFocus:!1,staleTime:1/0}),n=a.data,r=a.isLoading,i=a.isError,c=z(),o=c.data,s=c.isLoading,l=c.isError,u=r||s,d=i||l;return Object(A.jsx)(M.Provider,{value:Object(O.a)(Object(O.a)({},n),{},{resources:o,isLoading:u,isError:d}),children:t})},W=a.p+"static/media/logo.db253c2c.svg",U=a.p+"static/media/header-logo.f0892ea4.svg",V=W,J=U,Q="VidiCore Transcode Theme";""===Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL||Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL;document.title="VidiCore Transcode Theme";var K="https://vidispine.github.io/transcode-theme";K&&K.startsWith("http")&&(K=(K=new URL(K)).pathname.replace(/(.+?)\/+$/,"$1"));var Y=K,X=a(25),$=a(60),Z=a(125),ee=a(218),te=a(147),ae=a(135),ne=a(57),re=a.n(ne),ie=a(195),ce=a.n(ie),oe=a(562),se=a(563),le=a(22),ue=a(36),de=a(108),be=a(28),je=a(46),pe=a(253),he="READY",me="STARTED",fe="VIDINET_JOB",Oe="FINISHED",ve="FINISHED_WARNING",ge="WAITING",xe="ABORTED_PENDING",ye="ABORTED",Ce="FAILED_TOTAL",Se=[he,me,fe,ge,xe],Ae=[Oe,ve,Ce,ye],Ee=function(e){var t=e.fields,a=e.data;return t.map((function(e){var t=e.key,n=e.label;return Object(A.jsxs)(X.a,{display:"contents",children:[Object(A.jsxs)(le.a,{variant:"body2",color:"textSecondary",children:[n,":"]}),Object(A.jsx)(le.a,{variant:"body2",color:"textPrimary",children:re()(a,t,"-")})]},t)}))},Te=[{key:"type",label:"Job type"},{key:"jobId",label:"Job ID"}],Pe=Object(h.a)((function(e){var t=e.spacing;return{root:{borderRadius:t(.5),padding:t(1,0),display:"flex",flexDirection:"column",alignItems:"stretch","&:not(:last-child)":{marginBottom:t(2)}},top:{padding:t(1,2),display:"grid",alignItems:"start",gridTemplateColumns:"auto 1fr auto",gap:t(2),"& > .MuiBox-root":{display:"grid",gridTemplateColumns:"auto 1fr",gap:t(0,2)}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.jobType,a=void 0===t?{}:t,n=e.classes,i=e.onAbort,c=r.a.useState(a),o=Object(j.a)(c,1)[0],s=o.status,l=o.started,u=o.jobId,d=function(e){var t=e.jobId,a=e.type,n=e.status,i=r.a.useState(0),c=Object(j.a)(i,2),o=c[0],s=c[1];return{request:r.a.useCallback((function(){Ae.includes(n)?s(100):function e(){return D.j.getJob({jobId:t}).then((function(t){var n=t.data,r=(n=void 0===n?{}:n).status,i=n.log,c=100;"TRANSCODE"===a&&(c=200);var o=((void 0===i?{}:i).task.find((function(e){return e.step===c}))||{}).progress;s((void 0===o?{}:o).value||0),Se.includes(r)&&setTimeout((function(){return e()}),2500)}))}()}),[t,a,n]),value:o}}(a),b=d.request,p=d.value,h=void 0===p?100:p;return r.a.useEffect(b,[b]),Object(A.jsx)(Z.a,{className:n.paper,children:Object(A.jsxs)(ue.a,{className:n.root,children:[Object(A.jsxs)(X.a,{className:n.top,children:[Object(A.jsx)(de.a,{variant:"square",children:"J"}),Object(A.jsx)(X.a,{children:Object(A.jsx)(Ee,{data:a,fields:Te})}),Object(A.jsxs)(be.a,{size:"small",onClick:function(){return Se.includes(s)&&i(u)},children:[Se.includes(s)&&Object(A.jsx)(oe.a,{}),Ae.includes(s)&&Object(A.jsx)(se.a,{})]})]}),Object(A.jsx)(je.a,{}),Object(A.jsxs)(X.a,{children:[Object(A.jsxs)(X.a,{py:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(A.jsx)(le.a,{color:"textPrimary",variant:"button",children:s}),Object(A.jsx)(le.a,{color:"textSecondary",variant:"caption",children:ce()(l).fromNow()})]}),Object(A.jsx)(pe.a,{variant:"determinate",value:h})]})]})})})),ke={step:!0,type:"RAW_IMPORT,PLACEHOLDER_IMPORT,TRANSCODE",sort:"startTime desc",number:10},Re=function(e){var t=e.jobListType,a=e.page,n=e.isLoading,r=e.onAbort,i=void 0===r?function(){return null}:r,c=e.setPage,o=t.job,s=void 0===o?[]:o,l=t.hits,u=void 0===l?0:l;return Object(A.jsxs)(X.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(A.jsx)(X.a,{overflow:"auto",height:1,children:Object(A.jsxs)($.a,{disablePadding:!0,children:[s.map((function(e){return Object(A.jsx)(Pe,{jobType:e,onAbort:i},e.jobId)})),!n&&s.length<1&&Object(A.jsx)("span",{children:"No jobs found"})]})}),Object(A.jsxs)(X.a,{display:"flex",justifyContent:"flex-end",children:[Object(A.jsx)(S.a,{disabled:!a,onClick:function(){return c(a-1)},children:"Prev"}),Object(A.jsx)(S.a,{disabled:10*(a+1)>u,onClick:function(){return c(a+1)},children:"Next"})]})]})},Ne=function(){var e=R().showDialog,t=Object(u.c)().enqueueSnackbar,a=r.a.useState("active"),n=Object(j.a)(a,2),i=n[0],c=n[1],o=r.a.useState(0),s=Object(j.a)(o,2),l=s[0],d=s[1],b=Object(m.k)(D.j.listJob),p=b.request,h=b.data,f=void 0===h?{}:h,v=b.isLoading,g=r.a.useCallback((function(){var e=Object(O.a)(Object(O.a)({},ke),{},{state:Se,first:10*l+1});p({queryParams:e})}),[l]),x=Object(m.k)(D.j.listJob),y=x.request,C=x.data,S=void 0===C?{}:C,E=x.isLoading,T=r.a.useCallback((function(){var e=Object(O.a)(Object(O.a)({},ke),{},{state:Ae,first:10*l+1});y({queryParams:e})}),[l]);r.a.useEffect((function(){g(),T();var e=setInterval((function(){g(),T()}),15e3);return function(){return clearInterval(e)}}),[l,i]);var P=v||E;return Object(A.jsxs)(X.a,{display:"grid",gridTemplateRows:"auto 1fr",gridGap:16,children:[Object(A.jsx)(Z.a,{children:Object(A.jsxs)(ee.a,{value:i,onChange:function(e,t){d(0),c(t)},children:[Object(A.jsx)(te.a,{disableRipple:!0,value:"active",label:"Active (".concat(f.hits||0,")")}),Object(A.jsx)(te.a,{disableRipple:!0,value:"finished",label:"Finished (".concat(S.hits||0,")")}),P&&Object(A.jsx)(te.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(A.jsx)(ae.a,{size:20})})]})}),Object(A.jsx)(X.a,{overflow:"hidden",hidden:"active"!==i,children:Object(A.jsx)(Re,{jobListType:f,page:l,setPage:d,isLoading:P,onAbort:function(a){return e({message:"Are you sure you want to abort this job?",okText:"Yes, abort job",noText:"No, cancel"}).then((function(){return D.j.abortJob({jobId:a})})).then((function(){return t("Job aborted!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))}})}),Object(A.jsx)(X.a,{overflow:"hidden",hidden:"finished"!==i,children:Object(A.jsx)(Re,{jobListType:S,page:l,setPage:d,isLoading:P})})]})},we=a(158),De=a.n(we),Ie={CHANGE_PAGE:"CHANGE_PAGE",CHANGE_ROWS:"CHANGE_ROWS",CHANGE_SORT:"CHANGE_SORT",CHANGE_SEARCHTEXT:"CHANGE_SEARCHTEXT",CHANGE_SEARCHFIELD:"CHANGE_SEARCHFIELD",CHANGE_SEARCHFIELDFACET:"CHANGE_SEARCHFIELDFACET",CHANGE_SEARCHFILTER:"CHANGE_SEARCHFILTER",CHANGE_SEARCHFILTERFACET:"CHANGE_SEARCHFILTERFACET",CHANGE_PARENT_COLLECTION:"CHANGE_PARENT_COLLECTION",CHANGE_FACET:"CHANGE_FACET",CHANGE_ITEMSEARCHDOCUMENT:"CHANGE_ITEMSEARCHDOCUMENT",CHANGE_QUERYPARAMS:"CHANGE_QUERYPARAMS",CHANGE_MATRIXPARAMS:"CHANGE_MATRIXPARAMS",CHANGE_SUGGESTION:"CHANGE_SUGGESTION"},_e=function(e,t){switch(t.type){case Ie.CHANGE_ITEMSEARCHDOCUMENT:return Object(O.a)(Object(O.a)({},e),{},{itemSearchDocument:t.itemSearchDocument});case Ie.CHANGE_QUERYPARAMS:return Object(O.a)(Object(O.a)({},e),{},{queryParams:t.queryParams});case Ie.CHANGE_PAGE:return Object(O.a)(Object(O.a)({},e),{},{page:t.page,queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:t.page*e.rowsPerPage+1})});case Ie.CHANGE_ROWS:return Object(O.a)(Object(O.a)({},e),{},{rowsPerPage:t.rowsPerPage,page:0,queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1,number:t.rowsPerPage})});case Ie.CHANGE_SORT:return Object(O.a)(Object(O.a)({},e),{},{page:0,searchText:t.value,sort:t.value,itemSearchDocument:Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{sort:t.field?[{field:t.field,order:t.order||"descending"}]:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_SEARCHTEXT:return Object(O.a)(Object(O.a)({},e),{},{page:0,searchText:t.value,itemSearchDocument:t.value?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{text:[{value:"".concat(t.value)}]}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{text:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_SEARCHFIELD:return Object(O.a)(Object(O.a)({},e),{},{page:0,field:t.field,itemSearchDocument:t.field?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{field:t.field}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{field:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_SEARCHFIELDFACET:return Object(O.a)(Object(O.a)({},e),{},{page:0,field:t.field,facet:t.facet,itemSearchDocument:t.field?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{field:t.field,facet:t.facet}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{field:[],facet:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_SEARCHFILTER:return Object(O.a)(Object(O.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{filter:t.filter}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{filter:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_SEARCHFILTERFACET:return Object(O.a)(Object(O.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{filter:t.filter,facet:t.facet}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{filter:[],facet:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_FACET:return Object(O.a)(Object(O.a)({},e),{},{page:0,facet:t.facet,itemSearchDocument:t.facet?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{facet:t.facet}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{facet:[]}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_PARENT_COLLECTION:return Object(O.a)(Object(O.a)({},e),{},{page:0,parentCollection:t.value,itemSearchDocument:t.value?Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{operator:{field:[{name:"__parent_collection",value:[{value:"".concat(t.value)}]},{name:"__collection",value:[{value:"".concat(t.value)}]}],operation:"OR"}}):Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{operator:void 0}),queryParams:Object(O.a)(Object(O.a)({},e.queryParams),{},{first:1})});case Ie.CHANGE_SUGGESTION:return Object(O.a)(Object(O.a)({},e),{},{itemSearchDocument:Object(O.a)(Object(O.a)({},e.itemSearchDocument),{},{suggestion:t.suggestion})});default:return e}};function He(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,a=void 0===t?{}:t,n=e.itemSearchDocument,r=void 0===n?{}:n,i=e.rowsPerPage,c=void 0===i?10:i,o=e.page,s=void 0===o?0:o,l=Object(v.a)(e,["queryParams","itemSearchDocument","rowsPerPage","page"]);return Object(O.a)(Object(O.a)({},l),{},{queryParams:Object(O.a)({content:"metadata",interval:"generic",first:s*c+1,number:c},a),itemSearchDocument:Object(O.a)({intervals:"generic",filter:[]},r),rowsPerPage:c,page:s})}(e),a=r.a.useReducer(_e,t),n=Object(j.a)(a,2),i=n[0],c=n[1],o=r.a.useCallback((function(e){return c({type:Ie.CHANGE_SEARCHTEXT,value:e})}),[]),s=r.a.useCallback((function(e){return c({type:Ie.CHANGE_ITEMSEARCHDOCUMENT,itemSearchDocument:e})}),[]),l=r.a.useCallback((function(e){return c({type:Ie.CHANGE_ITEMQUERYPARAMS,queryParams:e})}),[]);return{state:i,onChangeRowsPerPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.value;return c({type:Ie.CHANGE_ROWS,rowsPerPage:t})},onChangePage:function(e){var t=e.page;return c({type:Ie.CHANGE_PAGE,page:t})},onChangeSort:function(e,t,a){return c({type:Ie.CHANGE_SORT,field:t,order:a})},setSearchText:o,setSearchField:r.a.useCallback((function(e){return c({type:Ie.CHANGE_SEARCHFIELD,field:e})}),[]),setSearchFieldFacet:r.a.useCallback((function(e){var t=e.map((function(e){return{field:e.name,count:!0}}));c({type:Ie.CHANGE_SEARCHFIELDFACET,field:e,facet:t})}),[]),setSearchFilter:r.a.useCallback((function(e){return c({type:Ie.CHANGE_SEARCHFILTER,filter:e})}),[]),setSearchFilterFacet:r.a.useCallback((function(e){var t=e.reduce((function(e,t){var a=t.field,n=void 0===a?[]:a;return e.concat(n)}),[]).map((function(e){var t=e.name;return{name:t,field:t,count:!0,exclude:[t]}}));c({type:Ie.CHANGE_SEARCHFILTERFACET,filter:e,facet:t})}),[c]),setFacet:r.a.useCallback((function(e){c({type:Ie.CHANGE_FACET,facet:e})}),[c]),setItemSearchDocument:s,setQueryParams:l,setParentCollection:r.a.useCallback((function(e){return c({type:Ie.CHANGE_PARENT_COLLECTION,value:e})}),[]),setSuggestion:r.a.useCallback((function(e){c({type:Ie.CHANGE_SUGGESTION,suggestion:e})}),[])}}var Le=function(e){var t=r.a.useRef({}),a=r.a.useRef(null),n=r.a.useState({}),i=Object(j.a)(n,2),c=i[0],o=i[1],s=r.a.useState(!1),l=Object(j.a)(s,2),u=l[0],d=l[1];return{request:r.a.useCallback((function(n){var r=n.tag,i=void 0===r?[]:r,s=Object(v.a)(n,["tag"]);if(i.length){a.current?(a.current({canceled:!0}),a.current=null):d(!0);var l=new Promise((function(a,n){var r=i.map((function(a){var n=a.name;return new Promise((function(a,r){c[n]?a(Object(O.a)({tag:n},c[n])):e(Object(O.a)(Object(O.a)({},s),{},{queryParams:{tag:n},costEstimate:!0})).then((function(e){var r=e.data,i=(r=void 0===r?{}:r).id;!function e(){D.x.getCostEstimate({costEstimateId:i}).then((function(r){var i=r.data,c=i.state,o=i.service;o=void 0===o?[{}]:o;var s=Object(j.a)(o,1)[0];"FINISHED"===c?a(Object(O.a)(Object(O.a)({},s),{},{tag:n})):t.current[n]=setTimeout((function(){return e()}),1e3)}))}()})).catch(r)}))}));Promise.all(r).then(a).catch(n)})),u=new Promise((function(e,t){a.current=t}));Promise.race([l,u]).then((function(e){var t=e.reduce((function(e,t){var a=t.tag,n=Object(v.a)(t,["tag"]);return Object(O.a)(Object(O.a)({},e),{},Object(L.a)({},a,Object(O.a)({},n)))}),{});d(!1),o(t),a.current=null})).catch((function(e){e.canceled||(d(!1),a.current=null)}))}}),[e,c]),isLoading:u,data:c}},Fe=a(204),Ge=a(564),qe=a(565),Me=a(58),ze=a(33),Be=function(e){var t=e.onChange,a=e.match;return Object(A.jsx)(Me.a,{input:{onChange:t,checked:a},color:"primary",size:"small",label:"Match source"})},We=function(e){var t=e.spacing,a=e.typography,n=e.palette;return{text:{marginTop:0,"& > div":{display:"flex",flexDirection:"column","& > label":{fontSize:a.fontSize,position:"relative",transform:"none",marginLeft:t(2),marginBottom:t(1)},"& > fieldset":{top:0,"& legend":{display:"none"}},"& input":{backgroundColor:n.background.paper,padding:t(2)}}},checkbox:{marginTop:0,paddingLeft:t(2),"& > p":{display:"none"}},select:{marginTop:0,display:"flex",flexDirection:"column","& > label":{fontSize:a.fontSize,position:"relative",transform:"none",marginLeft:t(2),marginBottom:t(1)},"& .MuiSelect-root":{backgroundColor:n.background.paper,padding:t(2,4,2,2)},"& .VdtCheckboxField-root":{marginTop:0,marginLeft:t(2),"& > p":{display:"none"},"& span":{fontSize:a.fontSize}}}}},Ue=Object(h.a)(We)((function(e){var t=e.name,a=e.label,n=e.match,i=e.options,c=e.required,o=e.dependency,s=e.classes,l=Object(v.a)(e,["name","label","match","options","required","dependency","classes"]),u={label:"Auto",value:0,style:{display:"none"}},d={label:"No options",disabled:!0,value:"nooptions"},b=r.a.createRef(),p=r.a.useState([].concat(Object(Fe.a)(i),[u])),h=Object(j.a)(p,2),m=h[0],f=h[1],g=r.a.useState(n),x=Object(j.a)(g,2),y=x[0],C=x[1];return r.a.useEffect((function(){if(void 0!==o){var e=b.current,t=e.value,a=e.onChange,n=i.filter((function(e){var t=e.dependency;return!o||!t||t.includes(o)}));if(n.length)n.find((function(e){return e.value===t}))||y||!o||a(n[0].value);else!y&&o&&a(),n.push(d);f(n.concat([u]))}}),[o,i]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(ze.a,{id:t,name:t,type:"select",render:function(e){var t=e.input,r=e.meta;return b.current||(b.current=t),Object(A.jsx)(Me.d,Object(O.a)({meta:r,type:"select",input:t,label:a,onBlur:t.onBlur,onFocus:t.onFocus,options:m,variant:"outlined",classes:{root:s.select},required:c,disabled:!!y,IconComponent:y?Ge.a:qe.a,InputLabelProps:{required:c},FormHelperTextProps:void 0!==n&&{checked:y,onChange:function(e){var a=e.target;a.checked?t.onChange(0):m.length>2?t.onChange(m[0].value):t.onChange(),C(a.checked)},component:Be}},l))}})})})),Ve=Object(h.a)(We)((function(e){var t=e.name,a=e.label,n=e.required,r=e.classes,i=Object(v.a)(e,["name","label","required","classes"]);return Object(A.jsx)(ze.a,Object(O.a)({id:t,name:t,label:a,type:"checkbox",color:"primary",classes:{root:r.checkbox},required:n,component:Me.a},i))})),Je=Object(h.a)(We)((function(e){var t=e.name,a=e.label,n=e.required,r=e.placeholder,i=e.classes,c=Object(v.a)(e,["name","label","required","placeholder","classes"]);return Object(A.jsx)(ze.a,Object(O.a)({id:t,name:t,type:"text",label:a,variant:"outlined",classes:{root:i.text},required:n,component:Me.f,helperText:null,placeholder:r,InputLabelProps:{shrink:!1,"data-shrink":!0}},c))})),Qe=Object(h.a)(We)((function(e){var t=e.name,a=e.label,n=e.required,r=e.placeholder,i=e.classes,c=Object(v.a)(e,["name","label","required","placeholder","classes"]);return Object(A.jsx)(ze.a,Object(O.a)({id:t,name:t,type:"number",label:a,variant:"outlined",classes:{root:i.text},required:n,component:Me.f,helperText:null,placeholder:r,InputLabelProps:{shrink:!1,"data-shrink":!0}},c))})),Ke=function(e){var t=e.type,a=e.dependency,n=Object(v.a)(e,["type","dependency"]),r=Je;if("number"===t&&(r=Qe),"select"===t&&(r=Ue),"checkbox"===t&&(r=Ve),!a)return Object(A.jsx)(r,Object(O.a)({},n));var i=a.key,c=a.value;return Object(A.jsx)(ze.a,{name:i,subscription:{value:!0},children:function(e){var t=e.input.value;return void 0!==c&&t!==c?null:Object(A.jsx)(r,Object(O.a)(Object(O.a)({},n),{},{dependency:t}))}})},Ye=a(566),Xe=a(68),$e=function(e){var t=e.icon,a=void 0===t?Ye.a:t,n=e.children,i=e.size,c=r.a.useState(null),o=Object(j.a)(c,2),s=o[0],l=o[1],u=function(){l(null)};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(be.a,{onClick:function(e){l(e.currentTarget)},disableRipple:!0,size:i,children:Object(A.jsx)(a,{})}),Object(A.jsx)(Xe.a,{onClick:u,anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u,elevation:1,PaperProps:{square:!0},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:n})]})},Ze=a(345);var et=Object(h.a)((function(e){return{root:{"& > *":{overflow:"hidden"},display:"flex",width:"100%",height:"100%","& .gutter":{backgroundColor:e.palette.background.secondary,backgroundRepeat:"no-repeat",backgroundPosition:"50%"},"& .gutter.gutter-horizontal":{flexDirection:"column",cursor:"col-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==')"},"& .gutter.gutter-vertical":{flexDirection:"row",cursor:"row-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=')"}}}}))((function(e){var t=e.classes,a=e.children,n=Object(v.a)(e,["classes","children"]);return Object(A.jsx)(Ze.a,Object(O.a)(Object(O.a)({},n),{},{className:t.root,children:a}))})),tt=Object(h.a)((function(e){var t=e.spacing,a=e.palette,n=e.transitions;return{input:{overflow:"hidden",borderWidth:0,borderRadius:t(.5),paddingLeft:t(2),height:t(6),backgroundColor:a.background.paper,borderColor:a.primary.main,transition:n.create(["box-shadow"])},button:{color:a.getContrastText(a.primary.main),borderWidth:0,backgroundColor:a.primary.main},focused:{boxShadow:"inset 0 0 0 2px ".concat(a.primary.main)}}}))((function(e){var t=e.value,a=e.onSubmit,n=e.onChange,r=e.classes,i=(r.root,Object(v.a)(r,["root"])),c=e.placeholder,o=void 0===c?"Search files...":c;return Object(A.jsx)(Z.a,{children:Object(A.jsx)(Me.c,{value:t,classes:i,onChange:n,onSubmit:a,searchPlaceholder:o})})})),at=a(567),nt=a(568),rt=a(569),it=a(172),ct=a(91),ot=a(29),st=r.a.forwardRef((function(e,t){var a=e.response,n=e.classes,i=Object(u.c)().closeSnackbar,c=r.a.useMemo((function(){return a.some((function(e){return e.error}))?"Some jobs failed":"All jobs started successfully"}),[a]);return Object(A.jsx)(u.a,{ref:t,children:Object(A.jsx)(Z.a,{children:Object(A.jsx)($.a,{subheader:Object(A.jsxs)(it.a,{className:n.header,children:[c,Object(A.jsx)(be.a,{onClick:i,size:"small",children:Object(A.jsx)(at.a,{fontSize:"small"})})]}),children:a.map((function(e){var t=e.tag,a=e.error;return Object(A.jsxs)(ue.a,{children:[Object(A.jsx)(ct.a,{children:Object(A.jsxs)(de.a,{children:[a&&Object(A.jsx)(nt.a,{color:"error",fontSize:"small"}),!a&&Object(A.jsx)(rt.a,{color:"action",fontSize:"small"})]})}),Object(A.jsx)(ot.a,{secondaryTypographyProps:{color:"error"},primary:t,secondary:a})]},t)}))})})})})),lt=Object(h.a)((function(){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}))(st),ut=a(341),dt=a(342),bt=a(346),jt=a(344),pt=a(570),ht=function(e){Object(bt.a)(a,e);var t=Object(jt.a)(a);function a(e){var n;return Object(ut.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(dt.a)(a,[{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.hasError,n=t.error;return a?Object(A.jsx)(pt.a,{maxWidth:"sm",children:Object(A.jsxs)(Z.a,{variant:"outlined",style:{backgroundColor:"#313131",color:"#eee",padding:"8px 16px 32px 16px"},children:[Object(A.jsx)("h3",{children:"We're sorry - something went wrong: "}),n&&Object(A.jsx)("div",{style:{color:"#e57373"},children:n.toString()})]})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}]),a}(r.a.Component),mt=a(571),ft=a(572),Ot=a(474),vt=a(56),gt=a(220),xt=a(84),yt=a(30),Ct=function(e){var t=e.metadata,a=void 0===t?{}:t,n=e.shape;n=void 0===n?[{}]:n;var r=Object(j.a)(n,1)[0];return Object(O.a)(Object(O.a)(Object(O.a)({},Object(w.p)(a,{flat:!0,arrayOnSingle:!1})),Object(w.r)(r)),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).containerComponent,t=(void 0===e?{}:e).file,a=void 0===t?[{}]:t,n=Object(j.a)(a,1)[0],r=n.timestamp,i=n.id,c=n.storage;return{timestamp:ce()(r).format("L"),fileId:i,storageId:c}}(r))},St=Object(h.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"auto 1fr",gap:(0,e.spacing)(1,2)}}}))((function(e){var t=e.fields,a=e.data,n=e.classes;return Object(A.jsx)(X.a,{classes:n,children:t.map((function(e){var t=e.key,n=e.label;return Object(A.jsxs)(X.a,{display:"contents",children:[Object(A.jsxs)(le.a,{variant:"body2",color:"textSecondary",children:[n,":"]}),Object(A.jsx)(le.a,{noWrap:!0,variant:"body2",color:"textPrimary",children:re()(a,t,"-")})]},t)}))})})),At=[[{key:"title",label:"Title"},{key:"fileSize",label:"Filesize"}],[{key:"duration",label:"Duration"},{key:"timestamp",label:"Timestamp"},{key:"dimension",label:"Resolution"},{key:"frameRate",label:"Framerate"}],[{key:"videoCodec",label:"Video codec"},{key:"videoBitrate",label:"Bitrate"},{key:"audioCodec",label:"Audio codec"},{key:"audioChannels",label:"Audio channels"}]],Et=Object(h.a)((function(e){var t=e.spacing,a=e.typography;return{root:{padding:t(2),display:"grid",gridTemplateColumns:"auto auto 1fr 1fr 1fr auto",gap:t(2),alignItems:"start","& > .MuiAvatar-root":{display:"flex",flexDirection:"column",fontSize:a.fontSize},"& > .MuiListItemIcon-root":{minWidth:"unset",marginLeft:t(-1),marginTop:t(-1)},"&:not(:last-child)":{marginBottom:t(2)},"& > *:first-child:not(.MuiListItemIcon-root)":{gridColumn:"1 / 2 span"},"& > *:last-child:nth-child(4)":{gridColumn:"5 / 2 span"}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.itemType,a=void 0===t?{}:t,n=e.classes,i=e.allowTranscode,c=void 0!==i&&i,o=e.onTranscode,s=e.onDelete,l=void 0===s?function(){return null}:s,u=e.interactive,d=void 0===u||u,b=e.checkbox,j=void 0!==b&&b,p=r.a.useMemo((function(){return Ct(a)}),[a]);return Object(A.jsx)(Z.a,{className:n.paper,children:Object(A.jsxs)(ue.a,{button:!0,disableRipple:!0,className:n.root,children:[d&&j&&Object(A.jsx)(vt.a,{children:Object(A.jsx)(gt.a,{})}),Object(A.jsx)(de.a,{variant:"square",children:a.id.split("-").map((function(e){return Object(A.jsx)("span",{children:e},e)}))}),At.map((function(e){return Object(A.jsx)(St,{data:p,fields:e},e.reduce((function(e,t){return e+t.key}),""))})),d&&Object(A.jsxs)(X.a,{height:1,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[c&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(xt.a,{title:"Transcode file",children:Object(A.jsx)(be.a,{onClick:function(){return o(a)},children:Object(A.jsx)(mt.a,{})})}),Object(A.jsxs)($e,{children:[Object(A.jsxs)(yt.a,{onClick:function(){return window.open(p.uri)},children:[Object(A.jsx)(vt.a,{children:Object(A.jsx)(ft.a,{})}),Object(A.jsx)(ot.a,{primary:"Download",secondary:"Download the file locally"})]}),Object(A.jsxs)(yt.a,{onClick:function(){return l(p.itemId)},children:[Object(A.jsx)(vt.a,{children:Object(A.jsx)(Ot.a,{})}),Object(A.jsx)(ot.a,{primary:"Delete",primaryTypographyProps:{color:"error"},secondary:"Files on storage will be deleted"})]})]})]}),!c&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(xt.a,{title:"Download file",children:Object(A.jsx)(be.a,{onClick:function(){return window.open(p.uri)},children:Object(A.jsx)(ft.a,{})})}),Object(A.jsx)(xt.a,{title:"Delete file",children:Object(A.jsx)(be.a,{onClick:function(){return l(p.itemId)},children:Object(A.jsx)(Ot.a,{})})})]})]})]})})})),Tt=function(e){var t=e.itemListType,a=void 0===t?{}:t,n=e.page,r=e.onChangePage,i=e.onTranscode,c=a.item,o=void 0===c?[]:c,s=a.hits;return Object(A.jsxs)(X.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(A.jsx)(X.a,{overflow:"auto",height:1,children:Object(A.jsx)($.a,{disablePadding:!0,children:o.map((function(e){return Object(A.jsx)(Et,{itemType:e,allowTranscode:!0,onTranscode:i},e.id)}))})}),Object(A.jsxs)(X.a,{display:"flex",justifyContent:"flex-end",children:[Object(A.jsx)(S.a,{disabled:n<1,onClick:function(){return r({page:n-1})},children:"Prev"}),Object(A.jsx)(S.a,{disabled:10*(n+1)>s,onClick:function(){return r({page:n+1})},children:"Next"})]})]})},Pt=function(e){var t=e.itemListType,a=void 0===t?{}:t,n=e.page,r=e.onChangePage,i=a.item,c=void 0===i?[]:i,o=a.hits,s=c.map((function(e){var t=e.shape,a=void 0===t?[]:t,n=Object(v.a)(e,["shape"]),r=a.sort((function(e,t){var a=e.tag,n=t.b;return a.includes("original")?1:n.includes("original")?-1:0}));return Object(O.a)(Object(O.a)({},n),{},{shape:r})}));return Object(A.jsxs)(X.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(A.jsx)(X.a,{overflow:"auto",height:1,children:Object(A.jsx)($.a,{disablePadding:!0,children:s.map((function(e){return Object(A.jsx)(Et,{itemType:e},e.id)}))})}),Object(A.jsxs)(X.a,{display:"flex",justifyContent:"flex-end",children:[Object(A.jsx)(S.a,{disabled:n<1,onClick:function(){return r({page:n-1})},children:"Prev"}),Object(A.jsx)(S.a,{disabled:10*(n+1)>o,onClick:function(){return r({page:n+1})},children:"Next"})]})]})},kt=a(104),Rt=Object(h.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"auto 1fr",gap:(0,e.spacing)(1,2)}}}))((function(e){var t=e.fields,a=e.data,n=e.classes;return Object(A.jsx)(X.a,{classes:n,children:t.map((function(e){var t=e.key,n=e.label;return Object(A.jsxs)(X.a,{display:"contents",children:[Object(A.jsxs)(le.a,{variant:"body2",color:"textSecondary",children:[n,":"]}),Object(A.jsx)(le.a,{noWrap:!0,variant:"body2",color:"textPrimary",children:re()(a,t,"-")})]},t)}))})})),Nt=[[{key:"containerFormat",label:"Format"},{key:"dimension",label:"Resolution"}],[{key:"videoFormat",label:"Video codec"},{key:"audioFormat",label:"Audio codec"}],[{key:"videoBitrate",label:"Video bitrate"},{key:"frameRate",label:"Framerate"}]],wt=Object(h.a)((function(e){var t=e.spacing;e.typography;return{root:{padding:t(2),display:"grid",gridTemplateColumns:"auto 1fr 1fr 1fr 1fr",gap:t(2),alignItems:"start","&:not(:last-child)":{marginBottom:t(2)}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.tagName,a=e.selected,n=e.onChange,r=void 0===n?function(){return null}:n,i=e.classes,c=function(e){var t=e.tagName;return Object(N.a)(["profile",t],(function(){return D.r.getShapeTag({tagName:t}).then((function(e){var t=e.data,a=void 0===t?{}:t;return Object(O.a)(Object(O.a)({},Object(w.u)(a)),{},{name:a.name})}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}({tagName:t}).data,o=void 0===c?{}:c;return Object(A.jsx)(Z.a,{className:i.paper,children:Object(A.jsxs)(ue.a,{disableRipple:!0,className:i.root,selected:a,button:!0,onClick:function(){return r(o)},children:[Object(A.jsx)(vt.a,{children:Object(A.jsx)(gt.a,{checked:a,color:"primary"})}),Object(A.jsxs)(X.a,{children:[Object(A.jsx)(le.a,{noWrap:!0,variant:"body1",color:"textPrimary",children:re()(o,"name","-")}),Object(A.jsx)(le.a,{noWrap:!0,variant:"caption",color:"textSecondary",children:re()(o,"description","-")})]}),Nt.map((function(e){return Object(A.jsx)(Rt,{data:o,fields:e},e.reduce((function(e,t){return e+t.key}),""))}))]})})})),Dt=function(e){var t=e.selected,a=e.cost,n=e.title,i=e.isLoading,c=r.a.useState(n.split(".")),o=Object(j.a)(c,1),s=Object(j.a)(o[0],1)[0];return Object(A.jsxs)(X.a,{width:1,children:[t.map((function(e){var t=e.name,r=e.format,c=e.createPreview,o=e.createThumbnails;return Object(A.jsxs)(X.a,{p:2,borderRadius:4,bgcolor:"background.paper",display:"flex",flexDirection:"column",children:[Object(A.jsxs)(X.a,{mb:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(A.jsx)(le.a,{color:"textPrimary",variant:"body1",children:t}),i?Object(A.jsx)(ae.a,{size:16}):Object(A.jsxs)(le.a,{color:"textSecondary",variant:"body1",children:["$",a[t]&&a[t].cost.value]})]}),Object(A.jsx)(Je,{fullWidth:!0,name:"".concat(t,".name"),placeholder:n,initialValue:s}),Object(A.jsx)(ze.a,{name:"".concat(t,".createPreview"),initialValue:!!c,render:function(){return null}}),Object(A.jsx)(ze.a,{name:"".concat(t,".createThumbnails"),initialValue:!!o,render:function(){return null}}),Object(A.jsx)(ze.a,{name:"".concat(t,".format"),initialValue:r,render:function(){return null}})]},t)})),Object(A.jsxs)(X.a,{mt:2,px:2,display:"flex",justifyContent:"space-between",children:[Object(A.jsx)(le.a,{color:"textPrimary",variant:"h5",children:"Total:"}),Object(A.jsx)(le.a,{color:"textSecondary",variant:"h5",children:i?Object(A.jsx)(ae.a,{}):"$".concat(Object.values(a).reduce((function(e,t){var a=t.cost;return e+(void 0===a?{}:a).value}),0))})]})]})},It=function(e){var t=e.onClose,a=e.profiles,n=e.item,i=e.classes,c=e.handleSubmit,o=e.submitting,s=e.showDefault,l=e.setShowDefault,u=n.metadata,d=void 0===u?{}:u,b=Object(w.p)(d,{flat:!0,arrayOnSingle:!1}),p=b.itemId,h=b.title,m=r.a.useState(1),f=Object(j.a)(m,2),O=f[0],v=f[1],g=r.a.useState(""),x=Object(j.a)(g,2),E=x[0],T=x[1],P=r.a.useMemo((function(){return a.filter((function(e){return e.toLowerCase().includes(E)&&"original"!==e}))}),[E,a]),k=r.a.useState([]),R=Object(j.a)(k,2),N=R[0],I=R[1],_=function(e){var t=e.name,a=N.filter((function(e){return e.name!==t}));return a.length===N.length?I([].concat(Object(Fe.a)(a),[e])):I(a)},H=Le(D.i.createTranscode),L=H.data,F=void 0===L?{}:L,G=H.request,q=H.isLoading;return r.a.useEffect((function(){return G({itemId:p,tag:N})}),[N,p]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(y.a,{classes:i,children:[Object(A.jsx)(Et,{itemType:n,interactive:!1}),Object(A.jsxs)(X.a,{overflow:"hidden",flexGrow:1,display:"flex",flexDirection:"column",children:[Object(A.jsxs)(kt.a,{in:1===O,timeout:500,children:[Object(A.jsxs)(X.a,{display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:10,bgcolor:"background.default",children:[Object(A.jsx)(tt,{onChange:T,placeholder:"Search profiles..."}),Object(A.jsx)(Me.e,{SwitchProps:{color:"primary"},label:"Show default profiles",input:{value:s,onChange:function(e){var t=e.target;return l(t.checked)}}})]}),Object(A.jsx)(X.a,{mt:1,children:P.map((function(e){return Object(A.jsx)(wt,{tagName:e,selected:N.some((function(t){return t.name===e})),onChange:_},e)}))})]}),Object(A.jsx)(kt.a,{in:2===O,timeout:500,children:Object(A.jsx)("form",{onSubmit:c,children:Object(A.jsx)(Dt,{selected:N,cost:F,title:h,isLoading:q})})})]})]}),Object(A.jsxs)(C.a,{children:[1===O&&Object(A.jsx)(S.a,{onClick:t,children:"Cancel"}),Object(A.jsx)(S.a,{disabled:!N.length,variant:1===O?"contained":"text",color:1===O?"primary":"default",onClick:function(){return v((function(e){v(0),setTimeout((function(){return v(1===e?2:1)}),500)}))},children:1===O?"Next":"Back"}),2===O&&Object(A.jsx)(S.a,{disabled:q||o,variant:"contained",color:"primary",onClick:c,children:"Start transcode"})]})]})},_t=Object(h.a)((function(e){var t=e.palette;return{root:{position:"relative",padding:(0,e.spacing)(2),backgroundColor:t.background.default,display:"flex",flexDirection:"column",overflow:"hidden","& ul":{overflow:"auto"},"& .MuiCollapse-container":{overflow:"auto",position:"relative"}}}}))((function(e){var t=e.open,a=e.onSuccess,n=e.onClose,i=e.item,c=void 0===i?{}:i,o=e.classes,s=c.shape;s=void 0===s?[{}]:s;var l=Object(j.a)(s,1)[0],u=void 0===l?{}:l,d=c.id,b=r.a.useContext(M).outputStorage,p=H(),h=p.profiles,m=void 0===h?[]:h,f=p.showDefault,O=p.setShowDefault;return Object(A.jsxs)(g.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:n,children:[Object(A.jsx)(x.a,{children:"Transcode file"}),Object(A.jsx)(ze.b,{showDefault:f,setShowDefault:O,item:c,render:It,onClose:n,classes:o,profiles:m,onSubmit:function(e){var t={container:1},n=Object.entries(e).map((function(e){var a=Object(j.a)(e,2),n=a[0],r=a[1];return new Promise((function(e){var a=function(){return e({tag:n})},i=function(t){var a=t.message;return e({tag:n,error:a})},c=r.createThumbnails,o=void 0!==c&&c,s=r.name,l=r.format,j=Object(w.a)({title:s});D.y.createImportPlaceholder({metadataDocument:j,queryParams:t}).then((function(e){var t=e.data,r=(t=void 0===t?{}:t).id;return D.q.removeShapeAll({itemId:r}).then((function(){return D.q.createShape({itemId:r,shapeDocument:u}).then((function(){return D.i.createTranscode({itemId:d,queryParams:{tag:n,destinationItem:r,createThumbnails:o,storageId:b,jobmetadata:[{key:"filename",value:"".concat(s,".").concat(l)}]}}).then(a).catch((function(e){return D.i.removeItem({itemId:r}).then((function(){return i(e)}))}))})).catch((function(e){return D.i.removeItem({itemId:r}).then((function(){return i(e)}))}))})).catch((function(e){return D.i.removeItem({itemId:r}).then((function(){return i(e)}))}))})).catch(i)}))}));return Promise.all(n).then(a)},subscription:{submitting:!0,pristine:!0}})]})})),Ht={itemSearchDocument:{field:[{name:"__shape_size",value:[{value:1}]}]},queryParams:{content:"shape,metadata",field:["originalFilename:title","itemId","title"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"},{key:"contentDisposition",value:"attachment"}]},rowsPerPage:10},Lt={itemSearchDocument:{field:[{name:"__shape_size",value:[{value:2}]}]},queryParams:{content:"shape,metadata",field:["originalFilename:title","itemId","title"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"},{key:"contentDisposition",value:"attachment"}]},rowsPerPage:10},Ft=function(e){var t=e.query,a=e.setQuery,n=He(Ht),i=n.state,c=Object(v.a)(n,["state"]),o=He(Lt),s=o.state,l=Object(v.a)(o,["state"]),d=Object(m.s)(i),b=d.itemListType,p=void 0===b?{}:b,h=d.isLoading,f=d.isError,g=d.onRefresh,x=Object(m.s)(s),y=x.itemListType,C=void 0===y?{}:y,S=x.isLoading,E=x.isError,T=x.onRefresh,P=i.page,k=s.page,N=h||S;r.a.useEffect((function(){return f&&setTimeout(g,5e3)}),[f]),r.a.useEffect((function(){return E&&setTimeout(T,5e3)}),[E]);var w=R().showDialog,D=Object(u.c)().enqueueSnackbar,I=r.a.useState("input"),_=Object(j.a)(I,2),H=_[0],L=_[1],F=r.a.useRef(De()(c.setSearchText,500)).current,G=r.a.useRef(De()(c.setSearchText,500)).current;r.a.useEffect((function(){"input"===H&&F("*".concat(t.toLowerCase(),"*")),"output"===H&&G("*".concat(t.toLowerCase(),"*"))}),[t]);return Object(A.jsxs)(X.a,{display:"grid",gridTemplateRows:"auto 1fr",gridGap:16,children:[Object(A.jsx)(Z.a,{children:Object(A.jsxs)(ee.a,{value:H,onChange:function(e,n){t&&a(""),P>0&&c.onChangePage({page:0}),k>0&&l.onChangePage({page:0}),L(n)},children:[Object(A.jsx)(te.a,{disableRipple:!0,value:"input",label:"Input (".concat(p.hits||0,")")}),Object(A.jsx)(te.a,{disableRipple:!0,value:"output",label:"Output (".concat(C.hits||0,")")}),N&&Object(A.jsx)(te.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(A.jsx)(ae.a,{size:20})})]})}),Object(A.jsx)(X.a,{overflow:"hidden",hidden:"input"!==H,children:Object(A.jsx)(Tt,Object(O.a)({page:P,onTranscode:function(e){return w({Dialog:_t,item:e}).then((function(e){return D("",{persist:!0,content:Object(A.jsx)(lt,{response:e})})})).catch((function(){return null}))},itemListType:p},c))}),Object(A.jsx)(X.a,{overflow:"hidden",hidden:"output"!==H,children:Object(A.jsx)(Pt,Object(O.a)({itemListType:C,page:k},l))})]})};var Gt=function(){var e=r.a.useState(""),t=Object(j.a)(e,2),a=t[0],n=t[1],i=function(){var e=r.a.useContext(F);if(void 0===e)throw new Error("useSplitters must be used within a SplitterContext");return e}(),c=i.splitters,o=i.setSplitter;return Object(A.jsxs)(X.a,{px:2,pt:2,height:1,display:"flex",flexDirection:"column",children:[Object(A.jsx)(tt,{onChange:n,value:a}),Object(A.jsx)(X.a,{mt:2,flexGrow:1,overflow:"hidden",children:Object(A.jsxs)(et,{style:{flexDirection:"row"},direction:"horizontal",minSize:375,sizes:c.vertical,gutterSize:20,onDragEnd:function(e){return o("horizontal",e)},children:[Object(A.jsx)(Ft,{query:a,setQuery:n}),Object(A.jsx)(Ne,{})]})})]})},qt=[{name:"general",label:"",fields:[{name:"name",label:"Name",type:"string",placeholder:"Name",fullWidth:!0,required:!0,autoFocus:!0},{name:"description",label:"Description",type:"string",placeholder:"Description",fullWidth:!0},{name:"format",label:"Format",type:"select",fullWidth:!0,required:!0,options:[{value:"mp4",label:"MP4"},{value:"mov",label:"MOV"}]},{name:"createThumbnails",label:"Create thumbnails",type:"checkbox",defaultValue:!1,fullWidth:!0}]},{name:"video",label:"Video",fields:[{name:"video.codec",label:"Codec",type:"select",dependency:{key:"format"},options:[{value:"h264",label:"H264",dependency:["mp4"]},{value:"prores",label:"ProRes",dependency:["mov"]}]},{name:"video.preset",label:"Preset",type:"select",dependency:{key:"video.codec"},options:[{value:"baseline",label:"Baseline",default:!0,dependency:["h264"]},{value:"ipod",label:"Ipod",dependency:["h264"]},{value:"main",label:"Main",dependency:["h264"]},{value:"high",label:"High",dependency:["h264"]},{value:"proreshq",label:"ProRes HQ",dependency:["prores"]},{value:"prores422",label:"ProRes 422",dependency:["prores"]},{value:"proreslt",label:"ProRes LT",dependency:["prores"]},{value:"proresproxy",label:"ProRes Proxy",dependency:["prores"]},{value:"prores4444",label:"ProRes 4444",dependency:["prores"]},{value:"prores4444xq",label:"ProRes 4444 XQ",dependency:["prores"]}]},{name:"video.framerate",label:"Framerate",type:"select",match:!1,dependency:{key:"video.preset"},options:[{value:24,label:"24 FPS"},{value:25,label:"25 FPS"},{value:30,label:"30 FPS"},{value:50,label:"50 FPS"},{value:60,label:"60 FPS"}]},{name:"video.bitrate",label:"Bitrate",type:"select",match:!1,dependency:{key:"video.preset"},options:[{value:1e6,label:"1 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:2e6,label:"2 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:3e6,label:"3 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:4e6,label:"4 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:5e6,label:"5 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:6e6,label:"6 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:7e6,label:"7 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:8e6,label:"8 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:9e6,label:"9 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:1e7,label:"10 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:11e6,label:"11 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:12e6,label:"12 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:15e6,label:"15 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:2e7,label:"20 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:25e6,label:"25 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:3e7,label:"30 Mbit/s",dependency:["baseline","ipod","main","high"]},{value:5e7,label:"50 Mbit/s",dependency:["baseline","ipod","main","high"]}]},{name:"video.scaling",label:"Resolution",type:"select",match:!1,fullWidth:!0,dependency:{key:"video.preset"},options:[{value:"4096x2160",label:"4096 x 2160",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"2048x1080",label:"2048 x 1080",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"1920x1080",label:"1920 x 1080",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"1280x720",label:"1280 x 720",dependency:["baseline","ipod","main","high","proreshq","prores422","proreslt","proresproxy","prores4444","prores4444xq"]},{value:"960x540",label:"960 x 540",dependency:["baseline","ipod","main","high"]},{value:"640x360",label:"640 x 360",dependency:["baseline","ipod","main","high"]},{value:"custom",label:"Custom resolution"}]},{name:"video.width",label:"Width",type:"number",dependency:{key:"video.scaling",value:"custom"}},{name:"video.height",label:"Height",type:"number",dependency:{key:"video.scaling",value:"custom"}}]},{name:"audio",label:"Audio",fields:[{name:"audio.codec",label:"Codec",type:"select",dependency:{key:"format"},options:[{value:"nablet_aac",label:"AAC Nablet"},{value:"mp3",label:"MP3"}]},{name:"audio.preset",label:"Preset",type:"select",dependency:{key:"audio.codec"},options:[{value:"AAC_LC",label:"Low complexity",dependency:["nablet_aac"]}]},{name:"audio.sampleRate",label:"Sample rate",type:"select",match:!1,options:[{value:48,label:"48 Khz"},{value:96,label:"96 Khz"}]},{name:"audio.sampleSize",label:"Sample size",type:"select",match:!1,options:[{value:16,label:"16"},{value:24,label:"24"}]}]}],Mt=a(353),zt=a(17),Bt=a(265),Wt=a(258),Ut=a(259),Vt=function(e){var t=e.fields;return Object(A.jsx)(zt.a,{spacing:2,container:!0,children:t.map((function(e){var t=e.name,a=e.fullWidth,n=Object(v.a)(e,["name","fullWidth"]);return Object(A.jsx)(zt.a,{item:!0,xs:a?12:6,children:Object(A.jsx)(Ke,Object(O.a)({name:t},n))},t)}))})},Jt=Object(h.a)((function(e){var t=e.spacing;return{root:{borderRadius:t(.5),boxShadow:"none",marginTop:t(2),marginBottom:t(0),"&:before":{content:"unset"}}}}))((function(e){var t=e.label,a=e.fields,n=e.errors,i=e.submitFailed,c=e.classes,o=r.a.useState(!1),s=Object(j.a)(o,2),l=s[0],u=s[1],d=r.a.useMemo((function(){return i&&a.some((function(e){var t=e.name;return Object.keys(n).includes(t)}))}),[n,a,i]);return t?Object(A.jsxs)(Bt.a,{classes:c,expanded:l,onChange:function(){return u(!l)},children:[Object(A.jsx)(Wt.a,{expandIcon:Object(A.jsx)(Mt.a,{}),children:Object(A.jsx)(le.a,{color:d?"error":"initial",children:t})}),Object(A.jsx)(Ut.a,{children:Object(A.jsx)(Vt,{fields:a})})]}):Object(A.jsx)(Vt,{fields:a})})),Qt=function(e){e.form;var t=e.handleSubmit,a=e.onClose,n=e.classes;return Object(A.jsxs)("form",{onSubmit:t,children:[Object(A.jsx)(x.a,{classes:{root:n.title},children:"Profile manager"}),Object(A.jsx)(y.a,{classes:{root:n.content},children:qt.map((function(e){var t=e.name,a=Object(v.a)(e,["name"]);return Object(A.jsx)(Jt,Object(O.a)({},a),t)}))}),Object(A.jsxs)(C.a,{classes:{root:n.actions},children:[Object(A.jsx)(S.a,{onClick:a,children:"Cancel"}),Object(A.jsx)(S.a,{type:"submit",variant:"contained",color:"primary",children:"Add new profile"})]})]})},Kt=Object(h.a)((function(e){var t=e.spacing,a=e.palette;return{root:{},title:{},content:{maxHeight:"75vh",padding:t(2),backgroundColor:a.background.default},actions:{}}}))((function(e){var t=e.onSuccess,a=e.onClose,n=e.open,i=e.classes,c=r.a.useState(qt);return Object(A.jsx)(g.a,{classes:{root:i.root},open:n,onClose:a,children:Object(A.jsx)(ze.b,{onSubmit:function(e){return t(function(e){var t=e.video,a=e.audio,n=e.format,r=e.name,i=e.description,c=e.createThumbnails,o={name:r,description:i,format:n,metadata:{}};if(t){var s=t.scaling,l=t.framerate,u=t.preset,d=t.width,b=t.height,p=Object(v.a)(t,["scaling","framerate","preset","width","height"]);if(l&&(l={denominator:l,numerator:1}),s){if("custom"!==s){var h=s.split("x"),m=Object(j.a)(h,2);d=m[0],b=m[1]}s={width:Number(d),height:Number(b)}}u&&(u=[u]),o.video=Object(O.a)(Object(O.a)({},p),{},{framerate:l,scaling:s,preset:u})}if(a){var f=a.preset,g=a.bitrate,x=a.sampleSize,y=a.sampleRate,C=Object(v.a)(a,["sampleSize","sampleRate"]);x&&y&&(g=x*y*1e3),f&&(f=[f]),o.audio=Object(O.a)(Object(O.a)({},C),{},{bitrate:g,preset:f})}return c&&(o.metadata.field=(o.metadata.field||[]).concat([{key:"createThumbnails",value:c||!1}])),o}(e))},sections:c,onClose:a,component:Qt,classes:i,validate:function(e){var t=e.name;return t&&t.includes(" ")?{name:"Do not use blank spaces"}:{}}})})})),Yt=function(){var e=R().showDialog,t=Object(u.c)().enqueueSnackbar,a=Object(n.useState)(0),r=Object(j.a)(a,2),i=r[0],c=r[1],o=H(),s=o.profiles,l=void 0===s?[]:s,d=o.onSearch,b=o.showDefault,p=o.setShowDefault;return Object(A.jsxs)(X.a,{px:2,pt:2,height:1,display:"flex",flexDirection:"column",children:[Object(A.jsxs)(X.a,{display:"grid",gridTemplateColumns:"1fr auto",gridGap:8,children:[Object(A.jsx)(tt,{onChange:d,placeholder:"Search profiles..."}),Object(A.jsx)(S.a,{variant:"contained",color:"primary",style:{flexShrink:0},onClick:function(){return e({Dialog:Kt}).then((function(e){var t=e.name;return D.r.updateShapeTag({tagName:t,transcodePresetDocument:e})})).then((function(){return t("Success!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))},children:"Add new profile"}),Object(A.jsx)(Me.e,{color:"primary",label:"Show default profiles",input:{value:b,onChange:function(e){var t=e.target;return p(t.checked)}}})]}),Object(A.jsx)(X.a,{my:2,flexGrow:1,overflow:"auto",children:l.slice(i,i+20).map((function(e){return Object(A.jsx)(wt,{tagName:e},e)}))}),Object(A.jsxs)(X.a,{display:"flex",justifyContent:"flex-end",children:[Object(A.jsx)(S.a,{type:"button",onClick:function(){c(Math.max(0,i-20))},disabled:0===i,children:"Prev"}),Object(A.jsx)(S.a,{type:"button",onClick:function(){c(i+20)},disabled:i+20>l.length,children:"Next"})]})]})},Xt=a(107),$t=a(219),Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="Not a URL",a=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi,n=new RegExp(a),r=e.match(n);return r?null:t};var ea=Object(h.a)((function(e){return{root:{height:"100vh",width:"100vw"},gridLeft:{padding:e.spacing(4)},gridRight:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.background.login},logo:{backgroundColor:e.palette.common.white,maxWidth:"25vw"}}}))((function(e){var t=e.classes,a=e.onLogin,n=e.userName,r=e.serverUrl,i=e.error;return Object(A.jsxs)(zt.a,{className:t.root,container:!0,direction:"row",alignItems:"center",children:[Object(A.jsxs)(zt.a,{item:!0,xs:12,sm:12,md:6,lg:3,className:t.gridLeft,children:[Object(A.jsx)($t.a,{style:{visibility:i?"visible":"hidden"},severity:"error",className:t.alert,children:i}),Object(A.jsx)(Me.b,{onSubmit:a,FormProps:{initialValues:{userName:n,serverUrl:r}},FormFieldsProps:{UrlFieldProps:{validate:Zt}}})]}),Object(A.jsx)(Xt.a,{smDown:!0,children:Object(A.jsx)(zt.a,{item:!0,sm:!0,className:t.gridRight,children:Object(A.jsx)("img",{src:V,alt:Q,className:t.logo})})})]})}));var ta=Object(h.a)((function(){return{logo:{text:"100%",textAlign:"center"}}}))((function(e){var t=e.classes;return Object(A.jsx)(le.a,{className:t.text,children:"Page does not exist"})})),aa=a(471),na=Object(h.a)((function(e){var t=e.typography,a=e.palette,n=e.spacing,r=e.mixins;return{root:Object(O.a)(Object(O.a)(Object(O.a)({},t.subtitle1),r.toolbar),{},{textTransform:"none",opacity:.8,"&::after":{color:a.primary.main,transition:"width 0.25s ease-in-out 0.05s",borderBottom:"0.25em solid",width:0,position:"absolute",bottom:0,left:0,content:'""'},"&:hover, &.active":{opacity:1,backgroundColor:"unset","&::after":{width:"100%"}},"&:not(:last-child)":{marginRight:n(2)}})}}))(S.a);var ra=Object(h.a)((function(e){var t=e.spacing;return{root:{backgroundColor:e.palette.background.paper},logo:{height:t(3),width:t(3)}}}))((function(e){var t=e.classes,a=Object(m.l)(),n=a.userName,r=a.onLogout;return Object(A.jsx)(aa.a,{className:t.root,elevation:0,color:"default",children:Object(A.jsxs)(X.a,{display:"flex",px:2,height:1,alignItems:"center",justifyContent:"space-between",children:[Object(A.jsx)(de.a,{className:t.logo,variant:"square",src:J,alt:Q}),Object(A.jsxs)(X.a,{children:[Object(A.jsx)(na,{variant:"text",component:o.b,to:"/search",color:"inherit",disableRipple:!0,children:"Home"}),Object(A.jsx)(na,{variant:"text",component:o.b,to:"/profile",color:"inherit",disableRipple:!0,children:"Profiles"}),Object(A.jsx)(na,{variant:"text",component:o.b,to:"/settings",color:"inherit",disableRipple:!0,children:"Settings"}),Object(A.jsx)(na,{variant:"text",component:o.b,to:"/about",color:"inherit",disableRipple:!0,children:"About"})]}),Object(A.jsx)(Me.g,{userName:n,onLogout:r})]})})})),ia=new(a(573).a),ca=function(){var e=Object(p.g)().id.replace(/_/g,"/");return Object(A.jsx)("video",{src:e,controls:!0,children:Object(A.jsx)("track",{kind:"captions"})})};var oa=Object(h.a)((function(e){return{container:{height:"100vh",overflow:"auto",paddingTop:e.mixins.toolbar.minHeight}}}))((function(e){var t=e.classes,a=r.a.useState(),n=Object(j.a)(a,2),i=n[0],c=n[1];return Object(A.jsx)(m.a,{cookieOptions:{maxAge:1209600,path:Y},onError:function(e){var t=e.message;c(t),setTimeout((function(){return c()}),5e3)},LoginComponent:ea,LoginProps:{error:i},children:Object(A.jsx)(f.a,{client:ia,children:Object(A.jsx)(_,{children:Object(A.jsx)(B,{children:Object(A.jsxs)(k,{children:[Object(A.jsx)(ra,{}),Object(A.jsx)("div",{className:t.container,children:Object(A.jsxs)(p.d,{children:[Object(A.jsx)(p.b,{exact:!0,path:"/search/",children:Object(A.jsx)(Gt,{})}),Object(A.jsx)(p.b,{exact:!0,path:"/search/*",children:Object(A.jsx)(Gt,{})}),Object(A.jsx)(p.b,{exact:!0,path:"/profile/",children:Object(A.jsx)(Yt,{})}),Object(A.jsx)(p.b,{path:"/:id",children:Object(A.jsx)(ca,{})}),Object(A.jsx)(p.a,{exact:!0,from:"/",push:!0,to:"/search/"}),Object(A.jsx)(p.b,{path:"*",children:Object(A.jsx)(ta,{})})]})})]})})})})})}));c.a.render(Object(A.jsx)(ht,{children:Object(A.jsx)(s.a,{theme:b,children:Object(A.jsx)(l.a,{children:Object(A.jsx)(u.b,{children:Object(A.jsx)(q,{splitters:{vertical:[75,25]},children:Object(A.jsx)(o.a,{basename:Y,children:Object(A.jsx)(oa,{})})})})})})}),document.getElementById("root"))}},[[464,1,2]]]);