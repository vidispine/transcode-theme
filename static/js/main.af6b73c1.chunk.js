(this["webpackJsonptest-vdt-app"]=this["webpackJsonptest-vdt-app"]||[]).push([[0],{479:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(34),c=a.n(i),o=a(100),s=a(483),l=a(484),d=a(81),u=a(174),b=(a(286),a(397),a(398),a(399),a(400),a(401),a(402),"#0068a9"),j=Object(u.a)({typography:{useNextVariants:!0,fontFamily:'"Open Sans", "Helvetica", "Arial", sans-serif'},palette:{type:"light",primary:{main:b},secondary:{main:"#7c74bd"},success:{light:"#6DC3C5",main:"#44a8aa"},error:{main:"#df5f5f"},text:{primary:"rgba(0,0,0,0.75)"},background:{login:"linear-gradient(-45deg,#b0c800,#0068a9 0,#0068a9 33%,#002749 100%,#b0c800 0)",default:"#f2f2f2",paper:"#fff"}},overrides:{VdtUserAvatarButton:{avatar:{fontSize:"0.875rem",height:32,width:32}},MuiButton:{root:{fontWeight:600}},MuiTabs:{root:{backgroundColor:"#fff"},indicator:{backgroundColor:b},flexContainer:{alignItems:"center"}},MuiTab:{root:{fontWeight:"600",zIndex:2,color:"inherit",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&$selected":{color:b}}},MuiPaper:{root:{position:"relative",overflow:"hidden",flexShrink:0}},MuiAvatar:{colorDefault:{color:"inherit",backgroundColor:"#f2f2f2"}}},mixins:{toolbar:{minHeight:56}},props:{VdtUserAvatarButton:{locale:{options:void 0},userName:""},MuiPaper:{variant:"outlined"}}}),p=a(14),m=a(49),h=a(4),f=a(15),O=a(202),v=a(8),g=a(30),x=a(71),y=a(51),S=a(48),C=a(59),A=a(12),E=a(3),T=function(e){var t=e.open,a=e.onClose,n=e.onSuccess,r=e.title,i=void 0===r?"Dialog":r,c=e.okText,o=void 0===c?"Ok":c,s=e.noText,l=void 0===s?"Cancel":s,d=e.message,u=void 0===d?"Message":d,b=e.Dialog,j=void 0===b?x.a:b;return Object(E.jsxs)(j,{open:t,onClose:a,children:[Object(E.jsx)(y.a,{children:i}),Object(E.jsx)(S.a,{dividers:!0,children:u}),Object(E.jsxs)(C.a,{children:[Object(E.jsx)(A.a,{onClick:a,children:l}),Object(E.jsx)(A.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:n,children:o})]})]})},k=function(e){var t=e.Dialog,a=void 0===t?T:t,n=Object(g.a)(e,["Dialog"]);return Object(E.jsx)(a,Object(v.a)({},n))},P=r.a.createContext({}),N=function(e){var t=e.children,a=r.a.useState(!1),n=Object(p.a)(a,2),i=n[0],c=n[1],o=r.a.useState({}),s=Object(p.a)(o,2),l=s[0],d=l.config,u=l.resolve,b=l.reject,j=s[1],m=function(){c(!1),j({})};return Object(E.jsxs)(P.Provider,{value:{openDialog:function(e){c(!0),j(e)}},children:[Object(E.jsx)(k,Object(v.a)(Object(v.a)({},d),{},{open:i,onSuccess:function(e){u(e),m()},onClose:function(e){b(e),m()}})),t]})},I=function(){var e=r.a.useContext(P).openDialog;return{showDialog:function(t){return new Promise((function(a,n){return e({config:t,resolve:a,reject:n})}))}}},D=a(588),w=a(590),R=a(9),_=a(6);var F=a(62),L=r.a.createContext({splitters:{}}),H="LAYOUT_SPLITTERS",M=function(e){var t=e.splitters,a=e.children,n=r.a.useState((function(){return function(){try{return JSON.parse(localStorage.getItem(H))||t}catch(e){return t}}()})),i=Object(p.a)(n,2),c=i[0],o=i[1];r.a.useEffect((function(){localStorage.setItem(H,JSON.stringify(c))}),[c]);return Object(E.jsx)(L.Provider,{value:{splitters:c,resetSplitters:function(){o(t)},setSplitter:function(e,t){o((function(a){return Object(v.a)(Object(v.a)({},a),{},Object(F.a)({},e,t))}))}},children:a})};var G=a(108),q="\nfunction main() {\n  const fileId = context.getFileId();\n  const jobMetadata = context.getJobMetadata();\n  const fileExtension = context.getExtension();\n  const defaultFilename = [fileId, fileExtension].join('.');\n\n  if (jobMetadata !== null) {\n    const filename = jobMetadata.get('filename');\n    if (filename !== undefined && filename !== null) return filename;\n  }\n\n  return defaultFilename;\n}\n\ntry {\n  main();\n} catch (error) {\n  logger.log('Error setting filename: ' + error);\n}\n";var z=a.p+"static/media/logo.db253c2c.svg",W=a.p+"static/media/header-logo.f0892ea4.svg",V=z,B=W,U="VidiCore Transcode Theme";""===Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL||Object({NODE_ENV:"production",PUBLIC_URL:"https://vidispine.github.io/transcode-theme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_TITLE:"VidiCore Transcode Theme",REACT_APP_DOCUMENT_TITLE:"VidiCore Transcode Theme"}).REACT_APP_VIDISPINE_URL;document.title="VidiCore Transcode Theme";var K="https://vidispine.github.io/transcode-theme";K&&K.startsWith("http")&&(K=(K=new URL(K)).pathname.replace(/(.+?)\/+$/,"$1"));var J=K,Q=a(26),Y=a(60),X=a(23),$=a(133),Z=a(227),ee=a(154),te=a(144),ae=a(57),ne=a.n(ae),re=a(205),ie=a.n(re),ce=a(482),oe=a(575),se=a(38),le=a(28),de=a(46),ue=a(264),be="READY",je="STARTED",pe="VIDINET_JOB",me="FINISHED",he="FINISHED_WARNING",fe="WAITING",Oe="ABORTED_PENDING",ve="ABORTED",ge="FAILED_TOTAL",xe=[fe,he,Oe],ye=[ge,ve],Se=[me],Ce=[be,je,pe,fe,Oe],Ae=[me,he,ge,ve],Ee=function(e){var t=e.fields,a=e.data;return t.map((function(e){var t=e.key,n=e.label;return Object(E.jsxs)(Q.a,{display:"contents",children:[Object(E.jsxs)(X.a,{variant:"body2",color:"textSecondary",children:[n,":"]}),Object(E.jsx)(X.a,{variant:"body2",color:"textPrimary",children:ne()(a,t,"-")})]},t)}))},Te=[{key:"type",label:"Job type"},{key:"jobId",label:"Job ID"}],ke=Object(h.a)((function(e){var t=e.spacing,a=e.palette;return{root:{borderRadius:t(.5),padding:t(1,0),display:"flex",flexDirection:"column",alignItems:"stretch","&:not(:last-child)":{marginBottom:t(2)}},top:{padding:t(1,2),display:"grid",alignItems:"start",gridTemplateColumns:"1fr auto",gap:t(2),"& > .MuiBox-root":{display:"grid",gridTemplateColumns:"auto 1fr",gap:t(0,2)}},paper:{"&:not(:last-child)":{marginBottom:t(1)}},successState:{color:a.success.main},errorState:{color:a.error.main},warningState:{color:a.warning.main},defaultState:{color:a.primary.main}}}))((function(e){var t=e.jobType,a=void 0===t?{}:t,n=e.classes,i=e.onAbort,c=e.onInfo,o=e.hideProgress,s=r.a.useState(a),l=Object(p.a)(s,1)[0],d=l.status,u=l.started,b=l.jobId,j=function(e){var t=e.jobId,a=e.type,n=e.status,i=r.a.useState(0),c=Object(p.a)(i,2),o=c[0],s=c[1];return{request:r.a.useCallback((function(){Ae.includes(n)?s(100):function e(){return _.j.getJob({jobId:t}).then((function(t){var n=t.data,r=(n=void 0===n?{}:n).status,i=n.log,c=100;"TRANSCODE"===a&&(c=200);var o=((void 0===i?{}:i).task.find((function(e){return e.step===c}))||{}).progress;s((void 0===o?{}:o).value||0),Ce.includes(r)&&setTimeout((function(){return e()}),2500)}))}()}),[t,a,n]),value:o}}(a),m=j.request,h=j.value,f=void 0===h?100:h;r.a.useEffect(m,[m]);return Object(E.jsx)($.a,{className:n.paper,children:Object(E.jsxs)(se.a,{className:n.root,children:[Object(E.jsxs)(Q.a,{className:n.top,children:[Object(E.jsx)(Q.a,{children:Object(E.jsx)(Ee,{data:a,fields:Te})}),Object(E.jsxs)(le.a,{size:"small",onClick:function(){Ce.includes(d)?i(b):Ae.includes(d)&&c(a)},children:[Ce.includes(d)&&Object(E.jsx)(ce.a,{}),Ae.includes(d)&&Object(E.jsx)(oe.a,{})]})]}),Object(E.jsx)(de.a,{}),Object(E.jsxs)(Q.a,{children:[Object(E.jsxs)(Q.a,{pt:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(E.jsx)(X.a,{color:"textPrimary",variant:"button",className:Se.includes(d)?n.successState:ye.includes(d)?n.errorState:xe.includes(d)?n.warningState:n.defaultState,children:d}),Object(E.jsx)(X.a,{color:"textSecondary",variant:"caption",children:ie()(u).fromNow()})]}),!o&&Object(E.jsx)(Q.a,{pt:1,children:Object(E.jsx)(ue.a,{color:Ce.includes(d)&&!f?"secondary":"primary",variant:Ce.includes(d)&&!f?"indeterminate":"determinate",value:f})})]})]})})}));function Pe(e,t){var a=t.state,n=t.first,r=t.number,i=void 0===r?10:r;return Object(D.a)(["getJobs",e,n],(function(){return _.j.listJob({queryParams:{step:!0,type:"RAW_IMPORT,PLACEHOLDER_IMPORT,TRANSCODE",sort:"startTime desc",number:i,state:a,first:n}})}),{refetchOnWindowFocus:!1,refetchInterval:15e3,keepPreviousData:!0})}var Ne=a(222),Ie=a(128),De=a.n(Ie),we=a(141),Re=a.n(we),_e=a(93),Fe=function(e){return{root:{},labelKey:{color:e.palette.primary.main},labelValue:{color:e.palette.success.main}}},Le=Object(h.a)(Fe)((function(e){var t=e.classes,a=e.nodeKey,n=e.nodeValue;return"object"===typeof n?Object(E.jsx)("span",{className:t.labelKey,children:a}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("span",{className:t.labelKey,children:"".concat(a,": ")}),Object(E.jsx)("span",{className:t.labelValue,children:n})]})})),He=Object(h.a)(Fe)((function(e){var t=e.classes,a=e.data;return Object(E.jsx)(Ne.a,{className:t.root,defaultCollapseIcon:Object(E.jsx)(De.a,{}),defaultExpandIcon:Object(E.jsx)(Re.a,{}),children:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";return Array.isArray(t)?t.map((function(t,n){return Object(E.jsx)(_e.a,{nodeId:"".concat(a).concat(n),label:n,children:"object"===typeof t?e(t,"".concat(a).concat(n)):null},"".concat(a).concat(n))})):Object.entries(t).map((function(t){var n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(E.jsx)(_e.a,{nodeId:"".concat(a).concat(r),label:Object(E.jsx)(Le,{nodeKey:r,nodeValue:i}),children:"object"===typeof i?e(i,"".concat(a).concat(r)):null},"".concat(a).concat(r))}))}(a)})})),Me=Object(h.a)((function(){return{root:{}}}))((function(e){var t=e.onClose,a=e.open,n=e.classes,r=e.jobType,i=r.jobId;return Object(E.jsxs)(x.a,{classes:{root:n.root},fullWidth:!0,maxWidth:"md",open:a,onClose:t,children:[Object(E.jsx)(y.a,{classes:{root:n.title},children:i}),Object(E.jsx)(S.a,{classes:{root:n.content},children:Object(E.jsx)(He,{data:r})}),Object(E.jsx)(C.a,{classes:{root:n.actions},children:Object(E.jsx)(A.a,{onClick:t,children:"Close"})})]})})),Ge=function(e){var t=e.jobListType,a=e.page,n=e.isLoading,r=e.onAbort,i=void 0===r?function(){return null}:r,c=e.onInfo,o=void 0===c?function(){return null}:c,s=e.setPage,l=e.hideProgress,d=void 0!==l&&l,u=t.job,b=void 0===u?[]:u,j=t.hits,p=void 0===j?0:j;return Object(E.jsxs)(Q.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(E.jsxs)(Q.a,{overflow:"auto",height:1,children:[Object(E.jsx)(Y.a,{disablePadding:!0,children:b.map((function(e){return Object(E.jsx)(ke,{jobType:e,onAbort:i,onInfo:o,hideProgress:!!d},e.jobId)}))}),!n&&b.length<1&&Object(E.jsx)(Q.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(E.jsx)(X.a,{variant:"overline",children:"No active jobs"})})]}),Object(E.jsxs)(Q.a,{display:"flex",justifyContent:"flex-end",children:[Object(E.jsx)(A.a,{disabled:!a,onClick:function(){return s(a-1)},children:"Prev"}),Object(E.jsx)(A.a,{disabled:10*(a+1)>p,onClick:function(){return s(a+1)},children:"Next"})]})]})},qe=function(){var e=I().showDialog,t=Object(d.c)().enqueueSnackbar,a=r.a.useState("active"),n=Object(p.a)(a,2),i=n[0],c=n[1],o=r.a.useState(0),s=Object(p.a)(o,2),l=s[0],u=s[1],b=r.a.useState(0),j=Object(p.a)(b,2),m=j[0],h=j[1],f=Pe("active",{state:Ce,first:10*l+1}).data,O=(f=void 0===f?{}:f).data,v=void 0===O?{}:O,g=f.isFetching,x=Pe("inactive",{state:Ae,first:10*m+1}),y=x.data,S=(y=void 0===y?{}:y).data,C=void 0===S?{}:S,A=x.isFetching,T=g||A;return Object(E.jsxs)(Q.a,{display:"grid",gridTemplateRows:"auto 1fr",gridGap:16,children:[Object(E.jsx)($.a,{children:Object(E.jsxs)(Z.a,{value:i,onChange:function(e,t){c(t)},children:[Object(E.jsx)(ee.a,{disableRipple:!0,value:"active",label:"Active jobs (".concat(v.hits||0,")")}),Object(E.jsx)(ee.a,{disableRipple:!0,value:"finished",label:"Finished jobs (".concat(C.hits||0,")")}),T&&Object(E.jsx)(ee.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(E.jsx)(te.a,{size:20})})]})}),"active"===i?Object(E.jsx)(Q.a,{overflow:"hidden",children:Object(E.jsx)(Ge,{jobListType:v,page:l,setPage:u,isLoading:T,onAbort:function(a){return e({message:"Are you sure you want to abort this job?",okText:"Yes, abort job",noText:"No, cancel"}).then((function(){return _.j.abortJob({jobId:a})})).then((function(){return t("Job aborted!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))}})}):Object(E.jsx)(Q.a,{overflow:"hidden",children:Object(E.jsx)(Ge,{hideProgress:!0,jobListType:C,page:m,setPage:h,isLoading:T,onInfo:function(t){return e({Dialog:Me,jobType:t}).catch((function(){return null}))}})})]})},ze=a(164),We=a.n(ze),Ve={CHANGE_PAGE:"CHANGE_PAGE",CHANGE_ROWS:"CHANGE_ROWS",CHANGE_SORT:"CHANGE_SORT",CHANGE_SEARCHTEXT:"CHANGE_SEARCHTEXT",CHANGE_SEARCHFIELD:"CHANGE_SEARCHFIELD",CHANGE_SEARCHFIELDFACET:"CHANGE_SEARCHFIELDFACET",CHANGE_SEARCHFILTER:"CHANGE_SEARCHFILTER",CHANGE_SEARCHFILTERFACET:"CHANGE_SEARCHFILTERFACET",CHANGE_PARENT_COLLECTION:"CHANGE_PARENT_COLLECTION",CHANGE_FACET:"CHANGE_FACET",CHANGE_ITEMSEARCHDOCUMENT:"CHANGE_ITEMSEARCHDOCUMENT",CHANGE_QUERYPARAMS:"CHANGE_QUERYPARAMS",CHANGE_MATRIXPARAMS:"CHANGE_MATRIXPARAMS",CHANGE_SUGGESTION:"CHANGE_SUGGESTION"},Be=function(e,t){switch(t.type){case Ve.CHANGE_ITEMSEARCHDOCUMENT:return Object(v.a)(Object(v.a)({},e),{},{itemSearchDocument:t.itemSearchDocument});case Ve.CHANGE_QUERYPARAMS:return Object(v.a)(Object(v.a)({},e),{},{queryParams:t.queryParams});case Ve.CHANGE_PAGE:return Object(v.a)(Object(v.a)({},e),{},{page:t.page,queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:t.page*e.rowsPerPage+1})});case Ve.CHANGE_ROWS:return Object(v.a)(Object(v.a)({},e),{},{rowsPerPage:t.rowsPerPage,page:0,queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1,number:t.rowsPerPage})});case Ve.CHANGE_SORT:return Object(v.a)(Object(v.a)({},e),{},{page:0,searchText:t.value,sort:t.value,itemSearchDocument:Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{sort:t.field?[{field:t.field,order:t.order||"descending"}]:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_SEARCHTEXT:return Object(v.a)(Object(v.a)({},e),{},{page:0,searchText:t.value,itemSearchDocument:t.value?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{text:[{value:"".concat(t.value)}]}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{text:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_SEARCHFIELD:return Object(v.a)(Object(v.a)({},e),{},{page:0,field:t.field,itemSearchDocument:t.field?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:t.field}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_SEARCHFIELDFACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,field:t.field,facet:t.facet,itemSearchDocument:t.field?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:t.field,facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{field:[],facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_SEARCHFILTER:return Object(v.a)(Object(v.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:t.filter}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_SEARCHFILTERFACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,filter:t.filter,itemSearchDocument:t.filter?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:t.filter,facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{filter:[],facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_FACET:return Object(v.a)(Object(v.a)({},e),{},{page:0,facet:t.facet,itemSearchDocument:t.facet?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{facet:t.facet}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{facet:[]}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_PARENT_COLLECTION:return Object(v.a)(Object(v.a)({},e),{},{page:0,parentCollection:t.value,itemSearchDocument:t.value?Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{operator:{field:[{name:"__parent_collection",value:[{value:"".concat(t.value)}]},{name:"__collection",value:[{value:"".concat(t.value)}]}],operation:"OR"}}):Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{operator:void 0}),queryParams:Object(v.a)(Object(v.a)({},e.queryParams),{},{first:1})});case Ve.CHANGE_SUGGESTION:return Object(v.a)(Object(v.a)({},e),{},{itemSearchDocument:Object(v.a)(Object(v.a)({},e.itemSearchDocument),{},{suggestion:t.suggestion})});default:return e}};function Ue(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryParams,a=void 0===t?{}:t,n=e.itemSearchDocument,r=void 0===n?{}:n,i=e.rowsPerPage,c=void 0===i?10:i,o=e.page,s=void 0===o?0:o,l=Object(g.a)(e,["queryParams","itemSearchDocument","rowsPerPage","page"]);return Object(v.a)(Object(v.a)({},l),{},{queryParams:Object(v.a)({content:"metadata",interval:"generic",first:s*c+1,number:c},a),itemSearchDocument:Object(v.a)({intervals:"generic",filter:[]},r),rowsPerPage:c,page:s})}(e),a=r.a.useReducer(Be,t),n=Object(p.a)(a,2),i=n[0],c=n[1],o=r.a.useCallback((function(e){return c({type:Ve.CHANGE_SEARCHTEXT,value:e})}),[]),s=r.a.useCallback((function(e){return c({type:Ve.CHANGE_ITEMSEARCHDOCUMENT,itemSearchDocument:e})}),[]),l=r.a.useCallback((function(e){return c({type:Ve.CHANGE_ITEMQUERYPARAMS,queryParams:e})}),[]);return{state:i,onChangeRowsPerPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target.value;return c({type:Ve.CHANGE_ROWS,rowsPerPage:t})},onChangePage:function(e){var t=e.page;return c({type:Ve.CHANGE_PAGE,page:t})},onChangeSort:function(e,t,a){return c({type:Ve.CHANGE_SORT,field:t,order:a})},setSearchText:o,setSearchField:r.a.useCallback((function(e){return c({type:Ve.CHANGE_SEARCHFIELD,field:e})}),[]),setSearchFieldFacet:r.a.useCallback((function(e){var t=e.map((function(e){return{field:e.name,count:!0}}));c({type:Ve.CHANGE_SEARCHFIELDFACET,field:e,facet:t})}),[]),setSearchFilter:r.a.useCallback((function(e){return c({type:Ve.CHANGE_SEARCHFILTER,filter:e})}),[]),setSearchFilterFacet:r.a.useCallback((function(e){var t=e.reduce((function(e,t){var a=t.field,n=void 0===a?[]:a;return e.concat(n)}),[]).map((function(e){var t=e.name;return{name:t,field:t,count:!0,exclude:[t]}}));c({type:Ve.CHANGE_SEARCHFILTERFACET,filter:e,facet:t})}),[c]),setFacet:r.a.useCallback((function(e){c({type:Ve.CHANGE_FACET,facet:e})}),[c]),setItemSearchDocument:s,setQueryParams:l,setParentCollection:r.a.useCallback((function(e){return c({type:Ve.CHANGE_PARENT_COLLECTION,value:e})}),[]),setSuggestion:r.a.useCallback((function(e){c({type:Ve.CHANGE_SUGGESTION,suggestion:e})}),[])}}var Ke=function(e){var t=r.a.useRef({}),a=r.a.useRef(null),n=r.a.useState({}),i=Object(p.a)(n,2),c=i[0],o=i[1],s=r.a.useState(!1),l=Object(p.a)(s,2),d=l[0],u=l[1];return{request:r.a.useCallback((function(n){var r=n.tag,i=void 0===r?[]:r,s=Object(g.a)(n,["tag"]);if(i.length){a.current?(a.current({canceled:!0}),a.current=null):u(!0);var l=new Promise((function(a,n){var r=i.map((function(a){var n=a.tagName;return new Promise((function(a,r){c[n]?a(Object(v.a)({tag:n},c[n])):e(Object(v.a)(Object(v.a)({},s),{},{queryParams:{tag:n},costEstimate:!0})).then((function(e){var r=e.data,i=(r=void 0===r?{}:r).id;!function e(){_.x.getCostEstimate({costEstimateId:i}).then((function(r){var i=r.data,c=i.state,o=i.service;o=void 0===o?[{}]:o;var s=Object(p.a)(o,1)[0];"FINISHED"===c?a(Object(v.a)(Object(v.a)({},s),{},{tag:n})):t.current[n]=setTimeout((function(){return e()}),1e3)}))}()})).catch(r)}))}));Promise.all(r).then(a).catch(n)})),d=new Promise((function(e,t){a.current=t}));Promise.race([l,d]).then((function(e){var t=e.reduce((function(e,t){var a=t.tag,n=Object(g.a)(t,["tag"]);return Object(v.a)(Object(v.a)({},e),{},Object(F.a)({},a,Object(v.a)({},n)))}),{});u(!1),o(t),a.current=null})).catch((function(e){e.canceled||(u(!1),a.current=null)}))}}),[e,c]),isLoading:d,data:c}},Je=a(102),Qe=a(239),Ye=a.n(Qe),Xe=a(134),$e=a(94),Ze=a(58),et=a(495),tt=a(496),at=a(33),nt=a(111),rt=a(31),it=a(55),ct=a(135),ot=function(e){var t=e.children;return Object(E.jsx)(E.Fragment,{children:t&&Object(E.jsx)(Xe.a,{error:!0,children:t})})},st=function(e){var t=e.onChange,a=e.checked,n=e.children;return Object(E.jsxs)(E.Fragment,{children:[n&&Object(E.jsx)(Xe.a,{error:!0,children:n}),Object(E.jsx)(Ze.a,{input:{onChange:t,checked:a},color:"primary",size:"small",label:"Match source"})]})},lt=function(e){return e.map((function(e){var t=e.value,a=Object(g.a)(e,["value"]);return Object(v.a)(Object(v.a)({value:t},a),0!==t&&"nooptions"!==t&&{value:JSON.stringify(t)})}))},dt=Object(h.a)((function(e){return{root:{marginTop:e.spacing(1),width:"100%","& .MuiInputBase-root":{fontSize:".75rem"},"& .MuiInputBase-input":{fontWeight:500,fontSize:"0.875rem"}},inputLabel:{},select:{},menuItem:{},formHelperText:{}}}))((function(e){var t=e.input,a=(t=void 0===t?{}:t).value,r=t.name,i=t.onChange,c=t.multiple,o=Object(g.a)(t,["value","name","onChange","multiple"]),s=e.meta,l=(s=void 0===s?{}:s).touched,d=s.error,u=s.submitError,b=e.options,j=void 0===b?[]:b,m=(e.dependency,e.match),h=void 0!==m&&m,f=e.label,O=e.classes,x=(e.className,e.disabled),y=void 0!==x&&x,S=e.FormControlProps,C=void 0===S?{}:S,A=e.InputLabelProps,T=void 0===A?{}:A,k=e.MenuItemProps,P=void 0===k?{}:k,N=(e.FormHelperTextProps,e.parseOptions),I=void 0===N?lt:N,D=Object(g.a)(e,["input","meta","options","dependency","match","label","classes","className","disabled","FormControlProps","InputLabelProps","MenuItemProps","FormHelperTextProps","parseOptions"]),w=n.useState(I(j)),R=Object(p.a)(w,2),_=R[0],F=R[1],L=n.useState(!1),H=Object(p.a)(L,2),M=H[0],G=H[1];n.useEffect((function(){var e=I(j);F(e),a&&!e.some((function(e){return e.value===a}))&&i({target:{value:0}})}),[j]);return n.useEffect((function(){M&&i({target:{value:0}})}),[M]),Object(E.jsxs)(it.a,Object(v.a)(Object(v.a)({error:(d||u)&&l,disabled:y||M,className:O.root},C),{},{children:[Object(E.jsx)(ct.a,Object(v.a)(Object(v.a)({htmlFor:r,className:O.inputLabel},T),{},{children:f})),Object(E.jsx)(nt.a,Object(v.a)(Object(v.a)({name:r,onChange:i,value:a,multiple:c,className:O.select,inputProps:o},D),{},{children:_.map((function(e){var t=e.value,a=e.label,n=Object(g.a)(e,["value","label"]);return Object(E.jsx)(rt.a,Object(v.a)(Object(v.a)(Object(v.a)({value:t,className:O.menuItem},P),n),{},{children:a}),t)}))})),h&&Object(E.jsx)(st,{onChange:function(e){var t=e.target.checked;G(t),t&&i({target:{value:0}})},checked:M,children:l&&(d||u)?d||u:""}),!h&&Object(E.jsx)(ot,{className:O.formHelperText,children:l&&(d||u)?d||u:""})]}))})),ut=function(e){var t=e.spacing,a=e.typography,n=e.palette;return{text:{marginTop:0,"& > div":{display:"flex",flexDirection:"column","& > label":{fontSize:a.fontSize,position:"relative",transform:"none",marginLeft:t(2),marginBottom:t(1)},"& > fieldset":{top:0,"& legend":{display:"none"}},"& input":{backgroundColor:n.background.paper,padding:t(2)},"& .Mui-disabled":{"& fieldset":{opacity:.3},"& input":{color:n.text.primary,"&::placeholder":{opacity:0}}}}},checkbox:{marginTop:0,paddingLeft:t(2),"& > p":{display:"none"}},select:{marginTop:0,display:"flex",flexDirection:"column","& > label":{fontSize:a.fontSize,position:"relative",transform:"none",marginLeft:t(2),marginBottom:t(1)},"& .MuiSelect-root":{backgroundColor:n.background.paper,padding:t(2,4,2,2)},"& .VdtCheckboxField-root":{marginTop:0,marginLeft:t(2),"& > p":{display:"none"},"& span":{fontSize:a.fontSize}},"& .Mui-disabled":{"& .MuiSelect-root":{color:n.text.primary},"& fieldset":{opacity:.3},"& svg":{visibility:"hidden"},"& label":{color:n.text.disabled}}}}},bt=function(e){var t=e.children;return Object(E.jsx)(E.Fragment,{children:t&&Object(E.jsx)(Xe.a,{error:!0,children:t})})},jt={label:"Auto",value:0,style:{display:"none"}},pt={label:"No options",disabled:!0,value:"nooptions"},mt=Object(h.a)(ut)((function(e){var t=e.name,a=e.disabled,n=e.label,i=e.match,c=e.options,o=(e.required,e.dependency),s=e.classes,l=e.defaultValue,d=void 0===l?0:l,u=e.validate,b=Object(g.a)(e,["name","disabled","label","match","options","required","dependency","classes","defaultValue","validate"]),j=r.a.useState([].concat(Object(Je.a)(c),[jt])),m=Object(p.a)(j,2),h=m[0],f=m[1];return r.a.useEffect((function(){if(o){var e=c.filter((function(e){var t=e.dependency;return!t||t.some((function(e){return Ye()(e,o)}))}));f([].concat(Object(Je.a)(e.length?e:[pt]),[jt]))}}),[o]),Object(E.jsx)(at.a,{id:t,name:t,type:"select",format:function(e){return JSON.stringify(e)},parse:function(e){return JSON.parse(e)},validate:u,defaultValue:d,render:function(e){var t=e.input,r=e.meta;return Object(E.jsx)(dt,Object(v.a)({meta:r,type:"select",input:t,label:n,options:h,match:i,variant:"outlined",classes:{root:s.select},disabled:a,dependency:o,InputLabelProps:{disabled:!0}},b))}})})),ht=Object(h.a)(ut)((function(e){var t=e.name,a=e.disabled,n=e.label,r=e.required,i=e.classes,c=Object(g.a)(e,["name","disabled","label","required","classes"]);return Object(E.jsx)(at.a,Object(v.a)({id:t,name:t,label:n,type:"checkbox",color:"primary",classes:{root:i.checkbox},disabled:a,required:r,component:Ze.a},c))})),ft=Object(h.a)(ut)((function(e){var t=e.name,a=e.disabled,n=e.label,r=e.required,i=e.placeholder,c=e.classes,o=e.validate,s=Object(g.a)(e,["name","disabled","label","required","placeholder","classes","validate"]);return Object(E.jsx)(at.a,Object(v.a)({id:t,name:t,type:"text",label:n,variant:"outlined",classes:{root:c.text},required:r,disabled:a,validate:o,component:Ze.e,helperText:null,placeholder:i,InputLabelProps:{shrink:!1,"data-shrink":!0},FormHelperTextProps:{component:bt}},s))})),Ot=Object(h.a)(ut)((function(e){var t=e.name,a=e.disabled,n=e.label,i=(e.required,e.placeholder),c=e.validate,o=e.classes,s=Object(g.a)(e,["name","disabled","label","required","placeholder","validate","classes"]),l=r.a.useState(!1),d=Object(p.a)(l,2),u=d[0],b=d[1];return Object(E.jsx)(at.a,Object(v.a)({id:t,name:t,type:u?"text":"password",label:n,variant:"outlined",classes:{root:o.text},disabled:a,validate:c,component:Ze.e,helperText:null,placeholder:i,InputLabelProps:{shrink:!1,"data-shrink":!0},InputProps:{endAdornment:Object(E.jsx)($e.a,{position:"end",children:Object(E.jsx)(le.a,{disabled:a,size:"small",onClick:function(){return b((function(e){return!e}))},children:u?Object(E.jsx)(et.a,{}):Object(E.jsx)(tt.a,{})})})},FormHelperTextProps:{component:bt}},s))})),vt=Object(h.a)(ut)((function(e){var t=e.name,a=e.disabled,n=e.label,r=(e.required,e.placeholder),i=e.validate,c=e.classes,o=Object(g.a)(e,["name","disabled","label","required","placeholder","validate","classes"]);return Object(E.jsx)(at.a,Object(v.a)({id:t,name:t,type:"number",label:n,variant:"outlined",classes:{root:c.text},disabled:a,validate:i,component:Ze.e,helperText:null,placeholder:r,InputLabelProps:{shrink:!1,"data-shrink":!0},FormHelperTextProps:{component:bt}},o))})),gt=function e(t){var a=t.type,n=(t.errors,t.dependency),r=void 0===n?[]:n,i=t.checkedDependencies,c=void 0===i?{}:i,o=Object(g.a)(t,["type","errors","dependency","checkedDependencies"]),s=ft;if("number"===a&&(s=vt),"select"===a&&(s=mt),"checkbox"===a&&(s=ht),"password"===a&&(s=Ot),!r.length)return Object(E.jsx)(s,Object(v.a)(Object(v.a)({},o),{},{dependency:c}));var l=Object(G.a)(r),d=l[0],u=l.slice(1);return Object(E.jsx)(at.a,{name:d,children:function(t){var n=t.input.value;return Object(E.jsx)(e,Object(v.a)(Object(v.a)({},o),{},{type:a,checkedDependencies:Object(v.a)(Object(v.a)({},c),{},Object(F.a)({},d,n)),dependency:u}))}})},xt=a(576),yt=a(69),St=function(e){var t=e.icon,a=void 0===t?xt.a:t,n=e.children,i=e.size,c=r.a.useState(null),o=Object(p.a)(c,2),s=o[0],l=o[1],d=function(e){e.stopPropagation(),l(null)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(le.a,{onClick:function(e){e.stopPropagation(),l(e.currentTarget)},disableRipple:!0,size:i,children:Object(E.jsx)(a,{})}),Object(E.jsx)(yt.a,{onClick:d,anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:d,elevation:1,PaperProps:{square:!0},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:n})]})},Ct=a(356);var At=Object(h.a)((function(e){return{root:{"& > *":{overflow:"hidden"},display:"flex",width:"100%",height:"100%","& .gutter":{backgroundColor:e.palette.background.secondary,backgroundRepeat:"no-repeat",backgroundPosition:"50%"},"& .gutter.gutter-horizontal":{flexDirection:"column",cursor:"col-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==')"},"& .gutter.gutter-vertical":{flexDirection:"row",cursor:"row-resize",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=')"}}}}))((function(e){var t=e.classes,a=e.children,n=Object(g.a)(e,["classes","children"]);return Object(E.jsx)(Ct.a,Object(v.a)(Object(v.a)({},n),{},{className:t.root,children:a}))})),Et=Object(h.a)((function(e){var t=e.spacing,a=e.palette,n=e.transitions;return{input:{overflow:"hidden",borderWidth:0,borderRadius:t(.5),paddingLeft:t(2),height:t(6),backgroundColor:a.background.paper,borderColor:a.primary.main,transition:n.create(["box-shadow"])},button:{color:a.getContrastText(a.primary.main),borderWidth:0,backgroundColor:a.primary.main,"&:hover":{backgroundColor:a.primary.dark}},focused:{boxShadow:"inset 0 0 0 2px ".concat(a.primary.main)}}}))((function(e){var t=e.value,a=e.onSubmit,n=e.onChange,r=e.classes,i=(r.root,Object(g.a)(r,["root"])),c=e.placeholder,o=void 0===c?"Search files...":c;return Object(E.jsx)($.a,{children:Object(E.jsx)(Ze.c,{value:t,classes:i,onChange:n,onSubmit:a,searchPlaceholder:o})})})),Tt=a(577),kt=a(578),Pt=a(579),Nt=a(177),It=a(95),Dt=a(113),wt=a(29),Rt=r.a.forwardRef((function(e,t){var a=e.response,n=e.classes,i=Object(d.c)().closeSnackbar,c=r.a.useMemo((function(){return a.some((function(e){return e.error}))?"Some jobs failed":"All jobs started successfully"}),[a]);return Object(E.jsx)(d.a,{ref:t,children:Object(E.jsx)($.a,{children:Object(E.jsx)(Y.a,{subheader:Object(E.jsxs)(Nt.a,{className:n.header,children:[c,Object(E.jsx)(le.a,{onClick:function(){return i()},size:"small",children:Object(E.jsx)(Tt.a,{fontSize:"small"})})]}),children:a.map((function(e){var t=e.tag,a=e.error;return Object(E.jsxs)(se.a,{children:[Object(E.jsx)(It.a,{children:Object(E.jsxs)(Dt.a,{children:[a&&Object(E.jsx)(kt.a,{color:"error",fontSize:"small"}),!a&&Object(E.jsx)(Pt.a,{color:"action",fontSize:"small"})]})}),Object(E.jsx)(wt.a,{secondaryTypographyProps:{color:"error"},primary:t,secondary:a})]},t)}))})})})})),_t=Object(h.a)((function(){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}))(Rt),Ft=a(352),Lt=a(353),Ht=a(357),Mt=a(355),Gt=a(580),qt=function(e){Object(Ht.a)(a,e);var t=Object(Mt.a)(a);function a(e){var n;return Object(Ft.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(Lt.a)(a,[{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.hasError,n=t.error;return a?Object(E.jsx)(Gt.a,{maxWidth:"sm",children:Object(E.jsxs)($.a,{variant:"outlined",style:{backgroundColor:"#313131",color:"#eee",padding:"8px 16px 32px 16px"},children:[Object(E.jsx)("h3",{children:"We're sorry - something went wrong: "}),n&&Object(E.jsx)("div",{style:{color:"#e57373"},children:n.toString()})]})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e,hasError:!0}}}]),a}(r.a.Component),zt=a(581),Wt=a(582),Vt=a(583),Bt=a(56),Ut=a(229),Kt=a(88),Jt=function(e){var t=e.metadata,a=void 0===t?{}:t,n=e.shape;n=void 0===n?[{}]:n;var r=Object(p.a)(n,1)[0];return Object(v.a)(Object(v.a)(Object(v.a)({},Object(R.p)(a,{flat:!0,arrayOnSingle:!1})),Object(R.r)(r)),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).containerComponent,t=(void 0===e?{}:e).file,a=void 0===t?[{}]:t,n=Object(p.a)(a,1)[0],r=n.timestamp,i=n.id,c=n.storage;return{timestamp:ie()(r).format("L"),fileId:i,storageId:c}}(r))},Qt=Object(h.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"auto 1fr",gap:(0,e.spacing)(1,2)}}}))((function(e){var t=e.fields,a=e.data,n=e.classes;return Object(E.jsx)(Q.a,{classes:n,children:t.map((function(e){var t=e.key,n=e.label;return Object(E.jsxs)(Q.a,{display:"contents",children:[Object(E.jsxs)(X.a,{variant:"body2",color:"textSecondary",children:[n,":"]}),Object(E.jsx)(X.a,{noWrap:!0,variant:"body2",color:"textPrimary",children:ne()(a,t,"-")})]},t)}))})})),Yt=[[{key:"title",label:"Title"},{key:"itemId",label:"ID"},{key:"fileSize",label:"Filesize"}],[{key:"duration",label:"Duration"},{key:"timestamp",label:"Timestamp"},{key:"dimension",label:"Resolution"},{key:"frameRate",label:"Framerate"}],[{key:"videoCodec",label:"Video codec"},{key:"videoBitrate",label:"Bitrate"},{key:"audioCodec",label:"Audio codec"},{key:"audioChannels",label:"Audio channels"}]],Xt=Object(h.a)((function(e){var t=e.spacing,a=e.typography;return{root:{padding:t(2),display:"grid",gridTemplateColumns:"auto auto 1fr 1fr 1fr auto",gap:t(2),alignItems:"start","& > .MuiAvatar-root":{display:"flex",flexDirection:"column",fontSize:a.fontSize},"& > .MuiListItemIcon-root":{minWidth:"unset",marginLeft:t(-1),marginTop:t(-1)},"&:not(:last-child)":{marginBottom:t(2)},"& > *:first-child:not(.MuiListItemIcon-root)":{gridColumn:"1 / 2 span"},"& > *:last-child:nth-child(4)":{gridColumn:"5 / 2 span"}},paper:{"&:not(:last-child)":{marginBottom:t(1)}},thumbnail:{height:"7rem",width:"7rem"}}}))((function(e){var t=e.itemType,a=void 0===t?{}:t,n=e.classes,i=e.allowTranscode,c=void 0!==i&&i,s=e.onTranscode,l=e.onDelete,d=void 0===l?function(){return null}:l,u=e.interactive,b=void 0===u||u,j=e.checkbox,m=void 0!==j&&j,h=a.thumbnails,f=(h=void 0===h?{}:h).uri,O=void 0===f?[]:f,v=Object(p.a)(O,1)[0],g=r.a.useMemo((function(){return Jt(a)}),[a]);return Object(E.jsx)($.a,{className:n.paper,children:Object(E.jsxs)(se.a,{button:!0,disableRipple:!0,className:n.root,children:[b&&m&&Object(E.jsx)(Bt.a,{children:Object(E.jsx)(Ut.a,{})}),Object(E.jsx)(Dt.a,{variant:"square",className:n.thumbnail,src:v,children:!v&&Object(E.jsx)(zt.a,{})}),Yt.map((function(e){return Object(E.jsx)(Qt,{data:g,fields:e},e.reduce((function(e,t){return e+t.key}),""))})),b&&Object(E.jsxs)(Q.a,{height:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"space-between",children:[c&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(A.a,{disableElevation:!0,size:"small",variant:"text",color:"primary",startIcon:Object(E.jsx)(Wt.a,{}),onClick:function(){return s(a)},children:"Transcode"}),Object(E.jsx)(Kt.a,{title:"Download the file locally",children:Object(E.jsx)(A.a,{component:o.b,to:g.uri,size:"small",variant:"text",color:"inherit",children:"Download"})}),Object(E.jsx)(Kt.a,{title:"File on storage will be deleted",children:Object(E.jsx)(A.a,{size:"small",variant:"text",color:"inherit",onClick:function(){return d(g.itemId)},children:"Delete"})})]}),!c&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(A.a,{disableElevation:!0,size:"small",variant:"text",color:"primary",startIcon:Object(E.jsx)(Vt.a,{}),component:o.b,to:g.uri,children:"Download"}),Object(E.jsx)(Kt.a,{title:"File on storage will be deleted",children:Object(E.jsx)(A.a,{size:"small",variant:"text",color:"inherit",onClick:function(){return d(g.itemId)},children:"Delete"})})]})]})]})})})),$t=function(e){var t=e.itemListType,a=void 0===t?{}:t,n=e.page,r=e.onChangePage,i=e.onTranscode,c=e.onDelete,o=a.item,s=void 0===o?[]:o,l=a.hits;return Object(E.jsxs)(Q.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(E.jsx)(Q.a,{overflow:"auto",height:1,children:Object(E.jsx)(Y.a,{disablePadding:!0,children:s.map((function(e){return Object(E.jsx)(Xt,{itemType:e,allowTranscode:!0,onTranscode:i,onDelete:c},e.id)}))})}),Object(E.jsxs)(Q.a,{display:"flex",justifyContent:"flex-end",children:[Object(E.jsx)(A.a,{disabled:n<1,onClick:function(){return r({page:n-1})},children:"Prev"}),Object(E.jsx)(A.a,{disabled:10*(n+1)>l,onClick:function(){return r({page:n+1})},children:"Next"})]})]})},Zt=function(e){var t=e.itemListType,a=void 0===t?{}:t,n=e.page,r=e.onChangePage,i=e.onDelete,c=a.item,o=void 0===c?[]:c,s=a.hits,l=o.map((function(e){var t=e.shape,a=void 0===t?[]:t,n=Object(g.a)(e,["shape"]),r=a.sort((function(e,t){var a=e.tag,n=void 0===a?[]:a,r=t.b,i=void 0===r?[]:r;return n.includes("original")?1:i.includes("original")?-1:0}));return Object(v.a)(Object(v.a)({},n),{},{shape:r})}));return Object(E.jsxs)(Q.a,{display:"grid",gridTemplateRows:"1fr auto",height:1,children:[Object(E.jsx)(Q.a,{overflow:"auto",height:1,children:Object(E.jsx)(Y.a,{disablePadding:!0,children:l.map((function(e){return Object(E.jsx)(Xt,{itemType:e,onDelete:i},e.id)}))})}),Object(E.jsxs)(Q.a,{display:"flex",justifyContent:"flex-end",children:[Object(E.jsx)(A.a,{disabled:n<1,onClick:function(){return r({page:n-1})},children:"Prev"}),Object(E.jsx)(A.a,{disabled:10*(n+1)>s,onClick:function(){return r({page:n+1})},children:"Next"})]})]})},ea=a(109),ta=a(584),aa=function(e){var t={},a={},n=e.metadata,r=Object(g.a)(e,["metadata"]);if(n)for(var i=n.field,c=void 0===i?[]:i,o=0;o<c.length;o+=1){var s=c[o],l=s.key,d=s.value;"sampleSize"===l||"sampleRate"===l?a[l]=Number(d):t[l]=d}return Object(v.a)(Object(v.a)(Object(v.a)({},r),t),{},{audio:Object(v.a)(Object(v.a)({},r.audio),a)})};function na(){return Object(D.a)(["getProfiles"],(function(){return _.r.listShapeTag().then((function(e){var t=e.data,a=(void 0===t?{}:t).uri;return(void 0===a?[]:a).filter((function(e){return"original"!==e}))}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}var ra=Object(h.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"auto 1fr",gap:(0,e.spacing)(1,2),"&:last-child":{gridColumnEnd:"span 2"}}}}))((function(e){var t=e.fields,a=e.data,n=e.classes;return Object(E.jsx)(Q.a,{classes:n,children:t.map((function(e){var t=e.key,n=e.label;return Object(E.jsxs)(Q.a,{display:"contents",children:[Object(E.jsxs)(X.a,{variant:"body2",color:"textSecondary",children:[n,":"]}),Object(E.jsx)(X.a,{noWrap:!0,variant:"body2",color:"textPrimary",children:ne()(a,t,"-")})]},t)}))})})),ia=[[{key:"containerFormat",label:"Format"},{key:"dimension",label:"Resolution"}],[{key:"videoFormat",label:"Video codec"},{key:"audioFormat",label:"Audio codec"}],[{key:"videoBitrate",label:"Video bitrate"},{key:"frameRate",label:"Framerate"}]],ca=Object(h.a)((function(e){var t=e.spacing;return{root:{padding:t(2),display:"grid",gridTemplateColumns:"auto 1fr 1fr 1fr 1fr auto",gap:t(2),alignItems:"start","&:not(:last-child)":{marginBottom:t(2)},"& *:first-child.MuiBox-root":{gridColumn:"1 / 2 span"}},paper:{"&:not(:last-child)":{marginBottom:t(1)}}}}))((function(e){var t=e.tagName,a=e.onChange,n=void 0===a?function(){return null}:a,r=e.onDelete,i=void 0===r?function(){return null}:r,c=e.onSelect,o=void 0===c?function(){return null}:c,s=e.selected,l=e.checkbox,d=void 0===l||l,u=e.interactive,b=void 0!==u&&u,j=e.classes,p=function(e){var t=e.tagName;return Object(D.a)(["getProfile",t],(function(){return _.r.getShapeTag({tagName:t}).then((function(e){var t=e.data,a=void 0===t?{}:t;return Object(v.a)(Object(v.a)({},Object(R.u)(a)),{},{raw:aa(a),name:a.name})}))}),{refetchOnWindowFocus:!1,staleTime:1/0})}({tagName:t}).data,m=void 0===p?{}:p,h=m.raw,f=void 0===h?{}:h;return Object(E.jsx)($.a,{className:j.paper,children:Object(E.jsxs)(se.a,{className:j.root,selected:s,button:!!d,onClick:function(){return o&&o(f)},children:[d&&Object(E.jsx)(Bt.a,{children:Object(E.jsx)(Ut.a,{onChange:function(){return o(f)},checked:s,color:"primary"})}),Object(E.jsxs)(Q.a,{children:[Object(E.jsx)(X.a,{noWrap:!0,variant:"body1",color:"textPrimary",children:ne()(m,"name","-")}),Object(E.jsx)(X.a,{noWrap:!0,variant:"caption",color:"textSecondary",children:ne()(m,"description","-")})]}),ia.map((function(e){return Object(E.jsx)(ra,{data:m,fields:e},e.reduce((function(e,t){return e+t.key}),""))})),b&&Object(E.jsxs)(St,{children:[Object(E.jsxs)(rt.a,{onClick:function(){return n(f)},children:[Object(E.jsx)(Bt.a,{children:Object(E.jsx)(ta.a,{})}),Object(E.jsx)(wt.a,{primary:"Edit profile",secondary:"Edit the properties of the transcode profile"})]}),Object(E.jsx)(de.a,{}),Object(E.jsxs)(rt.a,{onClick:function(){return i(t)},children:[Object(E.jsx)(Bt.a,{children:Object(E.jsx)(ce.a,{})}),Object(E.jsx)(wt.a,{primary:"Delete profile",primaryTypographyProps:{color:"error"},secondary:"This action cannot be undone"})]})]})]})})}));function oa(e){return Object(D.a)(["getStorages"],(function(){return _.s.listStorage({}).then((function(e){var t=e.data;return function(e){return e.storage.reduce((function(e,t){var a,n=t.method,r=void 0===n?[]:n,i=t.metadata,c=void 0===i?{}:i,o=t.id,s={},l=c.field,d=void 0===l?[]:l;if(d.length){if(d.some((function(e){return"transcodeThemeSourceStorage"===e.key}))&&(a="input"),d.some((function(e){return"transcodeThemeOutputStorage"===e.key}))&&(a="output"),!a)return e;var u=(d.find((function(e){return"description"===e.key}))||{}).value,b=void 0===u?"-":u;s.description=b}var j=Object(p.a)(r,1)[0];if(j){var m=j.uri,h=Object(g.a)(j,["uri"]),f=new URL(m),O=f.protocol,x=f.pathname,y=f.search;x.startsWith("//")&&(x=x.slice(2)),O.endsWith(":")&&(O=O.slice(0,-1)),y.startsWith("?")&&(y=y.slice(1));var S=x.split("@"),C=Object(p.a)(S,2),A=C[0],E=C[1],T=A.split(":_VSENC__"),k=Object(p.a)(T,1)[0],P=E.split("/"),N=Object(G.a)(P),I=N[0],D=N.slice(1).join("/"),w=y.split("&").reduce((function(e,t){var a=t.split("="),n=Object(p.a)(a,2),r=n[0],i=n[1];return Object(v.a)(Object(v.a)({},e),{},Object(F.a)({},r,i))}),{});Object.assign(s,Object(v.a)(Object(v.a)({accessKey:k,name:I,path:D,protocol:O,storageId:o},w),h))}return Object(v.a)(Object(v.a)({},e),{},Object(F.a)({},a,s))}),{})}(void 0===t?{}:t)}))}),Object(v.a)({refetchOnWindowFocus:!1,keepPreviousData:!0},e))}var sa=function(e){var t=e.selected,a=e.cost,n=e.title,i=e.isLoading,c=r.a.useState(n.split(".")),o=Object(p.a)(c,1),s=Object(p.a)(o[0],1)[0];return Object(E.jsxs)(Q.a,{width:1,children:[t.map((function(e){var t=e.name,r=e.format,c=e.createPreview,o=e.createThumbnails;return Object(E.jsxs)(Q.a,{p:2,borderRadius:4,bgcolor:"background.paper",display:"flex",flexDirection:"column",children:[Object(E.jsxs)(Q.a,{mb:1,px:2,display:"flex",justifyContent:"space-between",children:[Object(E.jsx)(X.a,{color:"textPrimary",variant:"body1",children:t}),i?Object(E.jsx)(te.a,{size:16}):Object(E.jsxs)(X.a,{color:"textSecondary",variant:"body1",children:["$",a[t]&&a[t].cost.value]})]}),Object(E.jsx)(ft,{fullWidth:!0,name:"".concat(t,".name"),placeholder:n,initialValue:s}),Object(E.jsx)(at.a,{name:"".concat(t,".createPreview"),initialValue:!!c,render:function(){return null}}),Object(E.jsx)(at.a,{name:"".concat(t,".createThumbnails"),initialValue:!!o,render:function(){return null}}),Object(E.jsx)(at.a,{name:"".concat(t,".format"),initialValue:r,render:function(){return null}})]},t)})),Object(E.jsxs)(Q.a,{mt:2,px:2,display:"flex",justifyContent:"space-between",children:[Object(E.jsx)(X.a,{color:"textPrimary",variant:"h5",children:"Total:"}),Object(E.jsx)(X.a,{color:"textSecondary",variant:"h5",children:i?Object(E.jsx)(te.a,{}):"$".concat(Object.values(a).reduce((function(e,t){var a=t.cost;return e+(void 0===a?{}:a).value}),0))})]})]})},la=function(e){var t=e.onClose,a=e.profiles,n=e.item,i=e.classes,c=e.handleSubmit,o=e.submitting,s=e.selected,l=e.toggleSelected,d=n.metadata,u=void 0===d?{}:d,b=Object(R.p)(u,{flat:!0,arrayOnSingle:!1}),j=b.itemId,m=b.title,h=r.a.useState(1),f=Object(p.a)(h,2),O=f[0],v=f[1],g=r.a.useState(""),x=Object(p.a)(g,2),y=x[0],T=x[1],k=r.a.useState(!1),P=Object(p.a)(k,2),N=P[0],I=P[1],D=r.a.useMemo((function(){var e=a;return N||(e=e.filter((function(e){return!e.startsWith("__")}))),y&&(e=e.filter((function(e){return e.toLowerCase().includes(y.toLowerCase())}))),e}),[a,N,y]),w=Ke(_.i.createTranscode),F=w.data,L=void 0===F?{}:F,H=w.request,M=w.isLoading;return r.a.useEffect((function(){return H({itemId:j,tag:s})}),[s,j]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(S.a,{classes:i,children:[Object(E.jsx)(Xt,{itemType:n,interactive:!1}),Object(E.jsxs)(Q.a,{overflow:"hidden",flexGrow:1,display:"flex",flexDirection:"column",children:[Object(E.jsxs)(ea.a,{in:1===O,timeout:500,children:[Object(E.jsxs)(Q.a,{display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:10,bgcolor:"background.default",children:[Object(E.jsx)(Et,{onChange:T,placeholder:"Search profiles..."}),Object(E.jsx)(Ze.d,{SwitchProps:{color:"primary"},label:"Show default profiles",input:{value:N,onChange:function(e){var t=e.target;return I(t.checked)}}})]}),Object(E.jsx)(Q.a,{mt:1,children:D.map((function(e){return Object(E.jsx)(ca,{tagName:e,selected:s.some((function(t){return t.name===e})),onSelect:l},e)}))})]}),Object(E.jsx)(ea.a,{in:2===O,timeout:500,children:Object(E.jsx)("form",{onSubmit:c,children:Object(E.jsx)(sa,{selected:s,cost:L,title:m,isLoading:M})})})]})]}),Object(E.jsxs)(C.a,{children:[1===O&&Object(E.jsx)(A.a,{onClick:t,children:"Cancel"}),Object(E.jsx)(A.a,{disabled:!s.length,variant:1===O?"contained":"text",color:1===O?"primary":"default",onClick:function(){return v((function(e){v(0),setTimeout((function(){return v(1===e?2:1)}),500)}))},children:1===O?"Next":"Back"}),2===O&&Object(E.jsx)(A.a,{disabled:M||o,variant:"contained",color:"primary",disableElevation:!0,onClick:c,children:"Start transcode"})]})]})},da=Object(h.a)((function(e){var t=e.palette;return{root:{position:"relative",padding:(0,e.spacing)(2),backgroundColor:t.background.default,display:"flex",flexDirection:"column",overflow:"hidden","& ul":{overflow:"auto"},"& .MuiCollapse-container":{overflow:"auto",position:"relative"}}}}))((function(e){var t=e.open,a=e.onSuccess,n=e.onClose,i=e.item,c=void 0===i?{}:i,o=e.classes,s=c.shape;s=void 0===s?[{}]:s;var l=Object(p.a)(s,1)[0],d=void 0===l?{}:l,u=c.id,b=oa(),j=b.data,m=(j=void 0===j?{}:j).output,h=void 0===m?{}:m,f=(b.isLoading,h.storageId),v=na().data,g=void 0===v?[]:v,S=r.a.useState([]),C=Object(p.a)(S,2),A=C[0],T=C[1],k=Object(O.b)();return Object(E.jsxs)(x.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:n,children:[Object(E.jsx)(y.a,{children:"Transcode file"}),Object(E.jsx)(at.b,{item:c,render:la,onClose:n,classes:o,profiles:g,onSubmit:function(e){var t={container:1},n=Object.entries(e).filter((function(e){var t=Object(p.a)(e,1)[0];return A.some((function(e){return t===e.name}))})).map((function(e){var a=Object(p.a)(e,2),n=a[0],r=a[1];return new Promise((function(e){var a=function(){return e({tag:n})},i=function(t){var a=t.message;return e({tag:n,error:a})},c=r.createThumbnails,o=void 0!==c&&c,s=r.name,l=r.format,b=Object(R.a)({title:s});_.y.createImportPlaceholder({metadataDocument:b,queryParams:t}).then((function(e){var t=e.data,r=(t=void 0===t?{}:t).id;return _.q.removeShapeAll({itemId:r}).then((function(){return _.q.createShape({itemId:r,shapeDocument:d}).then((function(){return _.i.createTranscode({itemId:u,queryParams:{tag:n,destinationItem:r,createThumbnails:o,storageId:f,jobmetadata:[{key:"filename",value:"".concat(s,".").concat(l)}]}}).then(a).catch((function(e){return _.i.removeItem({itemId:r}).then((function(){return i(e)}))}))})).catch((function(e){return _.i.removeItem({itemId:r}).then((function(){return i(e)}))}))})).catch((function(e){return _.i.removeItem({itemId:r}).then((function(){return i(e)}))}))})).then(setTimeout((function(){return k.invalidateQueries("getJobs")}),2e3)).catch(i)}))}));return Promise.all(n).then(a)},selected:A,toggleSelected:function(e){var t=e.name,a=A.filter((function(e){return e.name!==t}));return a.length===A.length?T([].concat(Object(Je.a)(a),[e])):T(a)}})]})})),ua={itemSearchDocument:{field:[{name:"__shape_size",value:[{value:1}]}]},queryParams:{content:["shape","metadata","thumbnail"],field:["originalFilename:title","itemId","title"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"},{key:"contentDisposition",value:"attachment"}],"noauth-url":!0},rowsPerPage:10},ba={itemSearchDocument:{field:[{name:"__shape_size",value:[{value:2}]}]},queryParams:{content:["shape","metadata","thumbnail"],field:["originalFilename:title","itemId","title"],methodMetadata:[{key:"format",value:"SIGNED-AUTO"},{key:"contentDisposition",value:"attachment"}],"noauth-url":!0},rowsPerPage:10},ja=function(e){var t=e.query,a=e.setQuery,n=Ue(ua),i=n.state,c=Object(g.a)(n,["state"]),o=Ue(ba),s=o.state,l=Object(g.a)(o,["state"]),u=Object(f.s)(i),b=u.itemListType,j=void 0===b?{}:b,m=u.isLoading,h=u.isError,O=u.onRefresh,x=Object(f.s)(s),y=x.itemListType,S=void 0===y?{}:y,C=x.isLoading,A=x.isError,T=x.onRefresh,k=i.page,P=s.page,N=m||C;r.a.useEffect((function(){return h&&setTimeout(O,5e3)}),[h]),r.a.useEffect((function(){return A&&setTimeout(T,5e3)}),[A]);var D=I().showDialog,w=Object(d.c)().enqueueSnackbar,R=r.a.useState("input"),F=Object(p.a)(R,2),L=F[0],H=F[1],M=r.a.useRef(We()(c.setSearchText,500)).current,G=r.a.useRef(We()(l.setSearchText,500)).current;r.a.useEffect((function(){"input"===L&&M("*".concat(t.toLowerCase(),"*")),"output"===L&&G("*".concat(t.toLowerCase(),"*"))}),[t]);var q=function(e){return D({title:"Delete item",message:"Are you sure you want to delete this item?",okText:"Yes, delete item",noText:"No, cancel"}).then((function(){return _.i.removeItem({itemId:e}).then((function(){w("Item deleted"),function(){var e=0,t=("input"===L?Object(v.a)({},j):Object(v.a)({},S)).hits;"input"===L&&function a(){return T().then((function(n){n.data.hits===t&&e<5&&(e+=1,a())}))}(),"output"===L&&function a(){return T().then((function(n){n.data.hits===t&&e<5&&(e+=1,a())}))}()}()})).catch((function(){return w("Failed to delete item",{variant:"error"})}))})).catch((function(){return null}))};return Object(E.jsxs)(Q.a,{display:"grid",gridTemplateRows:"auto 1fr",gridGap:16,children:[Object(E.jsx)($.a,{children:Object(E.jsxs)(Z.a,{value:L,onChange:function(e,n){t&&a(""),k>0&&c.onChangePage({page:0}),P>0&&l.onChangePage({page:0}),H(n)},children:[Object(E.jsx)(ee.a,{disableRipple:!0,value:"input",label:"Input storage (".concat(j.hits||0,")")}),Object(E.jsx)(ee.a,{disableRipple:!0,value:"output",label:"Output storage (".concat(S.hits||0,")")}),N&&Object(E.jsx)(ee.a,{disabled:!0,style:{minWidth:"unset"},icon:Object(E.jsx)(te.a,{size:20})})]})}),Object(E.jsx)(Q.a,{overflow:"hidden",hidden:"input"!==L,children:Object(E.jsx)($t,Object(v.a)({page:k,onTranscode:function(e){return D({Dialog:da,item:e}).then((function(e){return w("",{persist:!0,content:Object(E.jsx)(_t,{response:e})})})).catch((function(){return null}))},itemListType:j,onDelete:q},c))}),Object(E.jsx)(Q.a,{overflow:"hidden",hidden:"output"!==L,children:Object(E.jsx)(Zt,Object(v.a)({itemListType:S,page:P,onDelete:q},l))})]})};var pa=function(){var e=r.a.useState(""),t=Object(p.a)(e,2),a=t[0],n=t[1],i=function(){var e=r.a.useContext(L);if(void 0===e)throw new Error("useSplitters must be used within a SplitterContext");return e}(),c=i.splitters,o=i.setSplitter;return Object(E.jsxs)(Q.a,{height:1,display:"flex",flexDirection:"column",children:[Object(E.jsx)(Et,{onChange:n,value:a}),Object(E.jsx)(Q.a,{mt:2,flexGrow:1,overflow:"hidden",children:Object(E.jsxs)(At,{style:{flexDirection:"row"},direction:"horizontal",minSize:375,sizes:c.vertical,gutterSize:20,onDragEnd:function(e){return o("horizontal",e)},children:[Object(E.jsx)(ja,{query:a,setQuery:n}),Object(E.jsx)(qe,{})]})})]})},ma=function(e){return e?void 0:"Required"},ha=function(e){return e.includes(" ")?"Cannot contain blank spaces":void 0},fa=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},Oa=[{name:"general",label:"",fields:[{name:"name",label:"Name *",type:"string",placeholder:"Name",validate:fa(ma,ha),fullWidth:!0,autoFocus:!0},{name:"description",label:"Description",type:"string",placeholder:"Description",fullWidth:!0},{name:"format",label:"Format *",type:"select",fullWidth:!0,defaultValue:"mp4",options:[{value:"mp4",label:"MP4"}]},{name:"createThumbnails",label:"Create thumbnails",type:"checkbox",defaultValue:!1,fullWidth:!0}]},{name:"video",label:"Video",fields:[{name:"video.codec",label:"Codec",type:"select",defaultValue:"h264",dependency:["format"],options:[{value:"h264",label:"H264",dependency:[{format:"mp4"}]}]},{name:"video.preset",label:"Preset",type:"select",dependency:["video.codec"],options:[{value:["baseline"],label:"Baseline",dependency:[{"video.codec":"h264"}]},{value:["ipod"],label:"Ipod",dependency:[{"video.codec":"h264"}]},{value:["main"],label:"Main",dependency:[{"video.codec":"h264"}]},{value:["high"],label:"High",dependency:[{"video.codec":"h264"}]}]},{name:"video.framerate",label:"Framerate",type:"select",match:!0,options:[{value:{numerator:1,denominator:24},label:"24 FPS"},{value:{numerator:1,denominator:25},label:"25 FPS"},{value:{numerator:1,denominator:30},label:"30 FPS"},{value:{numerator:1,denominator:50},label:"50 FPS"},{value:{numerator:1,denominator:60},label:"60 FPS"}]},{name:"video.bitrate",label:"Bitrate",type:"select",match:!0,dependency:["video.preset"],options:[{value:1e6,label:"1 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:2e6,label:"2 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:3e6,label:"3 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:4e6,label:"4 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:5e6,label:"5 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:6e6,label:"6 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:7e6,label:"7 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:8e6,label:"8 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:9e6,label:"9 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:1e7,label:"10 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:11e6,label:"11 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:12e6,label:"12 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:15e6,label:"15 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:2e7,label:"20 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:25e6,label:"25 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:3e7,label:"30 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]},{value:5e7,label:"50 Mbit/s",dependency:[{"video.preset":["high"]},{"video.preset":["main"]},{"video.preset":["ipod"]},{"video.preset":["baseline"]}]}]},{name:"video.scaling",label:"Resolution",type:"select",match:!0,fullWidth:!0,dependency:["video.preset"],options:[{value:{width:4096,height:2160},label:"4096 x 2160"},{value:{width:2048,height:1080},label:"2048 x 1080"},{value:{width:1920,height:1080},label:"1920 x 1080"},{value:{width:1280,height:720},label:"1280 x 720"},{value:{width:960,height:540},label:"960 x 540"},{value:{width:640,height:360},label:"640 x 360"}]}]},{name:"audio",label:"Audio",fields:[{name:"audio.codec",label:"Codec",type:"select",dependency:["format"],options:[{value:"nablet_aac",label:"AAC Nablet",dependency:[{format:"mp4"}]},{value:"mp3",label:"MP3",dependency:[{format:"mp4"}]}]},{name:"audio.preset",label:"Preset",type:"select",dependency:["audio.codec"],options:[{value:["AAC_LC"],label:"Low complexity",dependency:[{"audio.codec":"nablet_aac"}]}]},{name:"audio.sampleRate",label:"Sample rate",type:"select",match:!0,dependency:["format"],options:[{value:48,label:"48 Khz",dependency:[{format:"mp4"}]}]},{name:"audio.sampleSize",label:"Sample size",type:"select",match:!0,dependency:["format"],options:[{value:16,label:"16",dependency:[{format:"mp4"}]},{value:24,label:"24",dependency:[{format:"mp4"}]}]}]}],va=a(364),ga=a(18),xa=a(276),ya=a(269),Sa=a(270),Ca=function(e){var t=e.fields,a=Object(g.a)(e,["fields"]);return Object(E.jsx)(ga.a,{spacing:2,container:!0,children:t.map((function(e){var t=e.name,n=e.fullWidth,r=Object(g.a)(e,["name","fullWidth"]);return Object(E.jsx)(ga.a,{item:!0,xs:n?12:6,children:Object(E.jsx)(gt,Object(v.a)(Object(v.a)({name:t},r),a))},t)}))})},Aa=Object(h.a)((function(e){var t=e.spacing;return{root:{borderRadius:t(.5),boxShadow:"none",marginTop:t(2),marginBottom:t(0),"&:before":{content:"unset"}}}}))((function(e){var t=e.label,a=e.fields,n=e.errors,i=e.submitFailed,c=e.classes,o=Object(g.a)(e,["label","fields","errors","submitFailed","classes"]),s=r.a.useState(!1),l=Object(p.a)(s,2),d=l[0],u=l[1],b=r.a.useMemo((function(){return i&&a.some((function(e){var t=e.name;return Object.keys(n).includes(t)}))}),[n,a,i]);return t?Object(E.jsxs)(xa.a,{classes:c,expanded:d,onChange:function(){return u(!d)},children:[Object(E.jsx)(ya.a,{expandIcon:Object(E.jsx)(va.a,{}),children:Object(E.jsx)(X.a,{color:b?"error":"initial",children:t})}),Object(E.jsx)(Sa.a,{children:Object(E.jsx)(Ca,Object(v.a)({fields:a},o))})]}):Object(E.jsx)(Ca,{fields:a,errors:n})})),Ea=Object(G.a)(Oa),Ta=Ea[0],ka=Ea.slice(1),Pa=Ta.fields,Na=Object(G.a)(Pa),Ia=Na[0],Da=Na.slice(1),wa=function(e){var t=e.form,a=e.sections,n=e.handleSubmit,r=e.onClose,i=e.okText,c=void 0===i?"Add new profile":i,o=e.classes,s=t.getState().submitting;return Object(E.jsxs)("form",{onSubmit:n,children:[Object(E.jsx)(y.a,{classes:{root:o.title},children:"Profile manager"}),Object(E.jsx)(S.a,{classes:{root:o.content},children:a.map((function(e){var t=e.name,a=Object(g.a)(e,["name"]);return Object(E.jsx)(Aa,Object(v.a)({},a),t)}))}),Object(E.jsxs)(C.a,{classes:{root:o.actions},children:[Object(E.jsx)(A.a,{onClick:r,children:"Cancel"}),Object(E.jsx)(A.a,{disabled:s,type:"submit",variant:"contained",color:"primary",disableElevation:!0,children:c})]})]})},Ra=Object(h.a)((function(e){var t=e.spacing,a=e.palette;return{root:{},title:{},content:{maxHeight:"75vh",padding:t(2),backgroundColor:a.background.default},actions:{}}}))((function(e){var t=e.onSuccess,a=e.onClose,n=e.open,i=e.classes,c=e.profile,o=void 0===c?{}:c,s=e.okText,l=o.name,d=r.a.useState(l?[Object(v.a)(Object(v.a)({},Ta),{},{fields:[Object(v.a)(Object(v.a)({},Ia),{},{disabled:!0})].concat(Object(Je.a)(Da))})].concat(Object(Je.a)(ka)):Oa),u=Object(p.a)(d,1)[0];return Object(E.jsx)(x.a,{classes:{root:i.root},open:n,onClose:a,children:Object(E.jsx)(at.b,{initialValues:o,onSubmit:function(e){return function(e){var t=e.video,a=e.audio,n=e.format,r=e.name,i=e.description,c=e.createThumbnails;return new Promise((function(e,o){var s={metadata:{}},l={};if(r?s.name=r:l.name="Name is required",s.format=n||"Format is required",i&&(s.description=i),t){s.video={};var d=t.codec,u=t.preset,b=t.framerate,j=t.bitrate,p=t.scaling;if(d&&(s.video.codec=d),u&&(s.video.preset=u),j&&(s.video.bitrate=j),b){var m=25,h=1;"object"===typeof b&&(m=b.denominator,h=b.numerator),["string","integer"].includes(typeof b)&&(m=b),s.video.framerate={denominator:m,numerator:h}}if(p){var f=t.width,O=void 0===f?0:f,g=t.height,x=void 0===g?0:g;"object"===typeof p&&(O=p.width,x=p.height),s.video.scaling=Object(v.a)(Object(v.a)({},O&&{width:Number(O)}),x&&{height:Number(x)})}}if(a){s.audio={};var y=a.codec,S=a.preset,C=a.sampleRate,A=a.sampleSize;if(y&&(s.audio.codec=y),S&&(s.audio.preset=S),A&&!C&&(l.audio||(l.audio={}),l.audio.sampleRate="Sample rate is required if sample size is set"),!A&&C&&(l.audio||(l.audio={}),l.audio.sampleSize="Sample size is required if sample rate is set"),A&&C){var E=Number(A),T=Number(C);s.audio.bitrate=E*T*1e3,s.metadata.field=[].concat(Object(Je.a)(s.metadata.field||[]),[{key:"sampleRate",value:T},{key:"sampleSize",value:E}])}}c&&(s.metadata.field=[].concat(Object(Je.a)(s.metadata.field||[]),[{key:"createThumbnails",value:!0}])),Object.keys(l).length?o(l):e(s)}))}(e).then(t).catch((function(e){return e}))},sections:u,onClose:a,component:wa,classes:i,okText:s,subscription:{submitting:!0,pristine:!0,submitErrors:!0}})})})),_a=function(){var e=I().showDialog,t=Object(d.c)().enqueueSnackbar,a=Object(n.useState)(0),i=Object(p.a)(a,2),c=i[0],o=i[1],s=na().data,l=void 0===s?[]:s,u=function(){var e=Object(O.b)();return Object(w.a)(_.r.updateShapeTag,{onSuccess:function(t,a){var n=a.tagName;e.invalidateQueries(["getProfile",n])}})}().mutateAsync,b=function(){var e=Object(O.b)();return Object(w.a)(_.r.updateShapeTag,{onSuccess:function(){e.invalidateQueries("getProfiles")}})}().mutateAsync,j=function(){var e=Object(O.b)();return Object(w.a)(_.r.removeShapeTag,{onSuccess:function(){e.invalidateQueries("getProfiles")}})}().mutateAsync,m=r.a.useState(""),h=Object(p.a)(m,2),f=h[0],v=h[1],g=r.a.useState(!1),x=Object(p.a)(g,2),y=x[0],S=x[1],C=r.a.useMemo((function(){var e=l;return y||(e=e.filter((function(e){return!e.startsWith("__")}))),f&&(e=e.filter((function(e){return e.toLowerCase().includes(f.toLowerCase())}))),e}),[l,y,f]),T=function(a){return e({title:"Delete profile",message:"Are you sure you want to delete this transcode profile?",okText:"Yes, delete profile",noText:"No, cancel"}).then((function(){return j({tagName:a}).then((function(){return t("Profile deleted")})).catch((function(e){var a=e.message;return t(a,{variant:"error"})}))})).catch((function(){return null}))},k=function(a){return e({Dialog:Ra,profile:a,okText:"Save profile"}).then((function(e){var t=e.name;return u({tagName:t,transcodePresetDocument:e})})).then((function(){return t("Success!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))};return Object(E.jsxs)(Q.a,{height:1,display:"flex",flexDirection:"column",children:[Object(E.jsxs)(Q.a,{display:"grid",gridTemplateColumns:"1fr auto",gridGap:8,children:[Object(E.jsx)(Et,{onChange:function(e){return v(e)},placeholder:"Search profiles..."}),Object(E.jsx)(A.a,{variant:"contained",color:"primary",style:{flexShrink:0},onClick:function(){return e({Dialog:Ra}).then((function(e){var t=e.name;return b({tagName:t,transcodePresetDocument:e})})).then((function(){return t("Success!",{variant:"success"})})).catch((function(e){var a=e.message;return a&&t(a,{variant:"error"})}))},disableElevation:!0,children:"Add new profile"}),Object(E.jsx)(Ze.d,{color:"primary",label:"Show default profiles",input:{value:y,onChange:function(e){var t=e.target;return S(t.checked)}}})]}),Object(E.jsx)(Q.a,{my:2,flexGrow:1,overflow:"auto",children:C.slice(c,c+20).map((function(e){return Object(E.jsx)(ca,{tagName:e,onDelete:T,onChange:k,checkbox:!1,interactive:!0},e)}))}),Object(E.jsxs)(Q.a,{display:"flex",justifyContent:"flex-end",children:[Object(E.jsx)(A.a,{type:"button",onClick:function(){o(Math.max(0,c-20))},disabled:0===c,children:"Prev"}),Object(E.jsx)(A.a,{type:"button",onClick:function(){o(c+20)},disabled:c+20>C.length,children:"Next"})]})]})},Fa=a(112),La=a(228),Ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="Not a URL",a=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi,n=new RegExp(a),r=e.match(n);return r?null:t};var Ma=Object(h.a)((function(e){return{root:{height:"100vh",width:"100vw"},gridLeft:{padding:e.spacing(4)},gridRight:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.background.login},logo:{backgroundColor:e.palette.common.white,maxWidth:"25vw"}}}))((function(e){var t=e.classes,a=e.onLogin,n=e.userName,r=e.serverUrl,i=e.error;return Object(E.jsxs)(ga.a,{className:t.root,container:!0,direction:"row",alignItems:"center",children:[Object(E.jsxs)(ga.a,{item:!0,xs:12,sm:12,md:6,lg:3,className:t.gridLeft,children:[Object(E.jsx)(La.a,{style:{visibility:i?"visible":"hidden"},severity:"error",className:t.alert,children:i}),Object(E.jsx)(Ze.b,{onSubmit:a,FormProps:{initialValues:{userName:n,serverUrl:r}},FormFieldsProps:{UrlFieldProps:{validate:Ha}}})]}),Object(E.jsx)(Fa.a,{smDown:!0,children:Object(E.jsx)(ga.a,{item:!0,sm:!0,className:t.gridRight,children:Object(E.jsx)("img",{src:V,alt:U,className:t.logo})})})]})}));var Ga=Object(h.a)((function(){return{logo:{text:"100%",textAlign:"center"}}}))((function(e){var t=e.classes;return Object(E.jsx)(X.a,{className:t.text,children:"Page does not exist"})})),qa=a(487),za=Object(h.a)((function(e){var t=e.typography,a=e.palette,n=e.spacing,r=e.mixins;return{root:Object(v.a)(Object(v.a)(Object(v.a)({},t.subtitle1),r.toolbar),{},{textTransform:"none",opacity:.8,"&::after":{color:a.primary.main,transition:"width 0.25s ease-in-out 0.05s",borderBottom:"0.25em solid",width:0,position:"absolute",bottom:0,left:0,content:'""'},"&:hover, &.active":{opacity:1,backgroundColor:"unset","&::after":{width:"100%"}},"&:not(:last-child)":{marginRight:n(2)}})}}))(A.a);var Wa=Object(h.a)((function(e){var t=e.spacing,a=e.palette;return{root:{backgroundColor:a.background.paper,"& .MuiAvatar-root":{color:a.background.paper}},logo:{height:t(3),width:t(3)},titleText:{fontWeight:600,background:"linear-gradient(to right, ".concat(a.secondary.main," 0%, ").concat(a.primary.main," 28%, ").concat(a.success.main," 64%, ").concat(a.success.light," 97%)"),backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},spacing:{width:"200px"}}}))((function(e){var t=e.classes,a=Object(f.l)(),n=a.userName,r=a.onLogout,i=a.serverUrl;return Object(E.jsx)(qa.a,{className:t.root,elevation:0,color:"default",children:Object(E.jsxs)(Q.a,{display:"flex",px:2,height:1,alignItems:"center",justifyContent:"space-between",children:[Object(E.jsxs)(Q.a,{display:"grid",gridGap:16,gridAutoFlow:"column",alignItems:"center",children:[Object(E.jsx)(Dt.a,{className:t.logo,variant:"square",src:B,alt:U}),Object(E.jsx)(Fa.a,{smDown:!0,children:Object(E.jsxs)(Q.a,{display:"flex",flexDirection:"column",children:[Object(E.jsx)(X.a,{className:t.titleText,children:U}),Object(E.jsx)(X.a,{variant:"caption",children:i})]})})]}),Object(E.jsxs)(Q.a,{children:[Object(E.jsx)(za,{variant:"text",component:o.c,to:"/search",color:"inherit",disableRipple:!0,children:"Browse"}),Object(E.jsx)(za,{variant:"text",component:o.c,to:"/profile",color:"inherit",disableRipple:!0,children:"Transcode Profiles"}),Object(E.jsx)(za,{variant:"text",component:o.c,to:"/settings",color:"inherit",disableRipple:!0,children:"Storage Setup"})]}),Object(E.jsxs)(Q.a,{display:"flex",children:[Object(E.jsx)(Fa.a,{mdDown:!0,children:Object(E.jsx)("div",{className:t.spacing})}),Object(E.jsx)(Ze.f,{userName:n,onLogout:r})]})]})})})),Va=new(a(586).a),Ba=a(585),Ua=a(361),Ka=[{name:"protocol",label:"Service",type:"select",fullWidth:!0,defaultValue:"s3",options:[{label:"S3",value:"s3"}]},{name:"name",label:"Bucket name *",type:"string",validate:fa(ma,ha),placeholder:"Name"},{name:"path",label:"Bucket path *",type:"string",validate:fa(ma,ha),placeholder:"Bucket name"},{name:"accessKey",label:"Access key *",type:"password",placeholder:"Access key",validate:ma,fullWidth:!0},{name:"secretKey",label:"Secret key *",type:"password",placeholder:"Secret key",validate:ma,fullWidth:!0}],Ja=Ka.map((function(e){var t=e.name,a=e.defaultValue;return Object(F.a)({},t,a||"")})).reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),t)}),{}),Qa=function(e){var t=e.spacing,a=e.palette,n=e.transitions;return{"@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(180deg)"}},root:{"& button:not(:last-child)":{marginRight:t(2)},"& .MuiSvgIcon-root.success":{fill:a.success.main},"& .MuiSvgIcon-root.loading":{animation:"$spin 1500ms ".concat(n.easing.easeInOut," infinite")}},storageList:{display:"flex"},storageListItem:{"& .MuiListItemText-root":{display:"flex",flexDirection:"column-reverse"}}}},Ya=Object(h.a)(Qa)((function(e){var t=e.classes,a=e.name,n=e.id,r=e.fields,i=e.form,c=e.pristine,o=e.handleSubmit,s=e.isEditing,l=e.setIsEditing,d=e.bucketName,u=e.bucketPath;return Object(E.jsxs)("form",{onSubmit:o,children:[s||!n?Object(E.jsx)(Q.a,{p:2,children:Object(E.jsx)(ga.a,{spacing:2,container:!0,children:r.map((function(e){var t=e.name,n=e.fullWidth,r=Object(g.a)(e,["name","fullWidth"]);return Object(E.jsx)(ga.a,{item:!0,xs:n?12:6,children:Object(E.jsx)(gt,Object(v.a)({disabled:!s,name:"".concat(a,".").concat(t)},r))},t)}))})}):Object(E.jsx)(Q.a,{p:2,children:Object(E.jsxs)(Y.a,{className:t.storageList,children:[Object(E.jsx)(se.a,{className:t.storageListItem,children:Object(E.jsx)(wt.a,{primary:d,secondary:"Bucket name",primaryTypographyProps:{variant:"body1"}})}),Object(E.jsx)(se.a,{className:t.storageListItem,children:Object(E.jsx)(wt.a,{primary:u,secondary:"Bucket path",primaryTypographyProps:{variant:"body1"}})})]})}),Object(E.jsxs)(Q.a,{p:2,display:"flex",justifyContent:"flex-end",children:[n&&!s&&Object(E.jsx)(A.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return l(!0)},children:"Edit"}),s&&Object(E.jsx)(A.a,{disabled:!n&&c,onClick:function(){i.setConfig("keepDirtyOnReinitialize",!1),i.reset(),i.setConfig("keepDirtyOnReinitialize",!0),n&&l(!1)},children:n?"Cancel":"Reset"}),s&&Object(E.jsx)(A.a,{disabled:c,variant:"contained",color:"primary",type:"submit",disableElevation:!0,children:"Save"})]})]})})),Xa=Object(h.a)(Qa)((function(e){var t=e.classes,a=e.fields,n=e.name,i=e.storage,c=void 0===i?{}:i,o=e.updating,s=e.initialValues,l=e.onUpdateStorage,u=c.id,b=c.protocol,j=c.lastSuccess,m=void 0===j?1971:j,h=c.lastFailure,f=void 0===h?1970:h,O=c.failureMessage,v=c.name,g=c.path,x=Object(d.c)().enqueueSnackbar,y=new Date(m)-new Date(f)<0,S=n.charAt(0).toUpperCase()+n.slice(1),C=r.a.useState(!u),A=Object(p.a)(C,2),T=A[0],k=A[1];r.a.useEffect((function(){u||k(!0)}),[u]);return Object(E.jsxs)($.a,{className:t.root,children:[Object(E.jsxs)(Q.a,{p:2,display:"grid",gridTemplateColumns:"auto 1fr auto",gridGap:16,alignItems:"center",children:[b&&Object(E.jsx)(Dt.a,{children:b}),Object(E.jsxs)(Q.a,{display:"flex",flexDirection:"column",children:[Object(E.jsx)(X.a,{variant:"h6",children:S}),!u&&Object(E.jsxs)(X.a,{variant:"caption",children:[S," not configured"]})]}),u&&o&&Object(E.jsx)(Kt.a,{title:"Waiting for status to update",children:Object(E.jsx)(Ba.a,{className:"loading"})}),u&&y&&!o&&Object(E.jsx)(Kt.a,{title:O,children:Object(E.jsx)(kt.a,{color:"error"})}),u&&!y&&!o&&Object(E.jsx)(Ua.a,{className:"success"})]}),Object(E.jsx)(at.b,{fields:a,name:n,id:u,component:Ya,initialValues:s,onSubmit:function(e){return l(e).then((function(){x("Success!",{variant:"success"}),k(!1)})).catch((function(){x("Failed",{variant:"error"})}))},isEditing:T,setIsEditing:k,bucketName:v,bucketPath:g,subscription:{pristine:!0,submitting:!0},keepDirtyOnReinitialize:!0})]})})),$a=Object(h.a)(Qa)((function(){var e=r.a.useState(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=oa({refetchInterval:a}),c=i.data,o=(c=void 0===c?{}:c).input,s=void 0===o?{}:o,l=c.output,d=void 0===l?{}:l,u=i.isLoading,b=r.a.useMemo((function(){var e=s.lastSuccess,t=void 0===e?1971:e,a=s.lastFailure,n=void 0===a?1970:a,r=s.metadata,i=(r=void 0===r?{}:r).field,c=void 0===i?[]:i,o=(c.length?c.find((function(e){return"lastModified"===e.key})):{}).value;return!!o&&(new Date(t)-new Date(o)<0&&new Date(n)-new Date(o)<0)}),[s]),j=r.a.useMemo((function(){var e=d.lastSuccess,t=void 0===e?1971:e,a=d.lastFailure,n=void 0===a?1970:a,r=d.metadata,i=(r=void 0===r?{}:r).field,c=void 0===i?[]:i,o=(c.length?c.find((function(e){return"lastModified"===e.key})):{}).value;return!!o&&(new Date(t)-new Date(o)<0&&new Date(n)-new Date(o)<0)}),[d]);r.a.useEffect((function(){n(!(!b&&!j)&&5e3)}),[b,j]);var m=function(){var e=Object(O.b)();return Object(w.a)(_.s.modifyStorage,{onSuccess:function(){e.invalidateQueries(["getStorages"])}})}().mutateAsync,h=function(){var e=Object(O.b)();return Object(w.a)(_.s.createStorage,{onSuccess:function(){e.invalidateQueries(["getStorages"])}})}().mutateAsync,f=function(e){var t=e.input,a=e.output,n=Object(v.a)(Object(v.a)({},t),a),r=n.protocol,i=n.accessKey,c=n.secretKey,o=n.name,s=n.path,l=n.id,d=n.storageId,u="".concat(r,"://").concat(i,":").concat(c,"@").concat(o,"/").concat(s);"/"!==u.charAt(u.length-1)&&(u=u.concat("/"));var b=encodeURIComponent(i),j=encodeURIComponent(c),p="".concat(r,"://").concat(b,":").concat(j,"@").concat(o,"/").concat(s);if(d){var f={type:"LOCAL",capacity:8e11,method:[{id:l,uri:p,read:!0,write:!0,browse:!0,metadata:{field:[{key:"lastModified",value:(new Date).toISOString()}]}}]};return m({storageId:d,storageDocument:f})}var O={type:"LOCAL",capacity:8e11,method:[{uri:p,read:!0,write:!0,browse:!0,metadata:{field:[{key:"lastModified",value:(new Date).toISOString()}]}}],metadata:{field:[]}};return t?O.metadata.field=[{key:"transcodeThemeSourceStorage",value:!0}]:a&&(O.metadata.field=[{key:"transcodeThemeOutputStorage",value:!0},{key:"filenameScript",value:q}]),h({storageDocument:O})};return Object(E.jsx)(Q.a,{height:1,display:"flex",flexDirection:"column",children:Object(E.jsxs)(ga.a,{container:!0,spacing:2,children:[Object(E.jsx)(ga.a,{item:!0,xs:12,sm:6,children:u?Object(E.jsx)(Q.a,{display:"flex",justifyContent:"center",children:Object(E.jsx)(te.a,{})}):Object(E.jsx)(Xa,{name:"input",fields:Ka,storage:s,initialValues:s.id?{input:s}:{input:Ja},updating:b,onUpdateStorage:f})}),Object(E.jsx)(ga.a,{item:!0,xs:12,sm:6,children:u?Object(E.jsx)(Q.a,{display:"flex",justifyContent:"center",children:Object(E.jsx)(te.a,{})}):Object(E.jsx)(Xa,{name:"output",fields:Ka,storage:d,initialValues:d.id?{output:d}:{output:Ja},updating:j,onUpdateStorage:f})})]})})}));var Za=Object(h.a)((function(e){var t=e.mixins,a=e.spacing;return{container:{height:"100vh",overflow:"auto",paddingTop:t.toolbar.minHeight+a(2),paddingLeft:a(2),paddingRight:a(2)}}}))((function(e){var t=e.classes,a=r.a.useState(),n=Object(p.a)(a,2),i=n[0],c=n[1];return Object(E.jsx)(f.a,{cookieOptions:{maxAge:1209600,path:J},onError:function(e){var t=e.message;c(t),setTimeout((function(){return c()}),5e3)},LoginComponent:Ma,LoginProps:{error:i},children:Object(E.jsx)(O.a,{client:Va,children:Object(E.jsxs)(N,{children:[Object(E.jsx)(Wa,{}),Object(E.jsx)("div",{className:t.container,children:Object(E.jsxs)(m.d,{children:[Object(E.jsx)(m.b,{exact:!0,path:"/search/",children:Object(E.jsx)(pa,{})}),Object(E.jsx)(m.b,{exact:!0,path:"/search/*",children:Object(E.jsx)(pa,{})}),Object(E.jsx)(m.b,{exact:!0,path:"/profile/",children:Object(E.jsx)(_a,{})}),Object(E.jsx)(m.b,{exact:!0,path:"/settings",children:Object(E.jsx)($a,{})}),Object(E.jsx)(m.a,{exact:!0,from:"/",push:!0,to:"/search/"}),Object(E.jsx)(m.b,{path:"*",children:Object(E.jsx)(Ga,{})})]})})]})})})}));c.a.render(Object(E.jsx)(qt,{children:Object(E.jsx)(s.a,{theme:j,children:Object(E.jsx)(l.a,{children:Object(E.jsx)(d.b,{children:Object(E.jsx)(M,{splitters:{vertical:[75,25]},children:Object(E.jsx)(o.a,{basename:J,children:Object(E.jsx)(Za,{})})})})})})}),document.getElementById("root"))}},[[479,1,2]]]);